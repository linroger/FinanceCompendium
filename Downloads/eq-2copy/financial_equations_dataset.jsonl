{"title": "Black-Scholes Call Option Price", "equation": "C = S_0 N(d_1) - K e^{-rT} N(d_2)", "category": "Options", "tags": ["black-scholes", "european", "call", "risk-neutral", "closed-form", "lognormal", "normal-cdf", "delta-hedging", "implied-volatility", "greeks"], "note": "## Equation Variables\nThe Black–Scholes model provides a closed-form expression for the no-arbitrage price of a European call option under specific assumptions about market dynamics and the behavior of the underlying asset. This foundational equation revolutionized options pricing by establishing a rigorous mathematical framework for valuing derivatives.\n\n- **$C$**: The theoretical value (fair price) of a European call option at time $t=0$, representing the present value of the option's expected payoff under the risk-neutral measure. This price ensures no arbitrage opportunities exist in the market.\n- **$S_{0}$**: The current spot price of the underlying asset at the valuation date, observed directly in the market and serving as the starting point for all price dynamics.\n- **$K$**: The strike (exercise) price specified in the option contract, representing the price at which the holder has the right (but not obligation) to purchase the underlying asset upon exercise.\n- **$r$**: The continuously compounded risk-free interest rate, typically derived from government bond yields with maturity matching the option's time to expiration.\n- **$T$**: The time to maturity measured in years, representing the duration until the option's expiration date when the holder's exercise right expires.\n- **$N(\\cdot)$**: The standard normal cumulative distribution function, defined as $N(x)=\\mathbb{P}(Z\\le x)$ where $Z\\sim\\mathcal{N}(0,1)$, which transforms standardized values into probability equivalents.\n- **$d_{1}$**: The first composite term combining multiple factors:\n  $$d_{1}=\\frac{\\ln(S_{0}/K)+(r+\\sigma^{2}/2)T}{\\sigma\\sqrt{T}}$$\n  This term captures the log-moneyness, risk-adjusted drift, and volatility scaling.\n- **$d_{2}$**: The second composite term:\n  $$d_{2}=d_{1}-\\sigma\\sqrt{T}$$\n  This adjusts $d_{1}$ by the total volatility over the option's life.\n- **$\\sigma$**: The annualized volatility (standard deviation) of the underlying asset's log returns, representing the magnitude of price fluctuations expected over the coming year.\n- **$e^{-rT}$**: The present value factor under continuous compounding, which discounts future cash flows back to the current time.\n\n## Interpretation\nThe Black–Scholes call price equation decomposes into two fundamental components that together capture the complete economic value of the option. The first term, $S_{0}N(d_{1})$, represents the expected discounted value of receiving the stock if the option expires in-the-money under the risk-neutral measure. This term reflects the option's intrinsic value adjusted for the probability of exercise and the stock price dynamics. The second term, $K e^{-rT}N(d_{2})$, represents the expected discounted cost of paying the strike price if exercise occurs. This component can be interpreted as the present value of a contingent liability.\n\nThe difference between these two terms—$S_{0}N(d_{1})-K e^{-rT}N(d_{2})$—captures the time value and leverage premium inherent in the option contract. This premium exists because options provide asymmetric payoff profiles: holders can profit from favorable price movements while limiting losses to the premium paid. The convexity of option payoffs makes volatility valuable, and this value is embedded in the pricing formula through the $N(d_{1})$ and $N(d_{2})$ terms.\n\nThe $N(d_{1})$ term has a particularly important interpretation as an approximate risk-neutral probability that the option will expire in-the-money, adjusted for the present value of expected dividends. The $N(d_{2})$ term can be interpreted as the risk-neutral probability that the option will be exercised, which determines the expected present value of the strike payment.\n\n## Assumptions\nThe Black–Scholes model relies on several critical assumptions that define its domain of validity and guide proper application in practice:\n\n1. **European Exercise**: The option can only be exercised at expiration, not before. This assumption simplifies the pricing problem by eliminating early exercise considerations that would require backward induction solutions.\n\n2. **Lognormal Price Dynamics**: The underlying asset price follows geometric Brownian motion with constant drift and volatility, ensuring that log returns are normally distributed. This implies prices cannot become negative and exhibit the characteristic exponential growth pattern observed in financial markets.\n\n3. **Constant Parameters**: The risk-free rate $r$ and volatility $\\sigma$ remain constant throughout the option's life, eliminating term structure effects and stochastic volatility considerations.\n\n4. **No Dividends**: The underlying asset pays no dividends during the option's life. When dividends exist, they must be incorporated through appropriate adjustments to the forward price or through separate dividend-yield models.\n\n5. **Perfect Markets**: There are no transaction costs, taxes, or bid-ask spreads. Trading can occur continuously at any price, and markets are perfectly liquid.\n\n6. **No Arbitrage**: The market is arbitrage-free, meaning no risk-free profits can be extracted from price discrepancies. This assumption underlies the risk-neutral valuation principle.\n\n7. **Risk-Neutral Pricing**: Under these assumptions, investors are risk-neutral with respect to the underlying asset, meaning expected returns equal the risk-free rate regardless of risk preferences.\n\n## Practical Use\nThe Black–Scholes formula serves as the foundational tool for multiple applications in options markets and quantitative finance. Its most prevalent use is in calculating implied volatility from observed market prices, a process called \"volatility surface construction.\" By inverting the Black–Scholes equation, traders and risk managers back out the volatility that, when plugged into the formula, produces the market price. This implied volatility becomes the primary quoting convention for options markets and enables relative value analysis across different strikes and expirations.\n\nThe formula supports delta-hedging strategies where traders construct risk-neutral portfolios by holding appropriate quantities of the underlying asset to offset option exposure. The delta $\\Delta=N(d_{1})$ provides the exact hedge ratio needed to create a locally risk-free position. Greeks derived from the Black–Scholes framework—gamma, vega, theta, and rho—enable comprehensive risk management and sensitivity analysis for portfolios containing options and other derivatives.\n\nBeyond direct option pricing, the Black–Scholes framework extends to employee stock options, convertible bonds, and various structured products. Its closed-form nature makes it computationally efficient and suitable for real-time pricing applications. However, practitioners must recognize the model's limitations when underlying assumptions are violated, particularly regarding volatility dynamics and early exercise features."}
{"title": "Black-Scholes Put Option Price", "equation": "P = K e^{-rT} N(-d_2) - S_0 N(-d_1)", "category": "Options", "tags": ["black-scholes", "european", "put", "risk-neutral", "closed-form", "parity", "lognormal", "normal-cdf", "implied-volatility", "protective-put"], "note": "## Equation Variables\nThe Black–Scholes put option pricing formula provides the theoretical no-arbitrage value for a European put option, complementing the call price formula through fundamental put-call parity relationships. While the call formula captures the right to buy an asset, the put formula captures the right to sell an asset at a predetermined strike price.\n\n- **$P$**: The theoretical value of a European put option at time $t=0$, representing the fair price for the right to sell the underlying asset at strike $K$ upon expiration. Put options provide insurance-like protection against downside movements.\n- **$S_{0}$**: The current spot price of the underlying asset, serving as the reference point for the option's moneyness and intrinsic value calculation.\n- **$K$**: The strike (exercise) price at which the put holder has the right to sell the underlying asset upon exercise at expiration.\n- **$r$**: The continuously compounded risk-free interest rate, representing the time value of money and the appropriate discount rate for risk-free cash flows.\n- **$T$**: The time to maturity in years, determining the duration of the option's protection and the opportunity for favorable price movements.\n- **$N(\\cdot)$**: The standard normal cumulative distribution function, which transforms standardized normal values into probability equivalents ranging from 0 to 1.\n- **$N(-d_{1})$**: The probability factor for the stock component, representing the complementary CDF value at the positive $d_{1}$ value.\n- **$N(-d_{2})$**: The probability factor for the strike component, representing the complementary CDF value at the positive $d_{2}$ value.\n- **$d_{1}$ and $d_{2}$**: Identical composite terms as in the call formula:\n  $$d_{1}=\\frac{\\ln(S_{0}/K)+(r+\\sigma^{2}/2)T}{\\sigma\\sqrt{T}}$$\n  $$d_{2}=d_{1}-\\sigma\\sqrt{T}$$\n- **$\\sigma$**: The annualized volatility of the underlying asset's log returns, measuring the magnitude of expected price fluctuations.\n- **$e^{-rT}$**: The continuous discount factor that brings future cash flows back to present value.\n\n## Interpretation\nThe put pricing formula has an intuitive economic interpretation that mirrors the call formula's structure while reflecting the fundamental asymmetry between long and short positions in the underlying asset. The first term, $K e^{-rT}N(-d_{2})$, represents the present value of receiving the strike price if the option expires in-the-money (when the underlying falls below the strike). This is the insurance benefit that put holders receive when prices decline. The second term, $S_{0}N(-d_{1})$, represents the present value of the underlying asset that would need to be delivered if exercise occurs.\n\nThe put price can be understood through the lens of portfolio insurance: the put provides protection against the underlying asset falling below the strike price. The value of this protection depends on the probability of such a decline (captured by $N(-d_{2})$) and the potential magnitude of losses (determined by the strike price and time to expiration). The $N(-d_{1})$ term adjusts this value based on the underlying's expected path and volatility.\n\nThe put-call parity relationship provides crucial insight: $C-P=S_{0}-Ke^{-rT}$ (for non-dividend-paying assets). This parity ensures that call and put prices remain consistent with each other and with the underlying asset price. Violations of put-call parity would create arbitrage opportunities that sophisticated traders would immediately exploit until prices re-equilibrate.\n\n## Assumptions\nThe assumptions underlying the Black–Scholes put formula are identical to those for the call formula, reflecting the symmetry of the theoretical framework:\n\n1. European exercise only, meaning early exercise is not permitted\n2. Lognormal price dynamics following geometric Brownian motion\n3. Constant risk-free rate and volatility throughout the option's life\n4. No dividends or other distributions paid by the underlying\n5. No transaction costs, taxes, or market frictions\n6. Continuous trading and perfect market liquidity\n7. Risk-neutral pricing under the no-arbitrage framework\n\nThese assumptions define the conditions under which the put formula provides accurate theoretical prices. In practice, deviations from these assumptions—particularly American early exercise features and dividend payments—require modifications to the basic formula.\n\n## Practical Use\nThe Black–Scholes put formula enables multiple practical applications in options markets and risk management. The most common use is in calculating implied volatility from observed put prices, similar to the call price inversion process. Implied volatility derived from puts often serves as a benchmark for downside protection costs and can differ slightly from call-implied volatility due to market microstructure effects.\n\nPut options serve as the foundation for protective put strategies, where investors hold the underlying asset while purchasing puts to limit downside exposure. The put pricing formula helps investors understand the cost of this insurance and evaluate whether the protection premium is justified by their risk preferences and market outlook.\n\nThe formula supports delta-hedging for put positions, where the put delta $\\Delta_{put}=N(d_{1})-1=-N(-d_{1})$ provides the hedge ratio for creating synthetic positions or managing portfolio exposure. Portfolio managers use put options to hedge concentrated positions, tail risk, or market exposure during periods of elevated uncertainty.\n\nIn corporate finance, puts appear in structured products, convertible bonds, and employee stock option plans. The pricing framework helps value these instruments and understand their risk characteristics. The symmetry between calls and puts in the Black–Scholes framework means that insights derived from call analysis often translate directly to put analysis, facilitating comprehensive derivatives risk management."}
{"title": "Black-Scholes d1 and d2 Terms", "equation": "d_1 = \\frac{\\ln(S_0/K) + (r + \\sigma^2/2)T}{\\sigma \\sqrt{T}} \\quad ; \\quad d_2 = d_1 - \\sigma \\sqrt{T}", "category": "Options", "tags": ["black-scholes", "d1-d2", "risk-neutral", "lognormal-distribution", "composite-terms", "normal-cdf", "volatility-scaling", "drift-adjustment"], "note": "## Equation Variables\nThe $d_{1}$ and $d_{2}$ terms are composite expressions that appear throughout the Black–Scholes framework, serving as the critical inputs to the standard normal cumulative distribution function $N(\\cdot)$ that transforms these standardized values into option pricing components. These terms encapsulate the essential dynamics of the underlying asset's price evolution relative to the strike price.\n\n- **$d_{1}$**: The primary composite term combining log-moneyness, risk-adjusted drift, and volatility. It represents the standardized distance to the strike price under the risk-neutral measure, adjusted for the volatility over the option's life.\n- **$d_{2}$**: The secondary composite term derived by subtracting total volatility from $d_{1}$. This term represents the effective threshold for the underlying price at expiration and is directly related to the probability of the option expiring in-the-money.\n- **$\\ln(S_{0}/K)$**: The natural logarithm of the money-ness ratio, measuring how far in-the-money or out-of-the-money the option is at inception. Positive values indicate in-the-money calls (or out-of-the-money puts), while negative values indicate the opposite.\n- **$r$**: The continuously compounded risk-free interest rate, representing the expected return on risk-free capital over the option's life.\n- **$\\sigma^{2}/2$**: One-half of the variance of log returns, which, when combined with the risk-free rate, creates the risk-adjusted drift term that appears in the exponent of the lognormal distribution.\n- **$T$**: The time to maturity in years, scaling both the drift and volatility components appropriately for the option's duration.\n- **$\\sigma$**: The annualized volatility (standard deviation) of the underlying asset's log returns, measuring the amplitude of price fluctuations expected over one year.\n- **$\\sigma\\sqrt{T}$**: The total volatility over the option's life, representing the standard deviation of the log price change from time 0 to time $T$. This is often called the \"volatility over life\" and is a key determinant of option value.\n\n## Interpretation\nThe $d_{1}$ term has a profound statistical and economic interpretation within the Black–Scholes framework. It represents the standardized distance from the current spot price to the strike price, measured in units of future volatility, while incorporating the risk-adjusted drift that accounts for both the time value of money and the variance compensation required for holding risky assets. The numerator $\\ln(S_{0}/K)+(r+\\sigma^{2}/2)T$ can be understood as the expected log-price under the risk-neutral measure at expiration, and dividing by $\\sigma\\sqrt{T}$ standardizes this expected value relative to its uncertainty.\n\nThe $N(d_{1})$ probability has multiple equivalent interpretations. It represents the risk-neutral probability that the option will expire in-the-money, adjusted for the present value of expected dividends. It also represents the delta of the option, which is the hedge ratio needed to create a locally risk-free portfolio. Additionally, $N(d_{1})$ can be interpreted as the conditional expectation of the indicator function for exercise, making it a fundamental component of risk-neutral valuation.\n\nThe $d_{2}=d_{1}-\\sigma\\sqrt{T}$ relationship emerges from the lognormal distribution of prices at expiration. When the log-price follows a normal distribution with mean $\\ln(S_{0})+(r-\\sigma^{2}/2)T$ and variance $\\sigma^{2}T$, the condition $S_{T}>K$ transforms through logarithms to $d_{2}>0$. Thus, $N(d_{2})$ is the exact risk-neutral probability of exercise, while $N(d_{1})$ is this probability adjusted for the present value of the underlying asset's expected value.\n\nThe difference between $d_{1}$ and $d_{2}$—which is exactly $\\sigma\\sqrt{T}$—captures the convexity value of the option. This convexity arises because options provide asymmetric payoffs: unlimited upside potential with limited downside loss to the premium paid. The larger this difference, the more valuable the option's convexity, which is why options with longer maturities and higher volatilities command higher premiums.\n\n## Assumptions\nThe interpretation and validity of $d_{1}$ and $d_{2}$ depend fundamentally on the Black–Scholes assumptions about price dynamics and market structure:\n\n1. **Lognormal Distribution**: The underlying price follows a lognormal distribution at expiration, meaning log-returns are normally distributed. This assumption is embedded in the $\\ln(S_{0}/K)$ term and the variance $\\sigma^{2}T$ scaling.\n\n2. **Constant Volatility**: The volatility $\\sigma$ is constant and known with certainty, ensuring that $\\sigma^{2}T$ accurately represents the total variance over the option's life.\n\n3. **Risk-Neutral Measure**: The risk-adjusted drift $r+\\sigma^{2}/2$ correctly reflects the expected return under the equivalent martingale measure, which eliminates arbitrage opportunities.\n\n4. **No Dividends**: The derivation assumes no dividends are paid during the option's life, as dividend payments would modify the forward price and drift term.\n\n5. **Continuous Compounding**: The use of continuous compounding for both the risk-free rate and the lognormal drift is essential to the algebraic structure of the expressions.\n\nWhen these assumptions are violated, $d_{1}$ and $d_{2}$ may require modification or replacement with more complex expressions that account for stochastic volatility, jumps, or early exercise features.\n\n## Practical Use\nIn practice, $d_{1}$ and $d_{2}$ serve as the computational core of the Black–Scholes pricing framework. Every derivative calculation—whether for options, futures, or structured products—requires evaluating these terms as inputs to the standard normal CDF. Understanding their structure helps practitioners diagnose pricing anomalies and recognize when model adjustments may be necessary.\n\nThe $d_{1}$ term directly yields the option's delta: $\\Delta=N(d_{1})$ for calls and $\\Delta=N(d_{1})-1$ for puts. This relationship enables real-time hedging calculations as market prices change. The delta's accuracy depends on the accuracy of $d_{1}$, which in turn depends on correctly estimating volatility $\\sigma$. Small errors in volatility estimates propagate through $d_{1}$ and into delta calculations.\n\nThe $d_{2}$ term governs the probability of exercise: $N(d_{2})$ is the exact risk-neutral exercise probability. Traders use this probability to assess whether options are appropriately priced relative to their statistical exercise likelihood. When market prices imply exercise probabilities that differ significantly from model predictions, relative value opportunities may emerge.\n\nThe difference $d_{1}-d_{2}=\\sigma\\sqrt{T}$ provides insight into the option's time value and convexity. Larger differences (higher volatility or longer time) indicate greater convexity value. This relationship helps explain why out-of-the-money options with long maturities can be expensive despite having low intrinsic value—they derive substantial value from convexity."}
{"title": "Binomial Tree Option Pricing (CRR)", "equation": "C = \\frac{p \\cdot C_u + (1-p) \\cdot C_d}{r}", "category": "Options", "tags": ["binomial-tree", "cox-ross-rubinstein", "crr", "discrete-time", "recombining", "risk-neutral-probability", "numerical-method", "early-exercise", "american-options"], "note": "## Equation Variables\nThe Cox–Ross–Rubinstein (CRR) binomial tree model provides a discrete-time framework for pricing options by approximating the continuous-time Black–Scholes dynamics through a recombinant tree structure. This single-period formulation forms the building block for multi-period models that can accommodate American early exercise features.\n\n- **$C$**: The option price at time $t=0$, derived from the risk-neutral expected discounted payoff across all possible price paths in the tree.\n- **$C_{u}$**: The option value in the \"up\" state, where the underlying price has increased to $S_{0}u$. This value is computed as $\\max(S_{0}u-K,0)$ for calls or $\\max(K-S_{0}u,0)$ for puts.\n- **$C_{d}$**: The option value in the \"down\" state, where the underlying price has decreased to $S_{0}d$. Similarly computed as $\\max(S_{0}d-K,0)$ for calls or $\\max(K-S_{0}d,0)$ for puts.\n- **$p$**: The risk-neutral up probability, which makes the expected return on the stock equal to the risk-free rate under the risk-neutral measure:\n  $$p=\\frac{r-d}{u-d}$$\n- **$1-p$**: The risk-neutral down probability, representing the probability of the down state under the risk-neutral measure.\n- **$u$**: The up factor multiplying the spot price in the up state. In the CRR specification, $u=e^{\\sigma\\sqrt{\\Delta t}}$, ensuring the tree's recombinant property.\n- **$d$**: The down factor in the CRR specification, set to $d=1/u=e^{-\\sigma\\sqrt{\\Delta t}}$, which ensures symmetry and the tree's recombinant nature.\n- **$r$**: The per-period risk-free return factor, typically $r=e^{r_{f}\\Delta t}$ for continuous compounding or $1+r_{f}\\Delta t$ for discrete compounding.\n- **$\\Delta t$**: The time step size, equal to $T/n$ for an $n$-period tree spanning time $T$ to expiration.\n- **$\\sigma$**: The annualized volatility of the underlying asset's returns, used to construct the up and down factors.\n\n## Interpretation\nThe binomial model provides an intuitive, pathwise interpretation of option pricing that complements the closed-form Black–Scholes solution. The option price represents the expected discounted payoff under the risk-neutral measure, where expectations are taken over all possible price paths. In this single-period case, there are exactly two paths: an up movement followed by either exercise or expiration without exercise, and a down movement with similar possibilities.\n\nThe risk-neutral probability $p=(r-d)/(u-d)$ is the key insight that enables arbitrage-free pricing in discrete time. Unlike physical probabilities that reflect investor risk preferences, the risk-neutral probability is chosen specifically to make the expected return on the stock equal to the risk-free rate. This \"probability adjustment\" replaces the complex risk premium calculations of continuous-time finance with a simple algebraic formula.\n\nThe CRR specification $u=e^{\\sigma\\sqrt{\\Delta t}}$ and $d=1/u$ ensures that the tree is recombinant, meaning that an up movement followed by a down movement leads to the same price as a down movement followed by an up movement. This recombination dramatically reduces the number of nodes from $2^{n}$ to $(n+1)(n+2)/2$ for an $n$-period tree, making computations tractable while maintaining accuracy.\n\nThe ratio $u/d=1$ in the CRR specification creates symmetric price movements in log-space, which matches the lognormal distribution assumption of the Black–Scholes model. As the number of periods increases and $\\Delta t\\rightarrow 0$, the binomial distribution of prices converges to the lognormal distribution, and the binomial option price converges to the Black–Scholes price.\n\n## Assumptions\nThe binomial model relaxes some Black–Scholes assumptions while introducing its own framework requirements:\n\n1. **Discrete Trading**: Prices can only change at discrete time intervals $\\Delta t$, not continuously. This discrete-time structure enables backward induction but introduces discretization error.\n\n2. **Lognormal Approximation**: The up and down factors are calibrated to match the first two moments of the lognormal distribution, approximating the continuous-time price dynamics.\n\n3. **No Arbitrage**: The risk-neutral probability ensures that no risk-free profits can be extracted from the tree structure.\n\n4. **Constant Parameters**: Volatility $\\sigma$ and risk-free rate $r$ remain constant throughout each time step, though they can vary across steps in extended models.\n\n5. **Perfect Markets**: No transaction costs, taxes, or liquidity constraints affect price movements or option exercise.\n\n6. **Recursive Valuation**: Option values are computed through backward induction from expiration to present, with American options checked for early exercise at each node.\n\n## Practical Use\nThe binomial model serves as the primary method for pricing American options, compound options, and path-dependent derivatives that cannot be handled by closed-form Black–Scholes formulas. By checking for early exercise at each node, the binomial framework captures the premium associated with American exercise features that European options lack.\n\nIn practice, traders and risk managers use binomial trees with 100-500 periods for accurate pricing, as this provides sufficient resolution to approximate the continuous Black–Scholes limit while maintaining computational efficiency. The tree structure also provides insight into how option values evolve across different price scenarios, supporting scenario analysis and stress testing.\n\nThe binomial framework extends naturally to handle dividends (through adjusted forward prices), stochastic volatility (through regime-dependent parameters), and interest rate term structure (through time-varying discount factors). These extensions make binomial trees versatile tools for pricing complex derivatives that violate Black–Scholes assumptions."}
{"title": "Black-Scholes Call Delta", "equation": "\\Delta_{call} = N(d_1)", "category": "Options", "tags": ["black-scholes", "delta", "greeks", "first-derivative", "hedge-ratio", "risk-neutral", "probability", "dynamic-hedging", "sensitivity-analysis"], "note": "## Equation Variables\nThe Black–Scholes delta represents the first derivative of the option price with respect to the underlying asset price, capturing the instantaneous rate of change and serving as the fundamental hedge ratio for risk management. This single-period sensitivity provides the foundation for dynamic hedging strategies that attempt to isolate option returns from underlying price movements.\n\n- **$\\Delta_{call}$**: The call option's sensitivity to changes in the underlying price, defined mathematically as $\\partial C/\\partial S_{0}$. This Greek measures how much the option price changes for a small change in the underlying price.\n- **$N(d_{1})$**: The standard normal cumulative distribution function evaluated at the $d_{1}$ composite term from the Black–Scholes pricing formula. This transforms the standardized distance to strike into a probability-equivalent value.\n- **$d_{1}$**: The composite term defined as:\n  $$d_{1}=\\frac{\\ln(S_{0}/K)+(r+\\sigma^{2}/2)T}{\\sigma\\sqrt{T}}$$\n  which captures the log-moneyness, risk-adjusted drift, and volatility scaling.\n- **$S_{0}$**: The current spot price of the underlying asset, serving as the base price for sensitivity calculations.\n- **$K$**: The strike price, defining the exercise level and intrinsic value threshold for the option.\n- **$r$**: The continuously compounded risk-free interest rate, influencing the drift component of $d_{1}$.\n- **$T$**: The time to maturity in years, affecting both the magnitude of $d_{1}$ and its rate of change.\n- **$\\sigma$**: The annualized volatility, which along with time determines the uncertainty in the underlying price.\n\n## Interpretation\nThe call delta has multiple equivalent interpretations that provide intuition for its practical application. Most directly, $\\Delta_{call}=N(d_{1})$ represents the hedge ratio needed to create a locally risk-free portfolio. If you sell one call option and purchase $N(d_{1})$ shares of the underlying, the portfolio's value becomes insensitive to small price changes in either direction—at least instantaneously.\n\nThe delta also represents an approximate probability. Under the risk-neutral measure, $N(d_{1})$ is approximately equal to the probability that the option will expire in-the-money, adjusted for the present value of expected dividends. This probability interpretation explains why delta ranges from 0 to 1 for call options: deep out-of-the-money calls have delta near 0 (low exercise probability), while deep in-the-money calls have delta near 1 (high exercise probability).\n\nFor at-the-money options where $S_{0}\\approx K$, the delta is approximately 0.5, reflecting the roughly equal probability of finishing in-the-money versus out-of-the-money. This 50% probability assumes no dividends and that the risk-free rate is negligible compared to the drift adjustment.\n\nThe delta's behavior over time provides crucial insight into option dynamics. As expiration approaches, at-the-money deltas move rapidly toward 0.5 (if remaining near ATM) or toward 0/1 (if moving ITM or OTM). This \"gamma acceleration\" near expiration creates hedging challenges because small price movements cause large delta changes, requiring frequent rebalancing.\n\n## Assumptions\nThe delta formula inherits all assumptions from the Black–Scholes framework, with additional considerations for the sensitivity analysis:\n\n1. **Continuous Differentiability**: The option price function must be continuously differentiable with respect to the underlying price, which holds under Black–Scholes dynamics.\n\n2. **No Jumps**: Price movements are continuous, ensuring delta provides accurate sensitivity for infinitesimal price changes. Jump processes would require different sensitivity measures.\n\n3. **Constant Volatility**: Volatility $\\sigma$ is constant, so delta changes only through price and time movements.\n\n4. **European Exercise**: No early exercise features complicate the delta calculation with optionality beyond the underlying price sensitivity.\n\n5. **No Dividends**: The derivation assumes no dividends during the option's life; dividend-paying options require adjusted delta formulas.\n\n## Practical Use\nDelta serves as the primary risk metric for options traders and portfolio managers engaged in dynamic hedging strategies. Market makers quote delta alongside prices, and traders use delta to manage their exposure to underlying price movements. The goal of delta hedging is to isolate the option's time value and volatility exposure from its directional exposure.\n\nIn practice, delta hedging involves maintaining a delta-neutral portfolio by adjusting the quantity of underlying held as prices change. For a short call position, this means buying shares as prices rise and selling as prices fall. The profit or loss from these hedging transactions, combined with the option premium received, determines the overall trading P&L.\n\nDelta also enables position sizing and risk budgeting. A trader wanting exposure equivalent to 100 shares of stock could buy 100/$\\Delta$ call options (for ATM calls, approximately 200 options). This leverage is why options are attractive for capital-efficient position establishment.\n\nThe delta-gamma relationship ($\\Gamma=\\partial\\Delta/\\partial S_{0}$) helps traders anticipate how delta will change as prices move. High-gamma positions require more frequent rebalancing, increasing transaction costs and potentially eroding the benefits of dynamic hedging."}
{"title": "Black-Scholes Put Delta", "equation": "\\Delta_{put} = N(d_1) - 1", "category": "Options", "tags": ["black-scholes", "put-delta", "greeks", "hedge-ratio", "risk-neutral", "short-position", "protective-put", "sensitivity", "negative-delta"], "note": "## Equation Variables\nThe put delta represents the sensitivity of a put option's price to changes in the underlying asset's price, capturing the fundamental difference in directional exposure between long put and long call positions. While calls benefit from price increases, puts benefit from price decreases, resulting in negative delta values that reflect this inverse relationship.\n\n- **$\\Delta_{put}$**: The put option's price sensitivity to underlying price changes, defined as $\\partial P/\\partial S_{0}$. Unlike call delta, put delta is always negative because put prices move inversely to the underlying price.\n- **$N(d_{1})$**: The standard normal CDF evaluated at the $d_{1}$ composite term, which for puts serves as the starting point for the sensitivity calculation.\n- **$d_{1}$**: The standard Black–Scholes composite term:\n  $$d_{1}=\\frac{\\ln(S_{0}/K)+(r+\\sigma^{2}/2)T}{\\sigma\\sqrt{T}}$$\n  that captures the option's moneyness and volatility characteristics.\n- **$S_{0}$**: The current spot price, which inversely affects put value: as prices rise, puts become less valuable, and vice versa.\n- **$K$**: The strike price, with the put's intrinsic value increasing as $S_{0}$ falls below $K$.\n- **$r$**: The risk-free rate, which affects the present value of the strike and the drift component of $d_{1}$.\n- **$T$**: Time to expiration, influencing the option's time value and moneyness dynamics.\n- **$\\sigma$**: Volatility, which increases put value by increasing the probability of large downward price movements.\n\n## Interpretation\nThe put delta formula $\\Delta_{put}=N(d_{1})-1$ can be understood through the put-call delta relationship and the economic asymmetry between long and short positions in the underlying. For every call option, a corresponding put with the same strike and expiration has a delta exactly one unit lower than the call's delta.\n\nThis relationship emerges from put-call parity. Consider a portfolio long one call and short one put with the same strike: the combined position has delta $N(d_{1})-(N(d_{1})-1)=1$, equivalent to being long one share. The put's negative delta reflects this short-equity exposure.\n\nThe delta range for puts is (-1, 0), contrasting with calls' (0, 1) range. Deep out-of-the-money puts (low $S_{0}/K$) have deltas near 0, as small price changes barely affect the already-small probability of exercise. Deep in-the-money puts (high $S_{0}/K$) have deltas near -1, as the put behaves almost like a short stock position.\n\nAt-the-money puts have deltas near -0.5, reflecting the roughly equal probability of finishing in-the-money versus out-of-the-money, with the negative sign indicating the inverse price relationship. The symmetry with at-the-money calls ($\\Delta_{call}\\approx 0.5$) demonstrates the fundamental put-call relationship in option pricing.\n\n## Assumptions\nThe put delta formula maintains the same Black–Scholes assumptions while incorporating the specific characteristics of put options:\n\n1. **European Exercise**: Put can only be exercised at expiration, eliminating American early exercise features.\n\n2. **No Dividends**: Assumes no dividend payments during the option's life that would affect the forward price and delta.\n\n3. **Lognormal Dynamics**: Underlying follows geometric Brownian motion with constant parameters.\n\n4. **Continuous Trading**: Delta is defined for infinitesimal price changes, requiring continuous price paths.\n\n5. **Constant Volatility**: No stochastic volatility or volatility surface complications.\n\n## Practical Use\nPut delta is essential for constructing protective put strategies and managing downside exposure. An investor holding 100 shares who wants protection against a 10% market decline could purchase put options with delta approximately -0.1 per share, requiring 1,000 put options to hedge the position effectively.\n\nPortfolio managers use put delta to measure and manage tail risk exposure. A portfolio with aggregate put delta of -5% means the portfolio benefits from market declines (positive P&L when prices fall) and is hurt by market rallies (negative P&L when prices rise). This negative delta exposure provides insurance against adverse market movements.\n\nTraders constructing delta-neutral portfolios must account for put delta's negative sign. Combining long puts with long calls, short puts with short calls, or balancing puts against underlying positions requires careful attention to the directional signs of each delta component.\n\nThe relationship $\\Delta_{put}=\\Delta_{call}-1$ provides a practical check for position Greeks. Any apparent discrepancy between put and call deltas for the same strike and expiration indicates an error in calculation or market data."}
{"title": "Black-Scholes Gamma", "equation": "\\Gamma = \\frac{N'(d_1)}{S_0 \\sigma \\sqrt{T}}", "category": "Options", "tags": ["black-scholes", "gamma", "greeks", "second-derivative", "curvature", "convexity", "delta-gamma-hedging", "acceleration", "sensitivity"], "note": "## Equation Variables\nThe Black–Scholes gamma represents the second derivative of the option price with respect to the underlying asset price, measuring the rate of change of delta and capturing the option's curvature or convexity. This second-order Greek is critical for understanding how delta changes as the underlying price moves and for managing the risks of dynamic hedging strategies.\n\n- **$\\Gamma$**: The gamma value representing $\\partial^{2}C/\\partial S_{0}^{2}$, which measures how much delta changes for a one-unit change in the underlying price. Gamma is the same for calls and puts due to the linear relationship between their deltas.\n- **$N'(d_{1})$**: The standard normal probability density function evaluated at $d_{1}$, defined as $N'(x)=\\frac{1}{\\sqrt{2\\pi}}e^{-x^{2}/2}$. This term captures the shape of the normal distribution at the option's moneyness point.\n- **$S_{0}$**: The current spot price of the underlying asset, appearing in the denominator to scale the gamma appropriately.\n- **$\\sigma$**: The annualized volatility, which influences the width of the price distribution and thus the curvature of option values.\n- **$T$**: The time to maturity in years, with $\\sqrt{T}$ appearing in the denominator to reflect how uncertainty accumulates with time.\n- **$d_{1}$**: The standard Black–Scholes composite term that determines the option's moneyness and the location of the probability density.\n\n## Interpretation\nGamma measures the convexity of the option's value curve with respect to the underlying price. A high gamma means that delta changes rapidly as prices move, requiring frequent rebalancing of delta-hedged portfolios. Conversely, low gamma indicates that delta remains relatively stable, reducing hedging transaction costs.\n\nThe normal PDF $N'(d_{1})$ is maximized at $d_{1}=0$ (at-the-money) and decreases as $d_{1}$ moves away from zero (into or out-of-the-money). This mathematical property explains the familiar gamma pattern: gamma is highest for at-the-money options and lowest for deep in-the-money or out-of-the-money options.\n\nThe denominator $S_{0}\\sigma\\sqrt{T}$ reveals how gamma scales with market conditions. Higher volatility reduces gamma by spreading the probability mass more widely, making delta change more gradually. Longer time to expiration similarly reduces gamma by allowing more time for prices to move before delta stabilizes. Lower spot prices increase gamma proportionally, though this is typically offset by lower absolute option prices.\n\nGamma is always positive for long option positions, reflecting the convexity benefit of holding options. Short option positions have negative gamma, meaning the position becomes more exposed as prices move away from the strike. This gamma exposure is the source of \"gamma risk\" that can cause large losses for improperly hedged portfolios during volatile periods.\n\n## Assumptions\nGamma calculations inherit Black–Scholes assumptions with specific implications for second-order sensitivity:\n\n1. **Smooth Price Function**: The option price must be twice continuously differentiable with respect to the underlying, requiring continuous price paths without jumps.\n\n2. **No Discontinuities**: At-the-money gamma spikes near expiration, but the formula assumes smooth behavior that may not capture extreme near-expiry dynamics.\n\n3. **Constant Volatility**: Gamma is calculated for a specific volatility level; stochastic volatility requires gamma calculations conditional on volatility states.\n\n4. **European Exercise**: American options may have different gamma behavior near expiration due to early exercise considerations.\n\n## Practical Use\nGamma is the primary metric for managing delta-hedging costs and understanding portfolio convexity. Traders monitor gamma exposure closely because large gamma positions require frequent rebalancing, generating transaction costs that eat into returns.\n\nAt expiration, at-the-money gamma becomes extremely large as tiny price movements cause delta to swing from -0.5 to +0.5 (for straddles) or from near-zero to near-one (for single-sided positions). This \"gamma squeeze\" creates trading opportunities for market makers who can manage the rebalancing efficiently.\n\nPortfolio gamma calculations aggregate gamma across all positions. A portfolio with net positive gamma benefits from price volatility (gains from delta changes exceed hedging losses), while net negative gamma suffers from volatility (hedging losses exceed delta change gains). This relationship is the foundation of gamma trading strategies that attempt to profit from volatility regardless of price direction.\n\nThe gamma-theta tradeoff is central to options market making. High-gamma positions (typically short-dated, at-the-money options) earn theta (time decay) but risk large losses if prices move significantly. Market makers must balance these exposures to maintain profitability across various market scenarios."}
{"title": "Black-Scholes Vega", "equation": "\\nu = S_0 N'(d_1) \\sqrt{T}", "category": "Options", "tags": ["black-scholes", "vega", "greeks", "volatility-sensitivity", "vanna", "volatility-trading", "implied-volatility", "second-order", "risk-metric"], "note": "## Equation Variables\nVega represents the sensitivity of an option's price to changes in the implied volatility of the underlying asset. This critical Greek measures how much the option value changes for a one-percentage-point change in volatility, making it the primary risk metric for volatility exposure and the foundation of volatility trading strategies.\n\n- **$\\nu$ (vega)**: The volatility sensitivity defined as $\\partial C/\\partial\\sigma$, representing the option price change for a 0.01 (1 percentage point) change in annualized volatility. Vega is always positive for long option positions.\n- **$S_{0}$**: The current spot price of the underlying asset, which scales vega proportionally to the level of the underlying.\n- **$N'(d_{1})$**: The standard normal probability density function evaluated at $d_{1}$, which is maximized when $d_{1}=0$ (at-the-money) and decreases as the option moves ITM or OTM.\n- **$\\sqrt{T}$**: The square root of time to expiration, showing how vega increases with the uncertainty accumulation from longer time horizons.\n- **$d_{1}$**: The standard Black–Scholes composite term:\n  $$d_{1}=\\frac{\\ln(S_{0}/K)+(r+\\sigma^{2}/2)T}{\\sigma\\sqrt{T}}$$\n  that determines the location of the probability density.\n- **$\\sigma$**: The current (or baseline) annualized volatility, which appears implicitly in $d_{1}$ and determines the distribution's spread.\n- **$T$**: Time to expiration in years, reflecting the duration over which volatility can impact the option's payoff.\n\n## Interpretation\nVega measures the time value component of option pricing that arises from uncertainty about future price movements. Higher volatility increases the probability of both large gains and large losses, but because option payoffs are asymmetric (limited downside, unlimited upside), the expected value to long option holders increases with volatility.\n\nThe normal PDF $N'(d_{1})$ ensures vega follows the familiar pattern: maximum at-the-money (where $d_{1}\\approx 0$) and decreasing as options move ITM or OTM. This occurs because at-the-money options derive the most value from volatility—their payoff can swing dramatically in either direction. Deep ITM options behave more like the underlying, and deep OTM options have low probability of any payoff regardless of volatility.\n\nThe $\\sqrt{T}$ scaling reflects how volatility exposure accumulates over time. Longer-dated options have more time for price uncertainty to manifest, increasing their vega. However, vega per unit time ($\\nu/T$) actually decreases with maturity, meaning shorter-dated options have more vega per day of life.\n\nVega is symmetric between calls and puts due to put-call parity. Long a call and long a put with the same strike and expiration have the same vega exposure because both derive value from the same volatility of the underlying. This symmetry enables pure volatility positions through combinations of calls and puts.\n\n## Assumptions\nVega calculations depend on Black–Scholes assumptions with particular sensitivity to volatility modeling:\n\n1. **Lognormal Distribution**: Vega assumes prices follow a lognormal distribution; different return distributions would alter vega's relationship to strike and expiration.\n\n2. **Deterministic Volatility**: The formula treats volatility as a parameter, not a stochastic process. Stochastic volatility models require conditional vega calculations.\n\n3. **Constant Volatility**: Vega is calculated at a specific volatility level; the actual sensitivity to changes in volatility may vary with the volatility level itself (volga effect).\n\n4. **No Jumps**: Continuous price paths ensure vega represents true volatility exposure; jump processes would require additional sensitivity measures.\n\n## Practical Use\nVega is the cornerstone of volatility trading and risk management. Traders use vega to measure their exposure to volatility changes, construct volatility-neutral portfolios, and price new options relative to existing ones. The goal of many options strategies is to isolate and profit from volatility exposure rather than directional price movements.\n\nPortfolio vega aggregates across all positions: $\\nu_{portfolio}=\\sum w_{i}\\nu_{i}$. A portfolio with positive vega benefits from increased volatility (option prices rise), while negative vega benefits from decreased volatility (option prices fall). Volatility traders aim to be right about future volatility levels rather than price directions.\n\nThe vega-gamma relationship helps explain why near-term options have disproportionately high vega relative to their prices. These \"high-leverage\" vega positions attract speculative traders seeking efficient volatility exposure, while market makers must manage the corresponding gamma risk.\n\nVega also enables relative value analysis across strikes and expirations. When implied volatilities differ across strikes (volatility skew) or expirations (term structure), traders compare actual vega-weighted vol levels to identify overpriced or underpriced options."}
{"title": "Black-Scholes Call Theta", "equation": "\\Theta_{call} = -\\frac{S_0 N'(d_1) \\sigma}{2\\sqrt{T}} - r K e^{-rT} N(d_2)", "category": "Options", "tags": ["black-scholes", "theta", "greeks", "time-decay", "daily-decay", "theta-risk", "time-value", "negative-greek", "decay-rate"], "note": "## Equation Variables\nTheta represents the rate of time decay in an option's price, measuring how much value the option loses each day as expiration approaches. This Greek is essential for understanding the cost of holding options over time and for strategies that seek to profit from time decay through premium selling approaches.\n\n- **$\\Theta_{call}$**: The call option's time decay rate, defined as $-\\partial C/\\partial T$. By convention, theta is usually quoted as the daily decay (option loses $\\Theta$ per day), so practitioners often divide by 365.\n- **$S_{0}$**: The current spot price of the underlying asset, appearing in the first term to scale the decay contribution from the underlying's volatility-driven value.\n- **$N'(d_{1})$**: The standard normal probability density at $d_{1}$, which captures the option's moneyness-dependent contribution to time decay.\n- **$\\sigma$**: The annualized volatility, representing the magnitude of price uncertainty that contributes to the option's time value through potential future price movements.\n- **$\\sqrt{T}$**: The square root of time to expiration, appearing in the denominator to scale the volatility contribution appropriately.\n- **$r$**: The continuously compounded risk-free interest rate, which affects the present value of the strike payment and appears in the second term.\n- **$K$**: The strike price, whose present value contributes to the option's time decay through the interest cost of the deferred payment.\n- **$e^{-rT}$**: The continuous discount factor that brings the strike payment to present value.\n- **$N(d_{2})$**: The risk-neutral exercise probability, which along with the strike determines the present value of the contingent payment.\n- **$d_{1}, d_{2}$**: The standard Black–Scholes composite terms defining moneyness and exercise probability.\n\n## Interpretation\nTheta captures the erosion of an option's time value as expiration approaches. This decay occurs because the window for favorable price movements narrows, reducing the probability of large payoffs while maintaining the same limited downside (the premium already paid).\n\nThe first term, $-\\frac{S_{0}N'(d_{1})\\sigma}{2\\sqrt{T}}$, represents the volatility component of time decay. This component is always negative because the potential for future price movements (the source of option value) diminishes as time passes. At-the-money options have maximum $N'(d_{1})$, maximizing this decay component.\n\nThe second term, $-rK e^{-rT}N(d_{2})$, represents the interest cost of deferring the strike payment. When you buy a call option rather than the stock, you defer paying the strike price, saving the interest you could have earned on that money. This \"interest benefit\" diminishes as expiration approaches, creating negative theta.\n\nFor at-the-money options near expiration, theta becomes extremely large in magnitude. A one-day change in a near-term ATM option can cause significant price changes, creating both opportunities and risks for traders. Short-dated options are often called \"theta burn\" positions because they lose value rapidly.\n\nThe put theta formula is similar but includes an additional positive term: $\\Theta_{put}=\\Theta_{call}+rK e^{-rT}N(d_{2})+rK e^{-rT}N(-d_{2})$. This reflects that puts benefit from high interest rates (you receive the strike payment earlier) while calls suffer from them.\n\n## Assumptions\nTheta calculations depend on Black–Scholes assumptions with specific implications for time decay:\n\n1. **Continuous Time**: Theta assumes time passes continuously, while actual decay occurs in discrete daily increments. The daily theta is approximately $\\Theta/365$.\n\n2. **Constant Volatility**: Theta is calculated at current volatility; actual decay depends on realized volatility versus implied.\n\n3. **No Early Exercise**: European options cannot be exercised early, so theta reflects only time value decay, not early exercise value.\n\n4. **Smooth Decay**: The formula assumes smooth decay; actual decay may exhibit discontinuities around ex-dividend dates or corporate events.\n\n## Practical Use\nTheta is the primary metric for income-focused option strategies that seek to profit from time decay. Covered call sellers, naked put sellers, and iron condor traders all benefit from theta—the options they sell decay toward zero over time, generating profit if prices remain stable.\n\nPosition theta aggregations help traders understand whether their portfolio benefits from time passing (positive theta) or loses value over time (negative theta). Most option sellers have positive theta positions and are hurt by large price moves that overwhelm decay profits.\n\nThe theta-gamma tradeoff is fundamental to options market making. Positions with large negative theta (long options) typically have large positive gamma, meaning they benefit from volatility. Positions with large positive theta (short options) have negative gamma, meaning they are hurt by volatility. This relationship constrains the possible risk-return profiles in options markets.\n\nTheta decay accelerates exponentially near expiration. For at-the-money options within one week of expiration, daily theta can exceed 10% of the option's value. This \"last week\" behavior requires careful management by traders holding short-dated option positions."}
{"title": "Black-Scholes Call Rho", "equation": "\\rho_{call} = K T e^{-rT} N(d_2)", "category": "Options", "tags": ["black-scholes", "rho", "greeks", "interest-rate-sensitivity", "rate-risk", "discount-factor", "carry-cost", "yield-sensitive", "macro-hedging"], "note": "## Equation Variables\nRho measures the sensitivity of an option's price to changes in the risk-free interest rate, capturing how the cost of financing affects option values. This Greek is particularly important for longer-dated options and in environments with significant interest rate movements, though it is typically less impactful than delta, gamma, or vega for short-term trading.\n\n- **$\\rho_{call}$**: The call option's interest rate sensitivity, defined as $\\partial C/\\partial r$, representing the option price change for a 0.01 (1 percentage point) increase in the risk-free rate.\n- **$K$**: The strike price of the option, which determines the present value of the payment that call buyers defer by holding options instead of the stock.\n- **$T$**: The time to maturity in years, scaling the interest rate effect proportionally to the duration of the deferral.\n- **$e^{-rT}$**: The continuous discount factor that brings the strike payment to present value; this factor depends on the interest rate $r$.\n- **$N(d_{2})$**: The risk-neutral exercise probability, which determines the expected value of the strike payment under the risk-neutral measure.\n- **$d_{2}$**: The standard Black–Scholes composite term:\n  $$d_{2}=d_{1}-\\sigma\\sqrt{T}$$\n  that incorporates moneyness, drift, and volatility into the exercise probability.\n- **$r$**: The continuously compounded risk-free interest rate, the parameter to which rho measures sensitivity.\n- **$S_{0}$**: The current spot price (does not appear directly in the call rho formula, distinguishing it from put rho).\n\n## Interpretation\nRho captures the opportunity cost of deferring payment for the underlying asset. When you buy a call option instead of the stock, you defer paying the strike price $K$ until (and only if) you exercise at expiration. The present value of this deferred payment depends on the interest rate: higher rates mean lower present value, which benefits call holders.\n\nThe formula $\\rho_{call}=K T e^{-rT} N(d_{2})$ shows that call rho is always positive. Higher interest rates increase call values because they reduce the present value of the strike payment more than they increase the discount rate applied to expected stock returns. This is intuitive: borrowing money to buy stock costs more at high rates, making the limited-liability call option relatively more attractive.\n\nThe $N(d_{2})$ factor adjusts rho for the probability of exercise. At-the-money options ($d_{2}\\approx 0$) have $N(d_{2})\\approx 0.5$, meaning only half the interest benefit is realized on average. Deep ITM options have $N(d_{2})\\approx 1$, capturing the full interest benefit, while deep OTM options have $N(d_{2})\\approx 0$, with minimal rho exposure.\n\nThe $T$ scaling shows that longer-dated options are more sensitive to interest rates. A two-year option defers the strike payment twice as long as a one-year option, doubling the interest rate effect. This makes rho particularly relevant for LEAPS (Long-Term Equity Anticipation Securities) and other long-dated options.\n\n## Assumptions\nRho calculations depend on specific assumptions about interest rate modeling:\n\n1. **Flat Term Structure**: The formula assumes a single risk-free rate applicable to all maturities, ignoring the yield curve shape.\n\n2. **Constant Rates**: Rho is calculated for a specific rate level; actual sensitivity may vary with the rate level itself.\n\n3. **No Rate Uncertainty**: Deterministic interest rates simplify the calculation; stochastic rate models require extended Greeks.\n\n4. **Continuous Compounding**: The use of continuous compounding affects the functional form; discrete compounding would require adjustment.\n\n## Practical Use\nRho is relevant for macro-sensitive trading strategies and long-dated option positions where interest rate movements can significantly impact returns. During periods of monetary policy changes or yield curve shifts, rho exposure becomes more material for option portfolios.\n\nPortfolio rho aggregation helps measure aggregate interest rate sensitivity. A portfolio with positive rho benefits from rising rates, while negative rho (typical of long puts) benefits from falling rates. This exposure can be hedged using interest rate derivatives or by adjusting option position durations.\n\nFor LEAPS and long-dated options, rho can represent 10-20% of total option value, making it a meaningful factor in pricing and hedging decisions. Traders must consider not just the underlying price and volatility but also the interest rate environment when evaluating these positions.\n\nCurrency options and cross-currency products involve multiple interest rates (domestic and foreign), requiring modified rho calculations that account for the rate differential between currencies. These \"quanto adjustments\" add complexity to international derivatives pricing."}
{"title": "Implied Volatility Newton-Raphson", "equation": "\\sigma_{n+1} = \\sigma_n - \\frac{C(\\sigma_n) - C_{mkt}}{\\nu(\\sigma_n)}", "category": "Options", "tags": ["implied-volatility", "newton-raphson", "numerical-root-finding", "volatility-surface", "iteration", "calibration", "greeks", "inverse-problem"], "note": "## Equation Variables\nThe Newton–Raphson method for implied volatility calculates the volatility level that, when plugged into the Black–Scholes formula, produces the observed market price of an option. This numerical root-finding technique is the workhorse algorithm for volatility surface construction and options market analysis.\n\n- **$\\sigma_{n}$**: The current iteration's volatility estimate, initialized from historical volatility, ATM implied vol, or other reasonable guess.\n- **$\\sigma_{n+1}$**: The updated volatility estimate after applying the Newton–Raphson correction.\n- **$C(\\sigma_{n})$**: The Black–Scholes call price evaluated at the current volatility estimate $\\sigma_{n}$. This represents the theoretical price if the market's implied volatility equals the current estimate.\n- **$C_{mkt}$**: The observed market price of the call option, typically the mid-point of bid-ask quotes or the last traded price.\n- **$\\nu(\\sigma_{n})$**: The vega of the option evaluated at $\\sigma_{n}$, representing how much the option price changes per unit change in volatility:\n  $$\\nu=S_{0}N'(d_{1})\\sqrt{T}$$\n- **$d_{1}$**: The standard Black–Scholes composite term evaluated at $\\sigma_{n}$.\n- **$S_{0}$**: The current spot price of the underlying asset.\n- **$T$**: The time to expiration in years.\n- **$N'(d_{1})$**: The standard normal probability density function.\n\n## Interpretation\nThe Newton–Raphson formula solves the equation $C(\\sigma)=C_{mkt}$ for $\\sigma$ by iteratively improving volatility estimates. The correction term $(C(\\sigma_{n})-C_{mkt})/\\nu(\\sigma_{n})$ represents the pricing error divided by the sensitivity to volatility, which indicates how much to adjust the volatility estimate to reduce the error.\n\nIf $C(\\sigma_{n}) > C_{mkt}$, the current estimate is too high (produces too high a price), so the next estimate should be lower by the error scaled by vega. Similarly, if $C(\\sigma_{n}) < C_{mkt}$, the estimate needs to increase. This binary adjustment continues until the pricing error falls below a tolerance threshold (typically $0.01 or less).\n\nThe method converges quickly—often within 3-5 iterations—when starting from a reasonable initial guess and when vega is not near zero. Convergence is quadratic near the root, meaning the number of correct digits approximately doubles each iteration.\n\nHowever, Newton–Raphson can fail or become unstable when vega is small (deep ITM or OTM options) or when the initial guess is poor. In these cases, alternative methods like bisection provide more robust convergence at the cost of slower speed.\n\n## Assumptions\nThe Newton–Raphson method for implied volatility assumes:\n\n1. **Monotonic Pricing**: The Black–Scholes price is monotonic in volatility, so each market price corresponds to at most one implied volatility. This holds for European options under standard assumptions.\n\n2. **Positive Vega**: Vega is positive, ensuring the derivative exists and the correction term is well-defined. Vega approaches zero at extreme moneyness, causing numerical issues.\n\n3. **Arbitrage-Free Prices**: The market price must be within the theoretical no-arbitrage bounds (greater than intrinsic value, less than forward price for calls) for a valid solution to exist.\n\n4. **Constant Parameters**: Other Black–Schassis assumptions hold during the iteration; dividends, rates, and time are fixed.\n\n## Practical Use\nImplied volatility calculation is fundamental to options market analysis. Traders, risk managers, and quants use implied volatility to compare options across strikes and expirations, identify relative value opportunities, and construct volatility surfaces.\n\nThe Newton–Raphson algorithm is implemented in virtually all options pricing systems and electronic trading platforms. Modern implementations include safeguards for convergence failure, alternative methods (bisection, Brent's method) as fallbacks, and smoothing for noisy market prices.\n\nImplied volatility feeds into volatility trading strategies, where traders compare implied vol to historical realized vol or forward-looking volatility forecasts. Significant discrepancies may indicate overvalued or undervalued options, though transaction costs and other frictions must be considered.\n\nThe output from Newton–Raphson calibration—the implied volatility surface—supports pricing of illiquid options, risk management for option portfolios, and hedging decisions for exotic derivatives that reference vanilla option prices."}
{"title": "Black-Scholes Volga (Vega Convexity)", "equation": "Volga = \\frac{S_0 N'(d_1) d_1 d_2}{\\sigma}", "category": "Options", "tags": ["black-scholes", "volga", "vomma", "vega-convexity", "second-order-vega", "volatility-curvature", "greeks", "risk-metric", "sensitivity"], "note": "## Equation Variables\nVolga (also called Vomma) measures the second derivative of the option price with respect to volatility, capturing the curvature of option value with respect to changes in implied volatility. This second-order Greek helps traders understand how vega itself changes as volatility levels change, which is critical for managing volatility exposure in changing market conditions.\n\n- **Volga**: The volatility convexity defined as $\\partial^{2}C/\\partial\\sigma^{2}$, measuring how vega changes for a one-percentage-point change in volatility. Volga is always positive for long option positions.\n- **$S_{0}$**: The current spot price of the underlying asset, scaling volga proportionally to the level of the underlying.\n- **$N'(d_{1})$**: The standard normal probability density function at $d_{1}$, which is maximized at-the-money and decreases with moneyness.\n- **$d_{1}$ and $d_{2}$**: The standard Black–Scholes composite terms:\n  $$d_{1}=\\frac{\\ln(S_{0}/K)+(r+\\sigma^{2}/2)T}{\\sigma\\sqrt{T}}$$\n  $$d_{2}=d_{1}-\\sigma\\sqrt{T}$$\n- **$\\sigma$**: The current annualized volatility level, appearing in the denominator to scale the convexity measure.\n- **$T$**: Time to expiration, implicitly affecting volga through $d_{1}$ and $d_{2}$.\n\n## Interpretation\nVolga measures the rate of change of vega: as volatility changes, vega increases or decreases depending on the current volatility level and the option's moneyness. Positive volga means vega increases when volatility rises, creating a convex relationship between option value and volatility.\n\nThe product $d_{1}d_{2}$ determines volga's moneyness profile. For at-the-money options ($d_{1}\\approx 0$), $d_{1}d_{2}\\approx 0$, but the actual volga is not zero—it is maximized near ATM because $N'(d_{1})$ is largest there. The combination of $N'(d_{1})$ and $d_{1}d_{2}$ creates a volga curve that peaks near-the-money but not exactly at-the-money.\n\nThe sign of volga is always positive for long option positions. This means vega increases as volatility rises—options become more sensitive to volatility when volatility is already high. This positive convexity is valuable: long option positions benefit disproportionately from volatility spikes.\n\nShort option positions have negative volga, meaning their vega decreases as volatility rises. This creates a challenging dynamic for volatility sellers: they receive premium when volatility is high but become less hedged (lower vega) just when they most need protection against further volatility increases.\n\n## Assumptions\nVolga calculations depend on Black–Scholes assumptions with particular sensitivity to volatility dynamics:\n\n1. **Deterministic Volatility**: Volga treats volatility as a parameter for which we compute second-order sensitivity. Stochastic volatility models would require conditional volga calculations.\n\n2. **Smooth Sensitivity**: The formula assumes vega changes smoothly with volatility, which holds under Black–Scholes but may not hold in markets with jumps or regime changes.\n\n3. **No Volatility Smile**: Flat volatility surface assumptions ignore the relationship between moneyness and volga that exists in actual markets.\n\n4. **European Exercise**: American options may exhibit different volga behavior due to early exercise features.\n\n## Practical Use\nVolga is essential for understanding the dynamic behavior of vega exposure as market conditions change. Traders with large vega positions must monitor volga to anticipate how their exposure will evolve if volatility changes significantly.\n\nPortfolio volga aggregation helps measure second-order volatility exposure. A portfolio with positive volga benefits from volatility changes in either direction (as long as it remains long vol), while negative volga positions suffer when volatility changes significantly.\n\nDuring volatility regime changes—moving from calm to turbulent markets or vice versa—volga determines how quickly vega exposure changes. High-volga portfolios experience rapid vega increases during volatility spikes, potentially exceeding risk limits if not properly managed.\n\nVolga also affects the pricing of volatility derivatives and the hedging of options portfolios. The interaction between vega and volga must be considered when constructing hedges that will remain effective across different volatility scenarios."}
{"title": "Forward Price of Underlying", "equation": "F = S_0 e^{(r-q)T}", "category": "Options", "tags": ["forward-price", "cost-of-carry", "cash-and-carry", "arbitrage", "futures", "dividend-adjusted", "foreign-exchange", "carry-trade"], "note": "## Equation Variables\nThe forward price formula establishes the no-arbitrage relationship between the spot price of an asset and its forward price, accounting for the cost of carry including financing costs and any benefits from holding the asset (such as dividends or convenience yield). This fundamental relationship underpins derivatives pricing across all asset classes.\n\n- **$F$**: The forward price, representing the agreed-upon price for delivery of the underlying asset at time $T$ in a forward contract. This is a deterministic value determined by current market conditions.\n- **$S_{0}$**: The current spot price of the underlying asset, observable in the market today and serving as the starting point for the forward price calculation.\n- **$r$**: The continuously compounded risk-free interest rate, representing the cost of financing the spot purchase over the forward period.\n- **$q$**: The continuously compounded dividend yield (for equities) or foreign interest rate (for currencies), representing the benefit from holding the underlying asset.\n- **$T$**: The time to delivery in years, determining the duration over which carry costs and benefits accumulate.\n- **$e^{(r-q)T}$**: The net carry factor, growing the spot price at the net cost of carry rate $r-q$ over time $T$.\n\n## Interpretation\nThe forward price reflects the no-arbitrage relationship between spot and forward markets. If the forward price differed from $S_{0}e^{(r-q)T}$, arbitrageurs could execute cash-and-carry or reverse-cash-and-carry strategies to lock in risk-free profits until the forward expires.\n\nThe cash-and-carry arbitrage works as follows: if $F > S_{0}e^{(r-q)T}$, borrow money at rate $r$, buy the underlying at $S_{0}$, hold it while collecting dividends at rate $q$, and deliver into a forward contract at $F$. The profit is $F - S_{0}e^{(r-q)T}$ (less transaction costs). If $F < S_{0}e^{(r-q)T}$, reverse the strategy: sell short the underlying, invest the proceeds, and buy the forward to cover the short.\n\nThe net carry rate $r-q$ represents the cost of holding the underlying asset. For non-dividend-paying stocks, $q=0$, so the forward grows at the risk-free rate. For dividend-paying stocks, $q$ reduces the forward price because dividends offset financing costs. For currencies, $q$ is the foreign interest rate, making the forward depend on the interest rate differential between domestic and foreign currencies.\n\nThe forward price equals the expected future spot price under the risk-neutral measure: $F = \\mathbb{E}^{Q}[S_{T}]$. This follows from the martingale property of discounted asset prices under the risk-neutral measure. However, the forward is not a prediction of the actual future spot price—it is purely an arbitrage-free pricing relationship.\n\n## Assumptions\nThe forward price formula relies on several key assumptions about market structure and asset characteristics:\n\n1. **No Arbitrage**: The fundamental assumption underlying all derivative pricing; arbitrage opportunities are immediately exploited until prices equilibrate.\n\n2. **Constant Rates**: Risk-free rate and dividend yield are constant over the forward period, or their expected values are used for the calculation.\n\n3. **Known Income**: Dividends or other income are known with certainty (or their expected values are used). Stochastic income requires adjustment.\n\n4. **Perfect Markets**: No transaction costs, bid-ask spreads, taxes, or borrowing constraints. Continuous trading and perfect liquidity.\n\n5. **Cash Settlement**: The formula assumes delivery of the underlying; cash-settled derivatives may have slight adjustments.\n\n6. **No Storage Costs**: The basic formula assumes zero storage costs; commodities with storage require adding storage costs to the carry calculation.\n\n## Practical Use\nThe forward price is fundamental to derivatives pricing, hedging, and relative value analysis across all asset classes. Every forward contract, futures contract, and many option pricing formulas reference the forward price as a key input.\n\nIn interest rate markets, forward rates are derived from the yield curve and used to price interest rate swaps, caps, and floors. The forward rate represents the expected future borrowing rate under the no-arbitrage framework.\n\nIn currency markets, forward exchange rates incorporate interest rate differentials between currencies. This relationship is central to hedging international investments and understanding carry trade strategies that profit from interest rate differentials.\n\nFor equity derivatives, the forward price determines the relationship between option strikes and underlying prices. At-the-money options are defined relative to the forward, not the spot, for dividend-paying stocks. The forward also determines the correct strike for stock dividends and corporate actions."}
{"title": "Forward-Start Option Price", "equation": "C_{fs} = S_0 e^{-qT} N(d_1^{fs}) - K S_0 N(d_2^{fs})", "category": "Options", "tags": ["forward-start", "relative-strike", "path-dependent", "employee-options", "rolling-volatility", "stochastic-processes", "time-homogeneous", "compound-optionality"], "note": "## Equation Variables\nForward-start options are compound options that grant the right to receive (for a call) or purchase (for a put) another option at a future date with a strike set relative to the spot price at that date. These options are characterized by a predetermined strike percentage and a start date when the underlying option is \"born.\"\n\n- **$C_{fs}$**: The price of the forward-start option at time $t=0$, representing the present value of the expected option that will exist at the start date.\n- **$S_{0}$**: The current spot price of the underlying asset, serving as the reference for both the forward-start option pricing and the eventual strike determination.\n- **$K_{rel}$**: The relative strike expressed as a percentage of the spot price at the start date. A 100% relative strike means the underlying option will be at-the-money when it starts.\n- **$T$**: The total time to final expiration, which encompasses both the waiting period until the start date and the life of the underlying option.\n- **$r$**: The continuously compounded risk-free interest rate, used for discounting and the drift component.\n- **$q$**: The continuously compounded dividend yield, which reduces the effective carry on the underlying asset.\n- **$\\sigma$**: The annualized volatility of the underlying, assumed constant over the entire period in the basic model.\n- **$N(\\cdot)$**: The standard normal cumulative distribution function for transforming composite terms into probabilities.\n- **$d_{1}^{fs}, d_{2}^{fs}$**: Modified composite terms for forward-start pricing that incorporate the volatility over the total period.\n\n## Interpretation\nForward-start options can be understood as options on options. At the start date $t_{s}$, a new standard option is created with strike $K=K_{rel}S_{t_{s}}$. The value of this new option depends on the spot price at that time and the remaining time to final expiration $T-t_{s}$.\n\nThe pricing formula averages over all possible spot prices at the start date, weighting by their risk-neutral probabilities. The expected value of the underlying option is computed, then discounted to present value. For a standard ATM forward start (100% relative strike), this simplifies to a Black–Scholes-style formula with modified parameters.\n\nThe key insight is that the forward-start option price depends on the total variance from $t=0$ to $t=T$, not just the variance from $t_{s}$ to $t=T$. The uncertainty about the future spot price at $t_{s}$ affects the strike at which the underlying option begins trading, and this uncertainty has value.\n\nFor relative strikes of 100% (ATM), the forward-start option price is approximately $S_{0}e^{-qT}N(d_{1})-K_{rel}S_{0}N(d_{2})$, where the $d$-terms use the total variance $\\sigma^{2}T$. This looks similar to a standard Black–Scholes call but with the forward price modified by the relative strike structure.\n\n## Assumptions\nForward-start option pricing builds on Black–Scholes assumptions with additional considerations:\n\n1. **Time-Homogeneous Volatility**: The same volatility $\\sigma$ applies to both the pre-start period and the post-start period. Stochastic or regime-dependent volatility requires more complex models.\n\n2. **Known Strike Percentage**: The relative strike $K_{rel}$ is known and fixed at inception, not subject to adjustment based on market conditions.\n\n3. **Deterministic Rates**: Interest rates and dividends are known and constant (or their expected values are used).\n\n4. **European Exercise**: Both the forward-start option and the underlying option are European-style.\n\n5. **No Jumps**: Continuous price paths ensure the lognormal distribution applies throughout the entire period.\n\n## Practical Use\nForward-start options are commonly used in employee stock option compensation programs. Employees receive options that vest over time, with new options \"starting\" at each vesting date with strikes set at the then-current stock price. This creates a forward-start structure where each tranche of options has different start dates.\n\nThe pricing model helps companies value employee compensation expense and helps employees understand the value of their option grants. The total value of a multi-tranche grant equals the sum of forward-start option values with different start dates.\n\nIn institutional finance, forward-start options appear in performance-based compensation, bonus structures, and structured products. They provide payoff patterns that depend on future relative performance rather than absolute price levels.\n\nRolling volatility strategies use forward-start concepts to maintain consistent volatility exposure over time. By continuously rolling forward-start options, investors can achieve exposure to volatility without the theta decay of longer-dated options."}
{"title": "Exchange Option (Margrabe Formula)", "equation": "C = S_2 N(d_1) - S_1 N(d_2)", "category": "Options", "tags": ["exchange-option", "margrabe", "asset-swap", "relative-value", "correlation-sensitive", "no-arbitrage", "change-of-numeraire", "two-assets"], "note": "## Equation Variables\nThe Margrabe formula provides the no-arbitrage price for an exchange option—the right to exchange one asset for another at a predetermined ratio. This generalization of Black–Scholes accommodates options where the payoff depends on the relative performance of two assets rather than the absolute price of a single asset.\n\n- **$C$**: The value of the exchange option, representing the right to receive asset 2 in exchange for asset 1 at the predetermined exchange ratio (typically 1:1 unless specified otherwise).\n- **$S_{1}$**: The current price of asset 1 (the asset to be given up upon exercise).\n- **$S_{2}$**: The current price of asset 2 (the asset to be received upon exercise).\n- **$r$**: The continuously compounded risk-free interest rate, serving as the common discount rate for both assets under the risk-neutral measure.\n- **$T$**: The time to expiration of the exchange option.\n- **$\\sigma_{1}$**: The annualized volatility of asset 1's log returns.\n- **$\\sigma_{2}$**: The annualized volatility of asset 2's log returns.\n- **$\\rho$**: The correlation coefficient between the log returns of asset 1 and asset 2, ranging from -1 to +1.\n- **$\\sigma$**: The volatility of the relative price $S_{2}/S_{1}$:\n  $$\\sigma=\\sqrt{\\sigma_{1}^{2}+\\sigma_{2}^{2}-2\\rho\\sigma_{1}\\sigma_{2}}$$\n- **$N(\\cdot)$**: The standard normal cumulative distribution function.\n- **$d_{1}, d_{2}$**: Modified composite terms:\n  $$d_{1}=\\frac{\\ln(S_{2}/S_{1})+(r+\\sigma^{2}/2)T}{\\sigma\\sqrt{T}}$$\n  $$d_{2}=d_{1}-\\sigma\\sqrt{T}$$\n\n## Interpretation\nThe Margrabe formula transforms the two-asset problem into a single-asset problem by focusing on the ratio $S_{2}/S_{1}$. The exchange option pays $\\max(S_{2}/S_{1}-1,0)$ at expiration (for a 1:1 exchange ratio), which is exactly the payoff of a call option on the ratio with strike 1.\n\nThe effective volatility $\\sigma$ captures how the relative price fluctuates, accounting for both individual asset volatilities and their correlation. Higher individual volatilities increase $\\sigma$ and option value, while higher correlation reduces $\\sigma$ and option value. This negative correlation effect makes intuitive sense: if assets move together, the ratio remains stable, reducing the value of the exchange right.\n\nWhen $\\rho=1$ (perfect positive correlation), the two assets move in lockstep and their ratio is constant (assuming no dividend differences). The exchange option has zero value because you can never profit from exchanging. When $\\rho<1$, the ratio can drift, creating value for the right to exchange at favorable ratios.\n\nThe formula reduces to standard Black–Scholes when one asset is a bond (asset 1 with $\\sigma_{1}=0$). In this case, $\\sigma=\\sigma_{2}$ and the formula becomes $C=S_{2}N(d_{1})-Ke^{-rT}N(d_{2})$ with $K=1$, which is the standard call formula on asset 2 with strike 1.\n\n## Assumptions\nThe Margrabe formula requires specific assumptions beyond standard Black–Scholes:\n\n1. **Known Correlation**: The correlation $\\rho$ between asset returns is known and constant. Stochastic correlation requires extended models.\n\n2. **Lognormal Dynamics**: Both assets follow geometric Brownian motion with constant parameters.\n\n3. **No Income**: No dividends or other income from either asset during the option's life. Income requires adjustment to the forward prices.\n\n4. **Constant Volatility**: Volatilities $\\sigma_{1}$ and $\\sigma_{2}$ remain constant over the option's life.\n\n5. **Single Exchange Ratio**: The exchange ratio is fixed and known at inception; varying ratios require modified formulas.\n\n## Practical Use\nExchange options appear in numerous financial applications where payoffs depend on relative rather than absolute performance. M&A transactions with stock-for-stock exchanges, currency options, and commodity conversion options all exhibit exchange option characteristics.\n\nIn corporate finance, Margrabe's formula values the option to exchange one security for another, which appears in convertible bonds (exchange option on the conversion value), warrant pricing, and structured products with asset exchange features.\n\nCurrency options can be viewed as exchange options where one asset is domestic currency and the other is foreign currency. The foreign interest rate plays the role of the \"dividend yield\" on the foreign asset.\n\nThe correlation sensitivity of exchange options makes them useful for trading relative value between assets. A trader who believes correlation will decrease (increasing relative volatility) might buy exchange options to profit from the expected increase in value."}
{"title": "Quanto Option Price", "equation": "C_{quanto} = S_0 e^{-qT} N(d_1^{Q}) - K e^{-rT} N(d_2^{Q})", "category": "Options", "tags": ["quanto", "fixed-exchange-rate", "cross-currency", "correlation-risk", "fx-hedged", "international-derivatives", "adjusted-black-scholes", "dual-currency"], "note": "## Equation Variables\nQuanto options are cross-currency derivatives where the payoff is calculated in one currency (typically the investor's domestic currency) but the underlying is denominated in another currency (foreign currency). The defining feature is that the exchange rate is fixed at inception, eliminating FX risk for the option holder but introducing correlation risk for the pricing model.\n\n- **$C_{quanto}$**: The quanto call option price, representing the value of the right to receive a payoff in domestic currency based on a foreign-denominated underlying.\n- **$S_{0}$**: The current spot price of the underlying asset in foreign currency.\n- **$r$**: The domestic risk-free interest rate (continuously compounded), used for discounting the domestic-strike payoff.\n- **$r_{f}$**: The foreign risk-free interest rate, which appears as the foreign dividend yield $q$ in the adjusted formula.\n- **$q$**: The dividend yield or foreign interest rate equivalent, which is $r_{f}$ for currency-underlying options.\n- **$T$**: The time to expiration in years.\n- **$\\sigma_{S}$**: The volatility of the underlying asset's returns in foreign currency.\n- **$\\sigma_{V}$**: The volatility of the exchange rate (foreign currency per domestic currency).\n- **$\\rho_{Q}$**: The correlation between the underlying asset returns and the exchange rate returns.\n- **$\\sigma$**: The effective volatility of the quanto-adjusted underlying:\n  $$\\sigma=\\sqrt{\\sigma_{S}^{2}+\\sigma_{V}^{2}+2\\rho_{Q}\\sigma_{S}\\sigma_{V}}$$\n- **$d_{1}^{Q}, d_{2}^{Q}$**: Modified composite terms incorporating the quanto adjustment to the drift:\n  $$d_{1}^{Q}=\\frac{\\ln(S_{0}/K)+(r-q+\\rho_{Q}\\sigma_{S}\\sigma_{V})T}{\\sigma\\sqrt{T}}$$\n  $$d_{2}^{Q}=d_{1}^{Q}-\\sigma\\sqrt{T}$$\n\n## Interpretation\nQuanto options solve the problem of cross-currency investing where an investor wants exposure to a foreign asset but wants to eliminate FX risk. The payoff is fixed in domestic currency regardless of how the exchange rate moves between inception and expiration. This \"FX-fixed\" feature means the option's value depends on the correlation between the underlying asset and the exchange rate.\n\nThe key adjustment from standard Black–Scholes is the $\\rho_{Q}\\sigma_{S}\\sigma_{V}$ term in the drift. This correlation term arises because the exchange rate and underlying price movements are not independent—they are linked through economic relationships, market correlations, and common risk factors. The effective drift includes a correction for this correlation.\n\nThe interpretation of $\\rho_{Q}$ is crucial: a positive correlation means the underlying tends to appreciate when the domestic currency strengthens (foreign currency weakens). This hurts quanto option holders because the domestic-currency payoff is reduced. A negative correlation means the underlying tends to appreciate when the domestic currency weakens, which benefits quanto holders.\n\nThe effective volatility $\\sigma$ includes both individual volatilities and the correlation term. Unlike the Margrabe formula (where correlation reduces effective volatility), here correlation increases effective volatility when $\\rho_{Q}>0$. This makes sense: correlation creates additional uncertainty in the domestic-currency payoff beyond the sum of individual uncertainties.\n\n## Assumptions\nQuanto pricing requires specific assumptions about the relationship between asset and FX dynamics:\n\n1. **Known Correlation**: The correlation $\\rho_{Q}$ between asset returns and FX returns is known and constant. In practice, this correlation is difficult to estimate and may be unstable.\n\n2. **Lognormal Dynamics**: Both the underlying asset and the exchange rate follow geometric Brownian motion with constant volatilities.\n\n3. **Deterministic Rates**: Domestic and foreign interest rates are constant (or their expected values are used).\n\n4. **Fixed Exchange Rate**: The exchange rate for payoff conversion is fixed at inception and known with certainty.\n\n5. **No Early Exercise**: Standard quanto options are European; American features require numerical methods.\n\n## Practical Use\nQuanto options are essential tools for international portfolio management and emerging market investing. An American investor wanting exposure to Brazilian stocks but concerned about BRL/USD volatility can purchase quanto options that pay in USD based on BRL-denominated performance.\n\nThe correlation risk embedded in quanto pricing makes these instruments complex to value and hedge. Traders must carefully estimate and monitor the correlation between underlying and FX, as this parameter significantly affects pricing and risk management.\n\nEquity index quanto options allow investors to gain emerging market exposure while eliminating currency risk. The fixed exchange rate feature means the payoff depends only on the underlying index performance, not on FX movements.\n\nThe quanto adjustment also applies to other cross-currency derivatives including swaps, forwards, and exotic options. Understanding the correlation structure is essential for pricing and hedging any derivative where payoff currency differs from underlying currency."}
{"title": "Compound Option (Geske's Formula)", "equation": "C_{compound} = S_0 N_2(d_1, h_1; \\rho) - K_1 e^{-rT_1} N_2(d_2, h_2; \\rho) - K_2 e^{-rT_2} N(h_2)", "category": "Options", "tags": ["compound-option", "geske-model", "option-on-option", "bivariate-normal", "early-decision", "nested-optionality", "corporate-finance", "two-expirations"], "note": "## Equation Variables\nCompound options are options on options, providing the right to buy or sell another option at a predetermined strike. Geske's formula extends the Black–Scholes framework to value these nested options using the bivariate normal distribution, which captures the joint probability of exercise decisions at two different expiration dates.\n\n- **$C_{compound}$**: The value of the compound call option, representing the right to purchase an underlying call option at time $T_{1}$ for strike $K_{1}$.\n- **$S_{0}$**: The current spot price of the underlying asset.\n- **$K_{1}$**: The strike price of the compound option (outer option), paid at $T_{1}$ if the holder exercises into the underlying option.\n- **$K_{2}$**: The strike price of the underlying option (inner option), which will be exercised at $T_{2}$ if the compound option is exercised.\n- **$T_{1}$**: The expiration date of the compound option (outer option).\n- **$T_{2}$**: The expiration date of the underlying option (inner option), with $T_{2}>T_{1}$.\n- **$r$**: The continuously compounded risk-free interest rate.\n- **$q$**: The continuously compounded dividend yield on the underlying asset.\n- **$\\sigma$**: The annualized volatility of the underlying asset.\n- **$N(\\cdot)$**: The standard normal cumulative distribution function.\n- **$N_{2}(\\cdot,\\cdot;\\rho)$**: The bivariate normal cumulative distribution function with correlation $\\rho$.\n- **$d_{1}, d_{2}$**: Standard Black–Scholes terms for the underlying option.\n- **$h_{1}, h_{2}$**: Modified terms for compound option pricing:\n  $$h_{1}=\\frac{\\ln(K_{1}/S_{0})+(r-q-\\sigma^{2}/2)T_{1}}{\\sigma\\sqrt{T_{1}}}$$\n  $$h_{2}=h_{1}-\\sigma\\sqrt{T_{1}}$$\n- **$\\rho$**: The correlation between the standardized variables, equal to $\\sqrt{T_{1}/T_{2}}$.\n\n## Interpretation\nCompound options involve two decision dates and two strikes, creating a two-dimensional optimization problem. The holder of a call on a call must decide at $T_{1}$ whether exercising and paying $K_{1}$ to receive the underlying option is profitable, given the underlying option's value at that time.\n\nThe bivariate normal distribution $N_{2}(d_{1},h_{1};\\rho)$ captures the joint probability that the underlying option expires in-the-money (related to $d_{1}$) and that the compound option should be exercised (related to $h_{1}$). The correlation $\\rho=\\sqrt{T_{1}/T_{2}}$ reflects the information common to both decisions.\n\nThe first term $S_{0}N_{2}(d_{1},h_{1};\\rho)$ represents the expected value of receiving the underlying option's stock component if both exercise decisions favor the holder. The second term $-K_{1}e^{-rT_{1}}N_{2}(d_{2},h_{2};\\rho)$ represents the present value of paying the compound option strike if exercise occurs. The third term $-K_{2}e^{-rT_{2}}N(h_{2})$ adjusts for the expected value of the underlying option's strike payment.\n\nThe formula captures the interaction between the two exercise decisions. The holder exercises the compound option only if the underlying option's value exceeds $K_{1}$, which itself depends on whether the underlying option will be exercised at $T_{2}$. This nested optionality creates value that depends on the entire volatility structure over both periods.\n\n## Assumptions\nGeske's compound option model extends Black–Scholes with specific assumptions:\n\n1. **Two Deterministic Maturities**: The two expiration dates $T_{1}$ and $T_{2}$ are known and fixed.\n\n2. **Single Underlying**: The compound option and underlying option have the same underlying asset.\n\n3. **Lognormal Dynamics**: The underlying follows geometric Brownian motion with constant volatility.\n\n4. **Known Correlation**: The temporal correlation $\\rho=\\sqrt{T_{1}/T_{2}}$ is determined by the ratio of time periods.\n\n5. **European Exercise**: Both the compound and underlying options can only be exercised at their respective expirations.\n\n6. **No Dividends**: Assumes no dividend payments during either period; dividends require adjustment.\n\n## Practical Use\nCompound options model decision problems in corporate finance and capital markets. The option to acquire another company, the option to expand a project, and callable/cancelable structures all exhibit compound option characteristics.\n\nEmployee stock options often have compound option features when there are multiple vesting dates. Each vesting date provides a new option (or the right to exercise existing options), creating a sequence of compound options on the original grant.\n\nInterest rate caps and floors can be viewed as compound options on forward rates, where each payment date provides a new option on the forward rate applicable to the next period. Geske's framework extends to these multi-period structures.\n\nThe compound option framework also applies to callable bonds and convertible bonds, where the issuer's call decision and the holder's conversion decision create nested optionality. Understanding these interactions is essential for pricing and hedging complex fixed income derivatives."}
{"title": "Coupon-Bearing Bond Price", "equation": "P = \\sum_{i=1}^{n} C \\cdot e^{-r t_i} + F \\cdot e^{-r T}", "category": "Fixed Income", "tags": ["bond-pricing", "coupon-bearing", "present-value", "cash-flow-discounting", "fixed-income", "yield-curve", "fixed-coupon", "annuity-factor"], "note": "## Equation Variables\nThe coupon-bearing bond price sums the present values of all future cash flows including coupon payments and principal repayment.\n\n- **$P$**: Current market price of the coupon-bearing bond\n- **$C$**: Fixed coupon payment (typically annual or semi-annual)\n- **$t_i$**: Time until the $i$-th coupon payment\n- **$F$**: Face value (par value) repaid at maturity\n- **$T$**: Time to maturity (final payment date)\n- **$r$**: Yield to maturity or appropriate discount rate\n- **$n$**: Total number of coupon payments\n\n## Interpretation\nThis equation applies the time-value-of-money principle: a dollar received today is worth more than a dollar received tomorrow. Each coupon payment $C$ is discounted back to present value using $e^{-rt_i}$, reflecting continuous compounding. The face value $F$ received at maturity is similarly discounted. The sum represents the maximum price a rational investor would pay given the expected cash flows and required return. When yields rise, bond prices fall; when yields fall, prices rise—this inverse relationship is the foundation of fixed income analysis.\n\n## Assumptions\n- Constant yield $r$ across all maturities (flat yield curve assumption)\n- No default risk (risk-free bond)\n- Couins are paid as scheduled with no prepayment\n- Market participants are price-takers\n\n## Practical Use\nUsed for bond valuation, price discovery, and relative value analysis. In practice, a term structure of discount factors replaces the constant $r$, yielding $P = \\sum CF_i \\cdot DF(t_i)$ where $DF(t_i)$ is the discount factor for time $t_i$. This enables pricing bonds on an imperfect curve and identifying mispriced securities. Bond yields are calculated by solving $P = \\sum CF_i e^{-y t_i}$ for $y$, the yield to maturity."}
{"title": "Macaulay Duration", "equation": "D_{mac} = \\frac{\\sum_{i=1}^{n} t_i \\cdot CF_i \\cdot e^{-y t_i}}{P}", "category": "Fixed Income", "tags": ["macaulay-duration", "interest-rate-risk", "duration-analysis", "bond-sensitivity", "weighted-average", "maturity", "cash-flow-timing", "convexity"], "note": "## Equation Variables\nMacaulay duration measures the weighted average time until cash flows are received, weighting each payment by its present value contribution.\n\n- **$D_{mac}$**: Macaulay duration (in years)\n- **$t_i$**: Time until the $i$-th cash flow\n- **$CF_i$**: Cash flow amount at time $t_i$\n- **$y$**: Yield to maturity (periodic compounding)\n- **$P$**: Current bond price\n- **$n$**: Total number of cash flows\n\n## Interpretation\nMacaulay duration answers: \"On average, when do I receive my money back?\" A 5-year bond with annual coupons has duration less than 5 years because coupons received earlier reduce the weight of later payments. For a zero-coupon bond, duration equals maturity since all cash flows occur at once. Duration measures interest rate sensitivity: a bond with higher duration experiences larger price changes for a given yield change. The formula weights each cash flow by its present value contribution $CF_i e^{-yt_i}$, normalized by total price $P$. This makes duration independent of coupon size—only timing matters.\n\n## Assumptions\n- Small yield changes (first-order approximation)\n- Parallel shifts in the yield curve\n- Cash flows are fixed and known with certainty\n- No embedded options (bullet bonds)\n\n## Practical Use\nEssential for portfolio immunization, interest rate risk management, and bond selection. Portfolio duration is weighted average of individual bond durations. Immunization strategies match asset and liability durations. Relative duration analysis compares interest rate sensitivity across bonds. Duration explains why long-term bonds are more volatile than short-term bonds, and why low-coupon bonds have higher duration than high-coupon bonds of identical maturity."}
{"title": "Modified Duration", "equation": "D_{mod} = \\frac{D_{mac}}{1 + y/k}", "category": "Fixed Income", "tags": ["modified-duration", "price-sensitivity", "interest-rate-risk", "duration-adjusted", "bond-volatility", "yield-change", "price-change", "dv01"], "note": "## Equation Variables\nModified duration adjusts Macaulay duration for the compounding frequency of the yield, providing direct sensitivity to yield changes.\n\n- **$D_{mod}$**: Modified duration (dimensionless, or in years)\n- **$D_{mac}$**: Macaulay duration\n- **$y$**: Annual yield to maturity\n- **$k$**: Number of coupon payments per year (compounding frequency)\n\n## Interpretation\nModified duration measures the percentage change in bond price for a 1 percentage point change in yield. If $D_{mod} = 5$, a 1% (100 basis point) increase in yield causes approximately a 5% decrease in price. The denominator $1 + y/k$ converts from periodic to continuous compounding effects. For annual compounding ($k=1$), $D_{mod} = D_{mac}/(1+y)$. For semi-annual bonds ($k=2$), the denominator becomes $1 + y/2$. This adjustment is critical for accurate price sensitivity estimates. The approximation $\\Delta P/P \\approx -D_{mod} \\cdot \\Delta y$ works well for small yield changes.\n\n## Assumptions\n- Small yield changes (second-order effects negligible)\n- Parallel yield curve shifts\n- No optionality (non-callable bonds)\n- Yield quoted with same compounding as coupons\n\n## Practical Use\nUsed for hedging, risk management, and relative value analysis. DV01 is modified duration multiplied by price and by 0.0001 (1 basis point). Portfolio managers use modified duration to adjust interest rate exposure. When constructing a hedge, matching modified durations of long and short positions isolates specific risk. Modified duration is preferred over Macaulay duration for practical applications because it directly translates yield changes to price changes."}
{"title": "Bond Convexity", "equation": "CV = \\frac{1}{P} \\cdot \\frac{1}{(1+y/k)^2} \\sum_{i=1}^{n} \\frac{CF_i \\cdot t_i(t_i+1)}{(1+y/k)^{t_i}}", "category": "Fixed Income", "tags": ["convexity", "curvature", "price-yield-relationship", "second-derivative", "interest-rate-risk", "bond-pricing", "curvature-adjustment", "duration-limitations"], "note": "## Equation Variables\nConvexity measures the curvature of the price-yield relationship, capturing the second-order effect of yield changes on bond prices.\n\n- **$CV$**: Convexity measure (dimensionless)\n- **$P$**: Bond price\n- **$y$**: Annual yield to maturity\n- **$k$**: Number of coupon periods per year\n- **$t_i$**: Time to cash flow $i$ (in years)\n- **$CF_i$**: Cash flow at time $t_i$\n- **$n$**: Total number of cash flows\n\n## Interpretation\nWhile duration provides a linear (first-order) approximation of price changes, convexity captures the curvature—the fact that price increases more when yields fall than price decreases when yields rise by the same amount. This asymmetry exists because the price-yield curve is convex, not linear. The formula weights each cash flow by $t_i(t_i+1)$, reflecting that later cash flows have greater convexity. Zero-coupon bonds have higher convexity than coupon bonds of the same maturity because all cash flows are concentrated at maturity. Convexity is always positive for bonds without embedded options, meaning prices benefit from volatility regardless of yield direction.\n\n## Assumptions\n- Small to moderate yield changes (Taylor series approximation)\n- Parallel yield curve shifts\n- No embedded options (simple bullet bonds)\n- Known cash flows with certainty\n\n## Practical Use\nFor precise pricing and risk management, the price change approximation is $\\Delta P/P \\approx -D_{mod} \\cdot \\Delta y + \\frac{1}{2} \\cdot CV \\cdot (\\Delta y)^2$. Convexity becomes important for large yield moves, long-duration bonds, and portfolios sensitive to volatility. Callable bonds have negative convexity at low yields (price appreciation is limited), making convexity analysis crucial for evaluating embedded options. Portfolio optimization considers convexity to improve risk-adjusted returns."}
{"title": "Vasicek Short Rate Model", "equation": "dr_t = a(b - r_t)dt + \\sigma dW_t", "category": "Fixed Income", "tags": ["vasicek-model", "short-rate-model", "ornstein-uhlenbeck", "mean-reversion", "stochastic-dynamics", "interest-rate-processes", "affine-term-structure", "gaussian-model"], "note": "## Equation Variables\nThe Vasicek model describes short rate dynamics as an Ornstein-Uhlenbeck process, capturing mean reversion in interest rates.\n\n- **$r_t$**: Short rate (instantaneous risk-free rate) at time $t$\n- **$dr_t$**: Change in short rate over time interval $dt$\n- **$a$**: Mean reversion speed (positive constant)\n- **$b$**: Long-run mean level of the short rate\n- **$\\sigma$**: Volatility of the short rate\n- **$dt$**: Infinitesimal time interval\n- **$dW_t$**: Wiener process (standard Brownian motion increment)\n\n## Interpretation\nThe drift term $a(b - r_t)$ pulls the short rate toward its long-term mean $b$: if $r_t > b$, the drift is negative; if $r_t < b$, the drift is positive. This mean-reverting behavior reflects empirical observations that interest rates oscillate around equilibrium levels. The diffusion term $\\sigma dW_t$ introduces randomness, modeling unpredictable economic shocks. Unlike some models where rates can become negative (potentially unrealistic), the Vasicek model with appropriate parameters typically keeps rates positive. The model is analytically tractable—rates follow a normal distribution conditional on the current state, enabling closed-form bond and option prices.\n\n## Assumptions\n- Short rate follows Gaussian (normal) distribution\n- Mean reversion is instantaneous and constant\n- Volatility is constant (homoscedastic)\n- Market price of interest rate risk is constant\n\n## Practical Use\nThe Vasicek model enables analytical pricing of interest rate derivatives including bonds, caps, floors, and swaptions. It captures key empirical features of interest rates: mean reversion and stochastic volatility. However, the normal distribution allows negative rates, and constant volatility may understate market dynamics during stress periods. The model serves as a foundation for more sophisticated formulations like the Hull-White model. Calibration to market data uses historical parameter estimates or optimization to fit the initial term structure."}
{"title": "Vasicek Bond Price Formula", "equation": "P(t,T) = A(t,T) \\cdot e^{-B(t,T) \\cdot r_t}", "category": "Fixed Income", "tags": ["vasicek-bond-price", "affine-term-structure", "closed-form-solution", "zero-coupon-pricing", "term-structure-model", "analytical-pricing", "discount-factor", "short-rate-models"], "note": "## Equation Variables\nThe Vasicek bond price has an affine (linear-exponential) form, enabling analytical solutions for zero-coupon bond pricing.\n\n- **$P(t,T)$**: Time-$t$ price of a zero-coupon bond maturing at $T$\n- **$A(t,T)$**: Time-dependent coefficient (deterministic function)\n- **$B(t,T)$**: Time-dependent coefficient (deterministic function)\n- **$r_t$**: Short rate at time $t$\n- **$\\tau = T-t$**: Time to maturity\n\nWhere:\n- $B(t,T) = \\frac{1 - e^{-a\\tau}}{a}$\n- $\\ln A(t,T) = (B(t,T) - \\tau)\\left(\\frac{a^2 b - \\sigma^2/2}{a^2}\\right) - \\frac{\\sigma^2 B(t,T)^2}{4a}$\n\n## Interpretation\nThe affine form $A(t,T)e^{-B(t,T)r_t}$ means bond prices are exponential in the short rate. As time passes ($t$ increases toward $T$), $B(t,T)$ decreases, reducing sensitivity to the current short rate. The coefficient $A(t,T)$ captures the deterministic component from the drift and volatility parameters. This formula shows how bond prices depend on current rates—higher $r_t$ means lower bond prices, as expected. The mean reversion parameter $a$ affects how quickly the term structure responds to rate changes. The volatility $\\sigma$ creates a risk premium reflected in $A(t,T)$.\n\n## Assumptions\n- Short rate follows Vasicek dynamics $dr_t = a(b - r_t)dt + \\sigma dW_t$\n- Market price of interest rate risk is $\\lambda = \\frac{\\sigma\\lambda}{\\sigma}$ (constant)\n- Risk-neutral measure $\\mathbb{Q}$ exists\n- All parameters are constant over time\n\n## Practical Use\nThis closed-form solution enables rapid pricing of zero-coupon bonds without numerical methods. Extending the formula gives prices for coupon-bearing bonds, interest rate caps, floors, and swaptions. The model calibrates to the initial yield curve by choosing $b$ appropriately. Risk management benefits from knowing analytical sensitivities to $r_t$, $a$, $b$, and $\\sigma$. The Vasicek model's analytical tractability makes it popular for teaching and as a benchmark for more complex models."}
{"title": "Cox-Ingersoll-Ross (CIR) Model", "equation": "dr_t = a(b - r_t)dt + \\sigma \\sqrt{r_t} \\, dW_t", "category": "Fixed Income", "tags": ["cir-model", "square-root-diffusion", "short-rate-model", "interest-rate-processes", "affine-term-structure", "positive-rates", "mean-reversion", "stochastic-volatility"], "note": "## Equation Variables\nThe CIR model describes short rate dynamics with state-dependent volatility, ensuring rates remain non-negative.\n\n- **$r_t$**: Short rate at time $t$\n- **$dr_t$**: Change in short rate over time interval $dt$\n- **$a$**: Mean reversion speed\n- **$b$**: Long-run mean level of the short rate\n- **$\\sigma$**: Volatility parameter (scale of interest rate uncertainty)\n- **$\\sqrt{r_t}$**: State-dependent volatility (volatility proportional to $\\sqrt{r_t}$)\n- **$dW_t$**: Wiener process increment under risk-neutral measure\n\n## Interpretation\nThe CIR model addresses a key limitation of Vasicek: square-root volatility $\\sigma\\sqrt{r_t}$ ensures the short rate stays non-negative. When rates approach zero, volatility also approaches zero, reducing the probability of negative rates—a \"reflection barrier\" effect. The drift $a(b - r_t)$ is identical to Vasicek, pulling rates toward long-run mean $b$. The distribution of $r_t$ is non-central chi-squared, not normal, leading to different term structure dynamics. The model's popularity stems from combining analytical tractability (affine term structure) with more realistic rate behavior—rates cannot be negative, and volatility increases with rate levels.\n\n## Assumptions\n- Short rate follows square-root diffusion process\n- Volatility is state-dependent (proportional to $\\sqrt{r_t}$)\n- Mean reversion is constant\n- Market price of interest rate risk is proportional to $\\sqrt{r_t}$\n\n## Practical Use\nThe CIR model prices bonds, interest rate options, and credit derivatives. Bond prices remain affine: $P(t,T) = A(t,T)e^{-B(t,T)r_t}$ with different $A$ and $B$ than Vasicek. The model captures credit spread dynamics because $r_t$ can be interpreted as short-term default intensity in reduced-form credit models. Calibration is more complex than Vasicek but achievable. The model is used for pricing mortgage-backed securities (where prepayment depends on rates) and in multi-curve frameworks for OIS and non-OIS discounting."}
{"title": "Hull-White Short Rate Model", "equation": "dr_t = \\left[\\theta(t) - a r_t\\right]dt + \\sigma dW_t", "category": "Fixed Income", "tags": ["hull-white-model", "extended-vasicek", "short-rate-model", "time-dependent-mean", "analytic-pricing", "interest-rate-derivatives", "calibration", "gaussian-model"], "note": "## Equation Variables\nThe Hull-White model extends Vasicek with a time-dependent mean reversion level $\\theta(t)$, enabling exact calibration to the initial yield curve.\n\n- **$r_t$**: Short rate at time $t$\n- **$dr_t$**: Change in short rate over time interval $dt$\n- **$\\theta(t)$**: Time-dependent mean reversion level (chosen for perfect calibration)\n- **$a$**: Mean reversion speed\n- **$\\sigma$**: Volatility of the short rate\n- **$dW_t$**: Wiener process increment under risk-neutral measure\n\n## Interpretation\nHull-White is Vasicek with a time-dependent drift: $\\theta(t)$ is chosen so the model perfectly reproduces the initial term structure. Without $\\theta(t)$, Vasicek can only fit the curve approximately. The term $-\\alpha r_t$ maintains mean reversion, while $\\theta(t)$ adjusts the level. For $t < T$, the expected short rate $\\mathbb{E}^{\\mathbb{Q}}[r_T \\mid r_t]$ reverts toward $\\theta(s)$ for $s \\in (t,T)$. The model remains Gaussian, preserving analytical tractability. When $\\theta(t)$ is set to zero, the model reduces to basic Vasicek. The flexibility to match any initial curve makes Hull-White popular for pricing exotic interest rate products.\n\n## Assumptions\n- Short rate follows Gaussian process\n- Volatility $\\sigma$ is constant\n- Mean reversion speed $a$ is constant\n- $\\theta(t)$ is deterministic and can be solved from the initial curve\n\n## Practical Use\nHull-White is the workhorse model for interest rate derivatives in banking. It prices caps, floors, swaptions, and exotics with analytical formulas. The model extends to multiple factors for better calibration. Calibration to caps (using Black's model implied vol) determines $\\sigma$; the initial curve determines $\\theta(t)$. The Gaussian property enables Monte Carlo simulation without importance sampling for rate paths. Limitations include allowing negative rates (addressed by shifted-Hull-White) and single-factor restrictions."}
{"title": "Forward Rate Agreement (FRA) Rate", "equation": "f(t,T_1,T_2) = \\frac{\\ln P(t,T_1) - \\ln P(t,T_2)}{T_2 - T_1}", "category": "Fixed Income", "tags": ["forward-rate", "fra", "term-structure", "forward-agreement", "interest-rate-futures", "yield-curve", "discount-factors", "rate-expectations"], "note": "## Equation Variables\nThe forward rate represents the agreed-upon interest rate for a future period, derived from the term structure of zero-coupon bond prices.\n\n- **$f(t,T_1,T_2)$**: Forward rate for period $[T_1, T_2]$ as seen from time $t$\n- **$P(t,T_1)$**: Time-$t$ price of a zero-coupon bond maturing at $T_1$\n- **$P(t,T_2)$**: Time-$t$ price of a zero-coupon bond maturing at $T_2$\n- **$T_2 - T_1$**: Length of the forward period (in years)\n- **$t$**: Current time (observation date)\n\n## Interpretation\nForward rates are implied by the yield curve—they represent the market's expectation of future interest rates, adjusted for convexity. A higher $P(t,T_1)$ relative to $P(t,T_2)$ implies a lower forward rate (bond prices and yields move inversely). The formula derives from no-arbitrage: investing from $T_1$ to $T_2$ at the forward rate should equal investing from $0$ to $T_2$ minus investing from $0$ to $T_1$. Forward rates are pure expectations only if the expectations hypothesis holds; in practice, they include a liquidity premium. The forward curve reveals market expectations about future monetary policy, inflation, and economic growth.\n\n## Assumptions\n- No arbitrage opportunities exist (law of one price)\n- Bond markets are efficient and liquid\n- Same risk-free rate applies across all maturities\n- Continuous compounding convention\n\n## Practical Use\nForward rates price FRAs (Forward Rate Agreements), interest rate futures, and forward-starting swaps. They decompose the yield curve into expected future spot rates, enabling term structure analysis. Portfolio managers use forward rates to lock in future borrowing costs. The spread between forward rates and current spot rates indicates market expectations. Convexity adjustments convert forward rates to futures rates for contracts with daily marking to market. Forward rate analysis helps identify steepening or flattening yield curve expectations."}
{"title": "Instantaneous Forward Rate", "equation": "f(t,T) = -\\frac{\\partial}{\\partial T} \\ln P(t,T)", "category": "Fixed Income", "tags": ["instantaneous-forward-rate", "forward-curve", "continuously-compounded", "term-structure-derivative", "spot-rate", "limit-definition", "continuous-time", "discount-curve"], "note": "## Equation Variables\nThe instantaneous forward rate is the limit of forward rates as the period length approaches zero, representing the continuously compounded spot rate at a future date.\n\n- **$f(t,T)$**: Instantaneous forward rate at time $T$ as seen from time $t$\n- **$P(t,T)$**: Time-$t$ price of a zero-coupon bond maturing at $T$\n- **$\\partial/\\partial T$**: Partial derivative with respect to maturity\n- **$t$**: Current observation time\n- **$T$**: Future maturity time ($T \\geq t$)\n\n## Interpretation\nThe instantaneous forward rate is the continuously compounded return from investing for an infinitesimally short period starting at $T$. Taking the derivative of $\\ln P(t,T)$ captures how quickly the log-price changes with maturity. For a constant short rate $r$, $P(t,T) = e^{-r(T-t)}$ and $f(t,T) = r$. In general, $f(t,T)$ can vary with $T$, creating the forward curve. At $T = t$, $f(t,t) = r_t$ (the current short rate). The forward rate satisfies $P(t,T) = \\exp\\left(-\\int_t^T f(t,u)\\,du\\right)$, connecting discrete and continuous formulations. This is the building block for all continuous-time interest rate models.\n\n## Assumptions\n- The discount factor function $P(t,T)$ is differentiable in $T$\n- No arbitrage (monotonic decreasing $P$ with $T$)\n- The term structure is observable and smooth\n- Continuously compounded rates are used\n\n## Practical Use\nInstantaneous forward rates are fundamental to interest rate modeling—they are the inputs to HJM-type models. The HJM framework models the entire forward curve dynamics, not just a single short rate. Forward rates help price interest rate derivatives by providing the expected evolution of the term structure. Bootstrapping algorithms extract the forward curve from market instruments (deposits, futures, swaps). The forward curve's shape (upward, downward, humped) reveals market expectations and risk premiums. Understanding instantaneous forwards is essential for advanced derivatives pricing."}
{"title": "Cubic Spline Yield Curve Interpolation", "equation": "S''(t_i) = \\frac{3}{\\Delta t_i} \\left(\\frac{y_{i+1} - y_i}{\\Delta t_{i+1}} - \\frac{y_i - y_{i-1}}{\\Delta t_i}\\right) - \\frac{\\Delta t_{i+1}}{\\Delta t_i} S''(t_{i-1})", "category": "Fixed Income", "tags": ["cubic-spline", "yield-curve-interpolation", "curve-building", "term-structure-estimation", "-spline-coefficients", "discount-factors", "smooth-curve", "numerical-methods"], "note": "## Equation Variables\nCubic spline interpolation fits piecewise cubic polynomials between observed data points, ensuring continuous first and second derivatives at knot points.\n\n- **$S''(t_i)$**: Second derivative (curvature) of the spline at knot $t_i$\n- **$t_i$**: Maturity of the $i$-th observed point\n- **$y_i$**: Observed yield at maturity $t_i$\n- **$\\Delta t_i = t_i - t_{i-1}$**: Interval between consecutive knots\n\n## Interpretation\nThe cubic spline recurrence relation computes curvatures at each knot, propagating information from boundary conditions through the curve. At interior points, curvature depends on adjacent yield changes and the neighboring curvature. This tridiagonal system is solved efficiently using Thomas' algorithm. The resulting curvatures $S''(t_i)$ determine the cubic coefficients for each polynomial segment. The spline ensures $C^2$ continuity (continuous function, slope, and curvature) across all knots, producing a smooth, differentiable curve. Different boundary conditions (natural, clamped, not-a-knot) affect edge behavior. Natural splines set end curvatures to zero; clamped splines specify end slopes.\n\n## Assumptions\n- Market yields are observable at chosen knot points\n- The true yield curve is reasonably smooth\n- Sufficient data points exist for stable interpolation\n- Computational resources allow matrix operations\n\n## Practical Use\nCubic splines produce smooth discount factor curves from discrete market quotes (deposits, futures, swaps). The smooth curve enables accurate interpolation for any maturity, supporting pricing of non-standard instruments. Nelson-Siegel and Svensson parametric forms are alternatives but may not fit all curve shapes. Splines can overshoot (oscillate) with noisy data, requiring regularization. Bootstrap methods with linear or quadratic interpolation are simpler but less smooth. The choice of interpolation method affects derivatives (DV01, duration) and thus hedging accuracy. Robust curve building combines spline interpolation with market data calibration."}
{"title": "Continuous to Discrete Rate Conversion", "equation": "y_{discrete} = \\left(1 + \\frac{y_{continuous}}{m}\\right)^m - 1", "category": "Fixed Income", "tags": ["rate-conversion", "compounding-frequency", "continuous-compounding", "discrete-compounding", "yield-equivalence", "annual-percentage-rate", "effective-annual-rate", "interest-rate-terms"], "note": "## Equation Variables\nThis formula converts continuously compounded rates to periodically compounded rates, enabling comparison across different quoting conventions.\n\n- **$y_{discrete}$**: Periodically compounded (discrete) yield\n- **$y_{continuous}$**: Continuously compounded yield\n- **$m$**: Number of compounding periods per year\n\n## Interpretation\nContinuous compounding assumes interest is compounded an infinite number of times per year, at an instantaneous rate. Discrete compounding occurs $m$ times annually—$m=1$ for annual, $m=2$ for semi-annual, $m=4$ for quarterly, $m=12$ for monthly. The formula shows discrete rates are always greater than continuous rates for the same effective annual return. As $m \\to \\infty$, the discrete rate approaches the continuous rate: $\\lim_{m \\to \\infty} (1 + y_c/m)^m - 1 = e^{y_c} - 1$. The inverse conversion is $y_{continuous} = m \\ln(1 + y_{discrete})$. Markets use different conventions: LIBOR quoted semi-annually, money market rates semi-annually or quarterly, swaps annually.\n\n## Assumptions\n- Constant yields over the compounding period\n- No mid-period payments affecting returns\n- Compounding is regular and predictable\n- Conventions are consistently applied\n\n## Practical Use\nEssential for comparing rates quoted on different bases. Converting swap rates to continuous compounding enables model inputs. Understanding the conversion prevents misinterpretation of yields. Different instruments use different conventions: T-bills use discount yield, corporates use semi-annual yield, mortgages use monthly. The formula underpins yield curve construction when mixing instruments. Convexity adjustments account for different compounding when comparing rates. For pricing, all rates must be on the same compounding basis for consistency."}
{"title": "Bootstrapping the Zero Curve", "equation": "P_i = \\frac{C_i + F_i}{(1 + y_i)^{t_i}}", "category": "Fixed Income", "tags": ["bootstrapping", "zero-curve-construction", "curve-building", "discount-factors", "yield-curve-extraction", "par-rates", "spot-rates", "term-structure"], "note": "## Equation Variables\nBootstrapping iteratively extracts zero-coupon discount factors from coupon-bearing bond prices, building a zero curve from the shortest to longest maturity.\n\n- **$P_i$**: Clean price of the $i$-th bond in the bootstrap basket\n- **$C_i$**: Coupon payment at time $t_i$\n- **$F_i$**: Face value (principal) at maturity\n- **$y_i$**: Yield to maturity of the $i$-th bond\n- **$t_i$**: Time to the coupon/maturity date\n\n## Interpretation\nBootstrapping solves for discount factors sequentially: the shortest-maturity bond has a known discount factor $DF(t_1) = 1/(1+y_1)^{t_1}$. The next bond has coupons at $t_1$ and $t_2$, where $DF(t_1)$ is known. Solving $P_2 = C_2 DF(t_1) + (C_2 + F_2)DF(t_2)$ gives $DF(t_2)$. Continuing this process produces discount factors for all maturities. From discount factors, zero rates are computed as $z(t) = \\ln(1/DF(t))/t$. The bootstrap assumes each bond's yield reflects all shorter-term rates already extracted—this is the no-arbitrage condition. The method produces a consistent term structure from market-observable prices.\n\n## Assumptions\n- Market prices are arbitrage-free\n- Coupons are fixed and known\n- No default risk (high-quality bonds only)\n- Sufficient liquid instruments across maturities\n\n## Practical Use\nBootstrapping is the standard method for constructing the risk-free zero curve from deposits, futures, and swaps. The initial curve prices short-term instruments (deposits), then extends to longer tenors. Futures-implied rates require convexity adjustment before bootstrapping. Swap curves bootstrap from the par swap rate curve (par yields are interpolated). The resulting discount factors price any fixed income instrument. The bootstrap curve is the foundation for valuation, risk management, and relative value analysis. Accuracy depends on data quality and interpolation choices between knot points."}
{"title": "Repo Rate and Repo Spread", "equation": "r_{repo} = \\frac{F - P}{P} \\cdot \\frac{360}{D}", "category": "Fixed Income", "tags": ["repo-rate", "repo-spread", "repurchase-agreement", "collateralized-lending", "funding-rate", "haircut", "gc-repo", "special-repo"], "note": "## Equation Variables\nThe repo rate is the effective interest rate on a repurchase agreement, calculated from the price difference between sale and repurchase.\n\n- **$r_{repo}$**: Repo rate (annualized)\n- **$F$**: Forward (repurchase) price\n- **$P$**: Spot (sale) price\n- **$D$**: Repurchase term in days\n- **$360$**: Day count convention (banking convention)\n\nThe repo spread is $\\Delta r_{repo} = r_{repo} - r_{benchmark}$, typically the overnight index rate (SOFR, SONIA).\n\n## Interpretation\nA repurchase agreement (repo) is a collateralized loan: the seller (borrower) sells securities with an agreement to repurchase them later. The difference $F - P$ is the interest cost. The annualized rate enables comparison across different repo terms. The 360-day convention (ACT/360) is standard for money markets. GC (general collateral) repos use government securities as collateral; special repos use specific securities with demand exceeding supply, trading at lower rates (higher prices). The repo spread reflects credit risk, liquidity risk, and specialness of the collateral. Tight repo spreads indicate abundant liquidity; wide spreads signal stress.\n\n## Assumptions\n- Collateral is of acceptable quality (specified haircut)\n- No default during the repo term\n- Standard settlement procedures\n- Market participants are price-takers\n\n## Practical Use\nRepo rates benchmark secured funding costs for banks. The SOFR repo rate is the primary US secured overnight rate, replacing LIBOR for many applications. Repo spreads measure funding advantage of specific securities. The General Collateral (GC) repo rate curve shows aggregate funding conditions. Special spreads indicate demand for specific securities (e.g., on-the-run Treasuries). Repo markets are crucial for securities lending, monetary policy implementation, and short-selling. The 2020 repo market stress highlighted systemic importance of repo financing."}
{"title": "Asset Swap Spread", "equation": "ASW = \\frac{P_{bond} - P_{swap}}{ASW_{\\text{duration}}}", "category": "Fixed Income", "tags": ["asset-swap-spread", "relative-value", "bond-vs-swap", "credit-spread", "z-spread", "par-asset-swap", "market-spread", "fixed-income-analysis"], "note": "## Equation Variables\nThe asset swap spread (ASW) measures the yield difference between a bond and a par swap, isolating credit risk from interest rate risk.\n\n- **$ASW$**: Asset swap spread in basis points\n- **$P_{bond}$**: Market price of the bond\n- **$P_{swap}$**: Price of a synthetic fixed-rate bond created from the swap curve\n- **$ASW_{\\text{duration}}$**: Duration of the asset swap position\n\nFor a par asset swap: $ASW = \\text{Spread}$ such that $P_{bond} = \\text{Par}$ when discounted at swap rates plus $ASW$.\n\n## Interpretation\nAsset swaps isolate credit risk by combining a bond with a receive-fixed/pay-floating swap. The swap converts the bond's fixed coupons to floating rates, removing interest rate exposure. The spread above the swap curve represents pure credit compensation. A 100 bp ASW means the bond yields 1% more than comparable-maturity swaps—equivalent to a 100 bp credit spread. ASW differs from Z-spread because ASW uses par swaps as benchmark while Z-spread uses zero rates. Par asset swaps match the bond's coupon frequency; market asset swaps use swap curve dates. ASW enables comparing bonds with different coupons and maturities on a common basis.\n\n## Assumptions\n- Swap curve represents the risk-free benchmark\n- Liquidity in both bond and swap markets\n- No counterparty risk in the swap\n- Standard coupon and day count conventions\n\n## Practical Use\nAsset swap spreads are the primary relative value metric for investment grade bonds. A bond trading at tight ASW is rich relative to its peers; wide ASW suggests cheapness. ASW analysis drives relative value trades between bonds and swaps. The spread reflects credit quality, liquidity, and market conditions. Comparing ASW to OAS (option-adjusted spread) helps identify embedded options. During crises, ASW widens dramatically as credit risk premia increase. ASW time series reveal credit cycle dynamics. The metric is essential for credit portfolio management."}
{"title": "Z-Spread (Zero-Volatility Spread)", "equation": "P_{bond} = \\sum_{i=1}^{n} \\frac{CF_i}{(1 + y_{swap} + z)^{t_i}}", "category": "Fixed Income", "tags": ["z-spread", "zero-volatility-spread", "credit-spread-measure", "discounted-cash-flow", "spread-analysis", "risk-premium", "credit-valuation", "option-free-bonds"], "note": "## Equation Variables\nThe Z-spread is the constant basis point spread added to each point on the swap curve to discount a bond's cash flows to its market price.\n\n- **$P_{bond}$**: Market price of the bond\n- **$CF_i$**: Cash flow at time $t_i$\n- **$y_{swap}$**: Risk-free rate from swap curve at time $t_i$\n- **$z$**: Z-spread (constant across all maturities)\n- **$t_i$**: Time to cash flow\n\n## Interpretation\nThe Z-spread answers: \"How much yield must I add to every point on the risk-free curve to justify this bond's price?\" It is the single spread that, when added to each swap rate, discounts all cash flows to the market price. Unlike asset swap spreads (benchmarking against par swaps), Z-spread uses the entire zero curve. For option-free bonds, Z-spread equals the spread over Treasuries plus the swap spread. The spread compensates for credit risk, liquidity risk, and other premiums. A wider Z-spread indicates higher perceived risk. The Z-spread assumes parallel shifts only—no curve reshaping. For callable bonds, OAS adjusts Z-spread for optionality.\n\n## Assumptions\n- The spread is constant across all maturities\n- The bond is option-free (or OAS is used for callable bonds)\n- Cash flows are known with certainty\n- The swap curve represents the risk-free benchmark\n\n## Practical Use\nZ-spread is used for credit analysis, relative value, and portfolio construction. Comparing Z-spreads across bonds of similar maturity isolates credit quality differences. Tracking Z-spread changes over time monitors credit sentiment. Z-spread is an input to discounted cash flow models for bond valuation. The spread can be decomposed into expected loss, liquidity premium, and other components. Z-spread analysis identified mispricing during the 2008 crisis when Z-spreads diverged from fundamentals. For complex securities, OAS extends Z-spread by modeling optionality."}
{"title": "Credit Spread Decomposition", "equation": "\\text{Spread}_{total} = \\text{EL} + \\text{LP} + \\text{LIQ} + \\text{TAX} + \\text{OTHER}", "category": "Fixed Income", "tags": ["credit-spread-decomposition", "expected-loss", "liquidity-premium", "spread-components", "credit-risk-premium", "total-spread", "risk-factors", "spread-analysis"], "note": "## Equation Variables\nCredit spread decomposition breaks the total bond spread into its constituent risk premia, enabling deeper analysis of what drives yield differences.\n\n- **$\\text{Spread}_{total}$**: Total observed spread over risk-free rates\n- **$EL$**: Expected loss component ($EL = PD \\times LGD$)\n- **$LP$**: Loss given default (percentage of exposure)\n- **$LIQ$**: Liquidity premium for trading costs and price impact\n- **$TAX$**: Tax premium (e.g., tax-exempt municipal bonds)\n- **$OTHER$**: Other factors (convexity, supply/demand, model risk)\n\n## Interpretation\nThe total spread above risk-free rates compensates investors for multiple risks. Expected loss ($PD \\times LGD$) is the actuarially fair compensation for credit risk—average loss over many defaults. The risk premium ($Spread_{total} - EL$) compensates for uncertainty about actual losses (volatility risk). Liquidity premium reflects difficulty selling the bond without significant price impact. Tax effects can create negative spreads (e.g., municipal bonds yielding less than Treasuries after tax adjustment). Supply/demand imbalances cause temporary mispricing. Understanding decomposition helps identify when spreads are too tight (insufficient compensation) or too wide (panic selling). The decomposition is model-dependent—different assumptions yield different estimates.\n\n## Assumptions\n- Default probability and loss given default are estimable\n- Historical data approximates forward-looking expectations\n- Market prices reflect all available information\n- Risk premia are stable over time\n\n## Practical Use\nDecomposition guides investment decisions: wide spreads may indicate undercompensation for risk. Liquidity premia are highest during crises when markets freeze. Expected loss is the minimum reasonable spread for risky bonds. Comparing decomposition across issuers reveals relative value. The analysis helps structure portfolios with desired risk profiles. Regulators use decomposition to assess capital requirements for credit risk. The framework extends to structured finance where spread components include tranche-specific effects. Decomposition is essential for sophisticated credit analysis."}
{"title": "Bond Futures Pricing", "equation": "F = \\left(P + AI\\right) \\times \\left(1 + r_{c} \\cdot \\frac{D}{360}\\right) - C", "category": "Fixed Income", "tags": ["bond-futures", "futures-pricing", "cheapest-to-deliver", "conversion-factor", "basis", "future-price", "delivery-options", "interest-rate-futures"], "note": "## Equation Variables\nBond futures pricing incorporates the forward price of the underlying bond, including accrued interest, financing costs, and cash flows during the futures life.\n\n- **$F$**: Futures price\n- **$P$**: Spot clean price of the bond\n- **$AI$**: Accrued interest\n- **$r_{c}$**: Cost of carry rate (repo rate)\n- **$D$**: Days to futures delivery\n- **$C$**: Coupon income received before delivery\n\n## Interpretation\nThe futures price reflects the forward price of the deliverable bond. The spot price $P + AI$ is the full cost of owning the bond. Financing this position at the repo rate $r_c$ for $D$ days adds cost $P(1 + r_c D/360)$. Coupon payments $C$ received before delivery reduce the net cost. The delivery option makes futures pricing complex: the short position chooses which bond to deliver (CTD) and when to deliver. The conversion factor system normalizes prices across bonds with different coupons. Basis risk arises when the actual futures price differs from the theoretical forward price due to delivery options, liquidity, and model risk. Convergence to the spot price occurs as delivery approaches.\n\n## Assumptions\n- Short position delivers the cheapest-to-deliver bond\n- Sufficient liquidity for repo financing at quoted rates\n- No delivery option exercise uncertainty\n- Clean convergence between futures and spot prices\n\n## Practical Use\nTreasury bond futures are among the most liquid interest rate derivatives. The CTD analysis determines which bond the market expects to be delivered. Convexity adjustments convert futures rates to forward rates for term structure modeling. Basis trading exploits price differences between futures and cash bonds. Delivery options create value for the short position (timing options) and long position (quality options). The pricing formula underpins hedging strategies and relative value analysis. Understanding futures pricing is essential for rates traders, portfolio managers, and risk managers."}
{"title": "Option-Adjusted Spread (OAS)", "equation": "P_{market} = \\sum_{i=1}^{n} \\frac{\\mathbb{E}[CF_i]}{(1 + y_{swap} + OAS)^{t_i}}", "category": "Fixed Income", "tags": ["option-adjusted-spread", "oas", "embedded-options", "credit-spread", "callable-bonds", "mortgage-backed-securities", "spread-measurement", "valuation"], "note": "## Equation Variables\nThe option-adjusted spread adjusts the Z-spread for the value of embedded options, providing a cleaner measure of credit compensation.\n\n- **$P_{market}$**: Market price of the bond\n- **$\\mathbb{E}[CF_i]$**: Expected cash flow at time $t_i$ (incorporating optionality)\n- **$y_{swap}$**: Risk-free swap rate at time $t_i$\n- **$OAS$**: Option-adjusted spread in basis points\n- **$t_i$**: Time to cash flow\n\n## Interpretation\nFor option-free bonds, OAS equals the Z-spread. For callable bonds, OAS subtracts the option value: $OAS = Z-spread - \\text{Option Value}$. The option value reflects the issuer's right to call the bond, which benefits the issuer at the bondholder's expense. Callable bonds trade at lower prices (higher yields) than equivalent option-free bonds—the difference is the option cost. OAS uses a model to simulate interest rate paths and value the option embedded in the bond. The spread is \"option-adjusted\" because it removes the option's impact, isolating pure credit compensation. A lower OAS means tighter spreads (richer prices); higher OAS indicates cheaper valuation.\n\n## Assumptions\n- Interest rate model accurately captures volatility and dynamics\n- Option value is correctly estimated via simulation\n- Cash flow expectations reflect realistic interest rate paths\n- The swap curve represents the risk-free benchmark\n\n## Practical Use\nOAS is the standard spread measure for callable bonds, mortgage-backed securities, and other instruments with embedded options. Comparing OAS across securities with different optionality isolates credit quality. MBS OAS analysis incorporates prepayment modeling, which is complex but essential. The OAS time series tracks credit market conditions for structured products. Relative value analysis uses OAS to identify mispriced securities. The spread is used in portfolio construction, risk management, and performance attribution. OAS analysis is critical for understanding mortgage REITs and other interest rate-sensitive strategies."}
{"title": "Forward Price of a Coupon-Bearing Bond", "equation": "F(t,T) = \\frac{P(t) - AI(t)}{1 + r_c (T-t)} + AI(T) - \\sum_{i} C_i \\cdot \\frac{1 + r_c (T-t_i)}{1 + r_c (T-t)}", "category": "Fixed Income", "tags": ["forward-price", "bond-forward", "cost-of-carry", "forward-contract", "coupon-bearing", "accrued-interest", "repo-rate", "delivery-price"], "note": "## Equation Variables\nThe forward price of a coupon-bearing bond accounts for spot price, accrued interest, financing costs, and coupons paid before delivery.\n\n- **$F(t,T)$**: Forward price at time $t$ for delivery at $T$\n- **$P(t)$**: Spot clean price at time $t$\n- **$AI(t)$**: Accrued interest at time $t$\n- **$AI(T)$**: Accrued interest at delivery time $T$\n- **$r_c$**: Cost of carry rate (repo rate)\n- **$T-t$**: Time to delivery\n- **$C_i$**: Coupons paid between $t$ and $T$\n- **$t_i$**: Payment dates for coupons $C_i$\n\n## Interpretation\nThe forward price is the spot price adjusted for carrying costs (financing) and carrying benefits (coupons). Financing the full price $P(t) + AI(t)$ costs $r_c(T-t)$. Coupon payments received before delivery reduce net carrying costs. The forward price exceeds the spot price when coupons are small relative to financing costs (contango). When coupons exceed financing costs, the forward trades below spot (backwardation). The formula ensures no arbitrage: the forward payoff equals the net cost of holding the bond to delivery. Forward contracts on bonds enable locking in future purchase prices and hedging interest rate exposure without immediate cash outlay.\n\n## Assumptions\n- Continuous compounding for simplicity (discrete adjustments possible)\n- Known coupon schedule\n- Constant repo rate $r_c$\n- No counterparty risk\n- Standard settlement conventions\n\n## Practical Use\nForward contracts on bonds are used for hedging, speculation, and tactical asset allocation. They provide leverage (small initial margin) and avoid settlement costs of spot transactions. Portfolio managers use forwards to adjust duration without trading cash bonds. The forward curve provides insights into expected future prices and financing conditions. Combining forwards with swaps creates synthetic positions. The pricing formula underpins forward curve construction from spot curves. Understanding bond forwards is essential for rates trading and portfolio management."}
{"title": "Interest Rate Parity (Bond Futures)", "equation": "F = (S + AI_S) \\cdot (1 + r_d \\cdot \\Delta t) - AI_F - \\text{Cash Flows}", "category": "Fixed Income", "tags": ["interest-rate-parity", "covered-interest-parity", "futures-arbitrage", "currency-hedged", "bond-futures", "forward-futures-parity", "cost-of-carry", "arbitrage-free-pricing"], "note": "## Equation Variables\nInterest rate parity relates spot and forward prices across currencies, essential for pricing currency-hedged bond futures and international fixed income positions.\n\n- **$F$**: Forward/futures price\n- **$S$**: Spot exchange rate (domestic per foreign)\n- **$AI_S$**: Accrued interest in spot currency\n- **$r_d$**: Domestic interest rate\n- **$r_f$**: Foreign interest rate\n- **$\\Delta t$**: Time to delivery\n- **$AI_F$**: Accrued interest at delivery\n- **$\\text{Cash Flows}$**: Coupons, dividends, or other income\n\nThe covered interest parity formula is: $F = S \\cdot \\frac{1 + r_d \\Delta t}{1 + r_f \\Delta t}$\n\n## Interpretation\nInterest rate parity ensures no arbitrage between spot forex, forward forex, and interest rates across currencies. If domestic rates exceed foreign rates, the domestic currency trades at a forward discount (lower forward than spot). The parity condition holds when hedging costs equal interest differentials. Deviations create arbitrage opportunities: borrowing in the low-rate currency, converting to high-rate currency, investing, and locking the forward rate. In bond futures, parity applies when comparing domestic and foreign bonds of similar risk. The carry trade exploits deviations from uncovered interest rate parity, accepting exchange rate risk for yield enhancement.\n\n## Assumptions\n- Capital mobility and frictionless markets\n- Same credit quality across currencies\n- Known interest rates and exchange rates\n- No transaction costs or taxes\n\n## Practical Use\nCIP deviations are rare in liquid markets but emerged during the 2020 crisis, indicating funding stress. Hedging international bond exposure requires CIP calculations. The carry trade strategy involves borrowing in low-yield currencies and investing in high-yield currencies. Basis swap pricing reflects CIP deviations. Global fixed income portfolios use parity analysis for country allocation. The relationship helps forecast currency movements and identify mispriced forwards. Understanding CIP is essential for global bond trading and currency hedging."}
{"title": "Bond Duration with Embedded Options", "equation": "D_{effective} = \\frac{1}{P} \\sum_{i=1}^{n} t_i \\cdot \\mathbb{E}[CF_i] \\cdot DF(t_i)", "category": "Fixed Income", "tags": ["effective-duration", "option-adjusted-duration", "embedded-options", "duration-measurement", "cash-flow-sensitivity", "yield-change-impact", "callable-bonds", "mbs-duration"], "note": "## Equation Variables\nEffective duration measures price sensitivity for bonds with embedded options by computing price changes at different yield levels.\n\n- **$D_{effective}$**: Effective duration\n- **$P$**: Current bond price\n- **$t_i$**: Time to expected cash flow $i$\n- **$\\mathbb{E}[CF_i]$**: Expected cash flow at time $t_i$\n- **$DF(t_i)$**: Discount factor for time $t_i$\n\nEffective duration is calculated as: $D_{eff} = \\frac{P_{-} - P_{+}}{2 \\cdot P \\cdot \\Delta y}$ where $P_{-}$ and $P_{+}$ are prices at yields $y - \\Delta y$ and $y + \\Delta y$.\n\n## Interpretation\nUnlike modified duration (for option-free bonds), effective duration accounts for changing cash flows when yields change. For callable bonds, lower yields increase call probability, reducing duration. The calculation prices the bond at two yield levels (+/- 25-100 bp), measures price changes, and divides by total yield shift. This captures the option effect: as yields fall, the bond behaves more like a shorter-maturity instrument (higher coupons, earlier maturity). The formula weights cash flows by their expected values at the new yield levels, not the current levels. Effective duration is always less than or equal to modified duration for callable bonds, reflecting the embedded option's value.\n\n## Assumptions\n- Interest rate model captures yield curve dynamics\n- Sufficient yield shift to observe price changes\n- Cash flow projections are model-consistent\n- Parallel yield curve shifts\n\n## Practical Use\nEffective duration is essential for mortgage-backed securities, callable corporates, and any bond with optionality. MBS duration is highly sensitive to prepayment rates, which depend on interest rates. Portfolio duration management requires effective duration for accurate exposure measurement. Comparing effective and modified duration reveals option value: large differences indicate significant embedded option cost. The metric is used in risk reports, VaR calculations, and regulatory reporting. MBS investors monitor duration closely as prepayments accelerate when rates fall, potentially shortening duration unexpectedly."}
{"title": "Bond Convexity with Embedded Options", "equation": "C_{effective} = \\frac{P_{-} + P_{+} - 2P}{P \\cdot (\\Delta y)^2}", "category": "Fixed Income", "tags": ["effective-convexity", "option-adjusted-convexity", "embedded-options", "curvature-measure", "price-yield-curvature", "callable-bonds", "mbs-convexity", "option-cost"], "note": "## Equation Variables\nEffective convexity measures curvature of the price-yield relationship for bonds with embedded options, capturing the asymmetric response to yield changes.\n\n- **$C_{effective}$**: Effective convexity\n- **$P$**: Current bond price at yield $y$\n- **$P_{-}$**: Price at yield $y - \\Delta y$\n- **$P_{+}$**: Price at yield $y + \\Delta y$\n- **$\\Delta y$**: Yield shift (typically 100 bp)\n\n## Interpretation\nFor option-free bonds, effective convexity equals modified convexity. For callable bonds, convexity differs in up and down markets. When yields rise, the call option moves out of the money, and convexity increases (bond behaves like longer maturity). When yields fall, the call option becomes more valuable, and convexity decreases or becomes negative. This asymmetric convexity—high when rates rise, low when rates fall—harms investors. Effective convexity captures this by measuring actual price changes at shifted yields rather than using the analytical formula. The formula is symmetric only if the yield shift is small. Large shifts may reveal asymmetric behavior. Negative effective convexity is characteristic of callable bonds at low yields.\n\n## Assumptions\n- Parallel yield curve shifts\n- Sufficient yield shift to observe convexity\n- Model prices at shifted yields are accurate\n- Cash flows recomputed at new yields\n\n## Practical Use\nEffective convexity analysis reveals option cost: callable bonds sacrifice convexity for higher yields. MBS investors analyze convexity exposure as a risk factor. Duration alone understates risk when convexity is asymmetric. Comparing effective and modified convexity quantifies the option's impact. High convexity is valuable in volatile rate environments. The metric informs portfolio construction and hedging strategies. MBS duration and convexity are both option-adjusted, reflecting prepayment modeling complexity. Understanding effective convexity is crucial for managing portfolios with embedded options."}
{"title": "Value at Risk (Parametric)", "equation": "\\text{VaR}_{\\alpha} = \\mu - z_{\\alpha} \\cdot \\sigma", "category": "Risk Metrics", "tags": ["var", "risk-measure", "parametric", "normal-distribution", "tail-risk", "quantile", "confidence-level", "regulatory"], "note": "## Equation Variables\nValue at Risk (VaR) is the most widely used market risk measure in finance, quantifying the potential loss in value of a portfolio over a defined period for a given confidence level.\n\n- **$\\text{VaR}_{\\alpha}$**: Value at Risk at confidence level $\\alpha$ (e.g., 95% or 99%). This represents the threshold loss level such that the probability of exceeding this loss is $1-\\alpha$.\n- **$\\mu$**: Expected return (or mean) of the portfolio value change distribution.\n- **$z_{\\alpha}$**: $\\alpha$-quantile of the standard normal distribution (e.g., 1.645 for 95%, 2.326 for 99%).\n- **$\\sigma$**: Standard deviation (volatility) of portfolio returns.\n\n## Interpretation\nVaR answers the question: \"What is my worst-case loss at confidence level $\\alpha$ under normal market conditions?\" For a 95% VaR of $1M, there is a 5% chance of losing more than $1M over the horizon. The parametric method assumes normally distributed returns, which enables analytical computation but may underestimate tail risk. This method is also known as the variance-covariance approach because it relies on the mean and covariance of returns.\n\n## Assumptions\n- Returns are normally distributed (log-normal for prices)\n- Volatility and correlation are constant over the horizon\n- Linear approximation adequate for the portfolio\n- No extreme events or regime changes\n- Portfolio positions remain constant during the horizon\n\n## Practical Use\nVaR is a regulatory requirement (Basel Accords for banks), used for setting risk limits, capital allocation, and risk reporting. It provides a single number that summarizes total portfolio risk. Limitations include: doesn't capture loss magnitude beyond VaR, assumes normal distribution (underestimates fat tails commonly observed in markets), and is not coherent (fails subadditivity). Expected Shortfall addresses some of these limitations by averaging losses beyond the VaR threshold."}
{"title": "Value at Risk (Historical Simulation)", "equation": "\\text{VaR}_{\\alpha} = -Q_{\\alpha}(R)", "category": "Risk Metrics", "tags": ["var", "risk-measure", "historical-simulation", "empirical-distribution", "non-parametric", "quantile", "tail-risk", "backtesting"], "note": "## Equation Variables\nHistorical simulation VaR calculates risk measures using the empirical distribution of past returns, making no distributional assumptions about return patterns.\n\n- **$\\text{VaR}_{\\alpha}$**: Value at Risk at confidence level $\\alpha$ (e.g., 95% or 99%), representing the $\\alpha$-th percentile loss.\n- **$Q_{\\alpha}(R)$**: The $\\alpha$-quantile function applied to the historical return distribution $R$, returning the $\\alpha$-th percentile return.\n- **$R$**: Vector or distribution of historical portfolio returns over the lookback period.\n- **Negative sign**: Converts the $\\alpha$-th percentile return to a loss amount (since losses are negative returns).\n\n## Interpretation\nThis method directly uses historical data to estimate VaR without assuming any distribution. If we have 1000 days of historical returns and want 95% VaR, we find the 50th worst return (since $1-0.95 = 0.05$, and $1000 \\times 0.05 = 50$). The 50th worst return represents the threshold such that 95% of historical observations were better (less negative). This approach naturally captures fat tails, volatility clustering, and non-normal return distributions present in actual market data.\n\n## Assumptions\n- Historical returns are representative of future return distribution\n- Market conditions and portfolio composition remain similar\n- Sufficient historical data available for statistical significance\n- No structural breaks between historical and future periods\n- Lookback period appropriately chosen (balancing stability vs. relevance)\n\n## Practical Use\nHistorical simulation is widely used because it's intuitive, doesn't require distributional assumptions, and automatically incorporates all empirical features of returns including fat tails and skewness. It's particularly popular in risk management departments for its transparency and ease of explanation to non-technical stakeholders. Drawbacks include: requires large datasets, may miss unprecedented events not in history, and can be sensitive to lookback period selection."}
{"title": "Black-Scholes Delta", "equation": "\\Delta = \\frac{\\partial V}{\\partial S} = N(d_1)", "category": "Risk Metrics", "tags": ["delta", "black-scholes", "option-greeks", "price-sensitivity", "hedge-ratio", "n(d1)", "moneyness", "first-derivative"], "note": "## Equation Variables\nDelta measures the first-order sensitivity of an option's price to changes in the underlying asset price, representing the hedge ratio needed to create a risk-neutral position.\n\n- **$\\Delta$**: Option Delta, the rate of change of option value with respect to underlying price.\n- **$V$**: Option value (call or put price).\n- **$S$**: Current price of the underlying asset.\n- **$N(\\cdot)$**: Cumulative standard normal distribution function.\n- **$d_1$**: Dimensionless quantity combining stock price, strike, time, volatility, and interest rate.\n- **$d_1 = \\frac{\\ln(S/K) + (r + \\sigma^2/2)T}{\\sigma\\sqrt{T}}$** where:\n  - $K$ = strike price\n  - $r$ = risk-free interest rate\n  - $\\sigma$ = volatility of underlying\n  - $T$ = time to expiration\n\n## Interpretation\nDelta ranges from 0 to 1 for calls and -1 to 0 for puts. A call option with $\\Delta = 0.5$ means the option price increases $0.50 for every $1 increase in the stock price. Delta of 0.5 also means you need 2 options to hedge 1 share of stock (hedge ratio). Deep in-the-money options approach Delta of 1 (calls) or -1 (puts), behaving almost like the underlying. At-the-money options typically have Delta near 0.5. Delta changes as the underlying moves, requiring dynamic hedging to maintain neutrality.\n\n## Assumptions\n- Underlying follows geometric Brownian motion with constant volatility\n- No arbitrage opportunities exist\n- Risk-free rate is constant over option life\n- No dividends paid during option life (for basic formula)\n- Markets are efficient and continuous\n- European option exercise (can only expire at maturity)\n\n## Practical Use\nDelta is the most important Greek for hedging and risk management. Traders use Delta to create Delta-neutral portfolios where gains in one position offset losses in another. Delta hedging requires continuous rebalancing as Delta changes (Gamma effect). Delta also represents the risk-neutral probability of the option expiring in-the-money under the Black-Scholes pricing measure, providing an intuitive probability interpretation."}
{"title": "Black-Scholes Theta (Call Option)", "equation": "\\Theta = \\frac{\\partial V}{\\partial T} = -\\frac{S_0 N'(d_1) \\sigma}{2\\sqrt{T}} - r K e^{-rT} N(d_2)", "category": "Risk Metrics", "tags": ["theta", "black-scholes", "option-greeks", "time-decay", "expiration-risk", "n(d2)", "holding-cost", "time-value"], "note": "## Equation Variables\nTheta measures the rate of option value decay as time passes, representing the \"time decay\" or \"holding cost\" of maintaining an option position.\n\n- **$\\Theta$**: Theta, usually expressed as change in option value per day (often reported divided by 365).\n- **$V$**: Option value or premium.\n- **$T$**: Time to expiration (in years for the formula, typically converted to days for reporting).\n- **$S_0$**: Current underlying price.\n- **$N'(d_1)$**: Standard normal PDF at $d_1$.\n- **$\\sigma$**: Volatility of underlying.\n- **$r$**: Risk-free interest rate.\n- **$K$**: Strike price.\n- **$N(d_2)$**: Cumulative normal at $d_2$ where $d_2 = d_1 - \\sigma\\sqrt{T}$.\n- **$e^{-rT}$**: Discount factor for present value calculation.\n\n## Interpretation\nTheta is almost always negative for long option positions, meaning options lose value as expiration approaches (time decay). The first term represents the decay of time value due to reduced time for favorable price moves (often called \"volatility theta\"). The second term is the cost of carry for calls, representing the present value of strike payment that must be funded until expiration. At-the-money options experience maximum Theta (greatest daily decay), while deep in/out-of-the-money options have lower Theta. Theta becomes more negative as expiration approaches, especially for at-the-money options (Theta \"explosion\").\n\n## Assumptions\n- Time passes uniformly and deterministically\n- Volatility remains constant over the decay period\n- No dividends or other cash flows from underlying during decay\n- Trading is continuous and no gaps occur\n- Option cannot be exercised early (European style)\n\n## Practical Use\nTheta is the \"enemy\" of long option buyers and \"friend\" of option sellers. Option sellers collect Theta as premium decay while bearing the risk of adverse moves. Understanding Theta helps in strategy selection: income strategies (selling options) profit from Theta, while directional strategies (buying options) must overcome Theta to profit. Calendar spreads exploit differences in Theta across expirations. Theta should always be considered alongside Gamma - high Theta strategies often have high Gamma risk requiring careful management."}
{"title": "Black-Scholes Rho", "equation": "\\rho = \\frac{\\partial V}{\\partial r} = K T e^{-rT} N(d_2)", "category": "Risk Metrics", "tags": ["rho", "black-scholes", "option-greeks", "interest-rate-sensitivity", "discount-factor", "carry-cost", "rate-risk", "call-rho"], "note": "## Equation Variables\nRho measures the sensitivity of option prices to changes in the risk-free interest rate, capturing the present value effect of funding costs or yields.\n\n- **$\\rho$**: Rho, the change in option value per 1 percentage point change in interest rates.\n- **$V$**: Option value or premium.\n- **$r$**: Risk-free interest rate (annual continuously compounded).\n- **$K$**: Strike price of the option.\n- **$T$**: Time to expiration in years.\n- **$N(d_2)$**: Cumulative standard normal distribution at $d_2$ where $d_2 = d_1 - \\sigma\\sqrt{T}$.\n- **$e^{-rT}$**: Discount factor reducing the present value of the strike.\n\n## Interpretation\nFor call options, Rho is positive because higher interest rates increase the present value discount, making future strike payment cheaper in present value terms, which benefits call holders. For put options, Rho is negative (given by $-K T e^{-rT} N(-d_2)$) because higher rates reduce the present value of the put's payoff. The magnitude of Rho increases with time to expiration (longer discounting period) and with moneyness (in-the-money options have more rate sensitivity). In low-rate environments, Rho is typically small and often ignored in practical trading, but can become significant when rates change substantially.\n\n## Assumptions\n- Risk-free rate is known and constant over option life\n- A single risk-free rate applies across all maturities (flat yield curve)\n- Interest rate changes affect all instruments equally\n- No credit spread or funding differentials\n- Option is European style\n\n## Practical Use\nRho is generally the least important Greek for most trading strategies because interest rates change slowly and predictably. However, in certain environments (rising rate cycles, carry trades, long-dated options), Rho can become significant. Interest rate derivatives (caps, floors, swaptions) have much larger Rho exposure. For equity options, the dividend yield $q$ is often more important than Rho, and the formula generalizes by replacing $r$ with $r-q$ (cost of carry adjustment). Traders should monitor Rho when expecting rate decisions or implementing strategies involving long-dated options."}
{"title": "Vanna (Cross Gamma)", "equation": "\\text{Vanna} = \\frac{\\partial^2 V}{\\partial S \\partial \\sigma} = \\frac{\\partial \\Delta}{\\partial \\sigma} = N'(d_1) \\frac{d_2}{\\sigma}", "category": "Risk Metrics", "tags": ["vanna", "option-greeks", "cross-gamma", "volatility-risk", "delta-vega", "second-derivative", "price-vol-correlation", "black-scholes"], "note": "## Equation Variables\nVanna measures the cross-sensitivity of option prices to simultaneous changes in underlying price and volatility, capturing the interaction between Delta and Vega exposures.\n\n- **Vanna**: Rate of change of Delta with respect to volatility (equivalently, rate of change of Vega with respect to underlying).\n- **$V$**: Option value.\n- **$S$**: Underlying price.\n- **$\\sigma$**: Volatility.\n- **$\\Delta$**: Option Delta.\n- **$N'(d_1)$**: Standard normal probability density function at $d_1$.\n- **$d_2$**: Second Black-Scholes parameter where $d_2 = d_1 - \\sigma\\sqrt{T}$.\n- **$\\sigma$**: Volatility in the denominator normalizing the effect.\n\n## Interpretation\nVanna captures the intuitive fact that Delta changes when volatility changes. Specifically, when volatility increases, at-the-money options become more likely to finish in-the-money, increasing their Delta toward 0.5. Similarly, when the underlying price changes, the option's sensitivity to volatility (Vega) changes. Vanna is typically small for deep in/out-of-the-money options and largest for at-the-money options with moderate time to expiration. Understanding Vanna is crucial for understanding why Delta-hedged portfolios can still experience P&L from volatility changes even when hedged for pure Delta.\n\n## Assumptions\n- Black-Scholes model assumptions apply\n- Volatility and price changes are independent (this is what Vanna measures the cross-effect of)\n- No jumps or discontinuities in price or volatility paths\n- Constant volatility over the option life\n- European exercise style\n\n## Practical Use\nVanna is important for understanding P&L attribution in Delta-hedged option portfolios. A Delta-hedged, Vega-neutral portfolio can still lose money if price and volatility move together in the \"wrong\" direction. For example, if a portfolio has positive Vanna, a simultaneous price increase and volatility decrease (common in equity markets during rallies) will create losses. Vanna risk is inherently linked to the volatility surface - different strikes and expiries have different Vanna, creating cross-gamma effects when the vol surface shifts."}
{"title": "Volga (Vega Gamma)", "equation": "\\text{Volga} = \\frac{\\partial^2 V}{\\partial \\sigma^2} = S_0 N'(d_1) \\sqrt{T} \\, d_1 d_2", "category": "Risk Metrics", "tags": ["volga", "option-greeks", "vega-gamma", "volatility-convexity", "second-order-vol", "vomma", "black-scholes", "vol-surface"], "note": "## Equation Variables\nVolga (also called Vomma) measures the convexity of option value with respect to volatility, showing how Vega itself changes as volatility changes.\n- **Volga**: Rate of change of Vega with respect to volatility, or second derivative of option value with respect to volatility.\n- **$V$**: Option value.\n- **$\\sigma$**: Volatility.\n- **$S_0$**: Current underlying price.\n- **$N'(d_1)$**: Standard normal PDF at $d_1$.\n- **$T$**: Time to expiration.\n- **$d_1$**: First Black-Scholes parameter combining moneyness and time-vol.\n- **$d_2$**: Second Black-Scholes parameter where $d_2 = d_1 - \\sigma\\sqrt{T}$.\n\n## Interpretation\nVolga is always positive, meaning Vega increases with volatility for all options. This positive convexity means options become more sensitive to volatility changes as volatility itself increases. At-the-money options typically have the highest Volga because small volatility changes have the largest impact on options near the money where probability mass is concentrated. Volga decay is similar to Gamma decay - Volga increases as expiration approaches (for at-the-money options), making short-dated options more sensitive to volatility changes. A Volga of 0.1 means Vega increases by 0.1 for every 1 percentage point increase in volatility.\n\n## Assumptions\n- Volatility surface is smooth and differentiable\n- Volatility changes are small enough for second-order approximation\n- No volatility jumps or regime changes\n- Standard Black-Scholes model applies\n- No correlation between volatility and underlying returns\n\n## Practical Use\nVolga is crucial for understanding volatility risk beyond simple Vega exposure. Long volatility positions benefit from Volga because they gain from both volatility increases and the increasing sensitivity to further volatility changes (volatility of volatility). Short volatility positions face the risk that Vega increases when volatility spikes, amplifying losses. Trading the \"vol of vol\" is essentially trading Volga. Options with similar Vega can have very different Volga, so pure Vega-neutral portfolios can still have significant Volga exposure requiring careful management."}
{"title": "Charm (Delta Decay)", "equation": "\\text{Charm} = \\frac{\\partial \\Delta}{\\partial T} = -N'(d_1) \\left[ \\frac{d_2 \\sigma}{2\\sqrt{T}} + \\frac{r N(d_2)}{N'(d_1)} \\right]", "category": "Risk Metrics", "tags": ["charm", "option-greeks", "delta-decay", "time-decay", "delta-bleed", "dvega/dtime", "expiration-dynamics", "black-scholes"], "note": "## Equation Variables\nCharm measures the rate of change of Delta with respect to time, capturing how an option's hedge ratio \"bleeds\" toward 0 (for calls) or toward -1 (for puts) as expiration approaches.\n\n- **Charm**: Also called \"Delta decay\" or \"DvegaDtime\", measures Delta change per unit time.\n- **$\\Delta$**: Option Delta (hedge ratio).\n- **$T$**: Time to expiration.\n- **$N'(d_1)$**: Standard normal probability density at $d_1$.\n- **$d_2$**: Second Black-Scholes parameter.\n- **$\\sigma$**: Volatility.\n- **$r$**: Risk-free interest rate.\n- **$N(d_2)$**: Cumulative normal at $d_2$.\n\n## Interpretation\nCharm tells Delta-hedgers how much their hedge ratio will change as time passes, even if the underlying price stays constant. For call options, Charm is typically negative, meaning Delta decreases (moves toward 0) as expiration approaches. For example, a call with Delta 0.60 today might have Delta 0.55 tomorrow if Charm is -0.05, requiring the trader to sell 0.05 shares to maintain Delta-neutrality. At-the-money options have the most negative Charm near expiration because their Delta changes most rapidly as the option approaches maturity. Ignoring Charm leads to \"Delta slippage\" and unexpected P&L in hedged portfolios.\n\n## Assumptions\n- Time passes while underlying price remains constant\n- Volatility and interest rates are constant\n- No dividends occur during the time decay period\n- Option exercise is European (no early assignment risk)\n- Black-Scholes assumptions hold throughout the decay period\n\n## Practical Use\nCharm is essential for managing Delta-hedged portfolios over time. Traders must \"pay\" Charm through continuous rebalancing - selling shares as call Deltas decay (if long calls) or buying shares as put Deltas increase (if long puts). This rebalancing cost is a significant component of the \"cost of carry\" for hedged option strategies. Charm interacts with other Greeks: Charm is often combined with Vanna in the \"Vanna-Charm\" matrix for more complete P&L attribution. Near expiration, Charm becomes very large in magnitude for at-the-money options, making last-day hedging particularly costly and critical."}
{"title": "Information Ratio", "equation": "\\text{IR} = \\frac{R_p - R_b}{\\text{TE}} = \\frac{\\alpha}{\\text{TE}}", "category": "Risk Metrics", "tags": ["information-ratio", "risk-adjusted-return", "performance-measurement", "alpha", "tracking-error", "active-management", "manager-evaluation", "benchmark-relative"], "note": "## Equation Variables\nThe Information Ratio measures risk-adjusted excess returns relative to a benchmark, quantifying how much active return is generated per unit of tracking error risk.\n\n- **IR**: Information Ratio, measuring active management skill and consistency.\n- **$R_p$**: Portfolio return (often annualized).\n- **$R_b$**: Benchmark return (typically a market index).\n- **$\\alpha$**: Alpha or active return, representing return above the benchmark.\n- **TE**: Tracking Error, the standard deviation of excess returns $(R_p - R_b)$.\n\n## Interpretation\nThe Information Ratio answers: \"How much excess return do I generate per unit of active risk taken?\" An IR of 0.5 means the manager generates 0.5% excess return for every 1% of tracking error. Higher IRs indicate more efficient active management. IRs above 0.5 are generally considered good, above 1.0 are excellent, and above 2.0 are exceptional. The IR is closely related to the Sharpe Ratio but replaces the risk-free rate with the benchmark return. The \"information coefficient\" (correlation between predictions and returns) times the \"breadth\" (number of independent forecasts) determines IR according to Grinold's fundamental law of active management: IR = IC × √Breadth.\n\n## Assumptions\n- Returns are normally distributed (for statistical interpretation)\n- Benchmark is appropriate and investable\n- Tracking error is measured over a sufficiently long period\n- Returns are excessable (benchmark can be achieved)\n- Time period is representative of typical conditions\n\n## Practical Use\nThe Information Ratio is the primary metric for evaluating active fund managers and comparing active strategies. Institutional investors use IR to set targets for external managers and allocate capital to internal teams. An IR of 0.5 with 2% tracking error means a target of 1% active return. The IR can be decomposed for attribution analysis: sector allocation IR, security selection IR, etc. Long time series are needed for reliable IR estimation due to the noise in tracking error estimates, especially for low-tracking-error strategies."}
{"title": "Sharpe Ratio", "equation": "\\text{Sharpe} = \\frac{R_p - R_f}{\\sigma_p}", "category": "Risk Metrics", "tags": ["sharpe-ratio", "risk-adjusted-return", "performance-measurement", "excess-return", "total-risk", "capital-allocation", "benchmark-free", "william-sharpe"], "note": "## Equation Variables\nThe Sharpe Ratio measures risk-adjusted returns by comparing excess returns to total portfolio volatility, providing a benchmark-free assessment of risk efficiency.\n\n- **Sharpe**: Sharpe Ratio or Reward-to-Volatility Ratio.\n- **$R_p$**: Portfolio return (typically annualized).\n- **$R_f$**: Risk-free rate (often T-bill rate or proxy).\n- **$R_p - R_f$**: Excess return or risk premium.\n- **$\\sigma_p$**: Standard deviation of portfolio returns (total risk).\n\n## Interpretation\nThe Sharpe Ratio answers: \"How much excess return do I earn per unit of total risk taken?\" A Sharpe Ratio of 1.0 means the portfolio earns 1 unit of excess return for each unit of volatility. Historically, equity markets have Sharpe ratios around 0.3-0.5, while hedge fund strategies might target 0.5-1.0. The Sharpe Ratio enables comparison across assets with different risk levels - a high-return, high-volatility portfolio can have the same Sharpe as a low-return, low-volatility portfolio. Developed by William Sharpe (1994 Nobel laureate), it has become the standard metric for evaluating portfolio performance and setting risk budgets.\n\n## Assumptions\n- Returns are normally distributed (for proper risk interpretation)\n- Risk-free rate is appropriate for the portfolio's currency and duration\n- Volatility is measured over a representative period\n- Risk-free rate is available and liquid (no significant credit risk)\n- Returns are arithmetic (not geometric) for calculation\n\n## Practical Use\nThe Sharpe Ratio is used for portfolio comparison, manager selection, and capital allocation decisions. Risk parity strategies often target equal risk contribution, implicitly optimizing Sharpe. Modern Portfolio Theory uses Sharpe for the Capital Market Line. However, critics note that Sharpe can be manipulated through leverage or by using smoothed/volatility-adjusted returns. Alternatives like the Sortino Ratio address some limitations by focusing only on downside risk. Sharpe should be calculated using consistent methodology (e.g., annualized returns, rolling windows) for meaningful comparisons."}
{"title": "Sortino Ratio", "equation": "\\text{Sortino} = \\frac{R_p - R_f}{\\sigma_{\\text{down}}}}", "category": "Risk Metrics", "tags": ["sortino-ratio", "risk-adjusted-return", "downside-risk", "performance-measurement", "semi-variance", "target-return", "asymmetric-risk", "frank-sortino"], "note": "## Equation Variables\nThe Sortino Ratio improves upon the Sharpe Ratio by using only downside volatility, focusing on the risk that matters most to investors: losses rather than upside volatility.\n\n- **Sortino**: Sortino Ratio or Downside Risk-adjusted return.\n- **$R_p$**: Portfolio return (typically annualized).\n- **$R_f$**: Target return or minimum acceptable return (often risk-free rate).\n- **$R_p - R_f$**: Excess return above target.\n- **$\\sigma_{\\text{down}}$**: Downside deviation, calculated as $\\sqrt{\\frac{1}{n} \\sum_{t=1}^{n} \\min(R_t - R_f, 0)^2}$.\n\n## Interpretation\nThe Sortino Ratio answers: \"How much excess return do I earn per unit of downside risk taken?\" Unlike Sharpe, Sortino doesn't penalize upside volatility (good returns), making it more appropriate for asymmetric return distributions common in many strategies. A Sortino of 1.0 is equivalent to a Sharpe of 1.0 in terms of risk-adjusted return, but Sortino is typically higher when upside volatility exists. For skewed strategies (e.g., options selling, carry trades), Sortino provides a more meaningful measure because large upside returns shouldn't increase the risk denominator.\n\n ## Assumptions\n- Target return is appropriately set (risk-free rate or MAR - Minimum Acceptable Return)\n- Downside deviation captures the relevant tail risk\n- Return distribution is sufficiently asymmetric that upside volatility should be excluded\n- Sufficient observations for stable downside deviation estimate\n- Returns below target are the only relevant risk\n\n## Practical Use\nSortino is increasingly popular for evaluating hedge funds, alternative investments, and asymmetric strategies. It's particularly appropriate for strategies with positive skewness (most gains, limited losses) or negative skewness (limited gains, potential large losses). The choice of target return $R_f$ matters: using a higher target makes the denominator smaller, increasing the Sortino. Many practitioners prefer Sortino over Sharpe for its intuitive appeal, though both metrics have their place. Research shows Sortino ratios are more stable over time than Sharpe ratios for asymmetric strategies."}
{"title": "Treynor Ratio", "equation": "\\text{Treynor} = \\frac{R_p - R_f}{\\beta_p}", "category": "Risk Metrics", "tags": ["treynor-ratio", "risk-adjusted-return", "beta-risk", "systematic-risk", "performance-measurement", "capm", "market-risk", "jack-treynor"], "note": "## Equation Variables\nThe Treynor Ratio measures risk-adjusted returns using systematic (beta) risk rather than total risk, appropriate for well-diversified portfolios where unsystematic risk has been eliminated.\n\n- **Treynor**: Treynor Ratio or Reward-to-Beta Ratio.\n- **$R_p$**: Portfolio return (typically annualized).\n- **$R_f$**: Risk-free rate.\n- **$R_p - R_f$**: Excess return over risk-free rate.\n- **$\\beta_p$**: Portfolio beta measuring systematic risk relative to market.\n\n## Interpretation\nThe Treynor Ratio answers: \"How much excess return do I earn per unit of systematic (market) risk taken?\" Unlike Sharpe which uses total volatility, Treynor uses beta, making it appropriate for diversified portfolios where idiosyncratic risk has been minimized through diversification. A Treynor of 0.05 means the portfolio earns 5% excess return for each unit of beta. Higher Treynor indicates better compensation for market risk. Treynor is particularly useful when comparing diversified portfolios with similar diversification levels, as it focuses on the risk that cannot be diversified away.\n\n## Assumptions\n- Portfolio is well-diversified (idiosyncratic risk is negligible)\n- Beta is stable and meaningful measure of systematic risk\n- Capital Asset Pricing Model (CAPM) assumptions hold\n- Market proxy is appropriate for the portfolio\n- Beta estimation period is representative\n\n## Practical Use\nTreynor is useful for evaluating fund managers who are expected to take on systematic risk rather than idiosyncratic risk. It's commonly used by institutional investors with diversified portfolios. The ratio can be decomposed using Fama-French models to understand sources of return. Limitations include: beta can be unstable over time, assumes linear relationship with market, and may not capture all systematic factors. Combining Treynor with Sharpe provides a fuller picture: high Sharpe with low Treynor suggests idiosyncratic alpha, while high Treynor suggests market timing skill."}
{"title": "Maximum Drawdown", "equation": "\\text{MDD} = \\max_{t \\in [0,T]} \\frac{\\text{Peak}(t) - \\text{Trough}(t)}{\\text{Peak}(t)}", "category": "Risk Metrics", "tags": ["maximum-drawdown", "drawdown", "peak-trough", "tail-risk", "portfolio-risk", "loss-amplitude", "recovery-period", "time-based-risk"], "note": "## Equation Variables\nMaximum Drawdown (MDD) measures the largest peak-to-trough decline in portfolio value, capturing the worst-case loss scenario over a specified period.\n\n- **MDD**: Maximum Drawdown, expressed as a percentage (or decimal) loss from peak.\n- **$t$**: Time index over the observation period $[0, T]$.\n- **$\\text{Peak}(t)$**: Maximum portfolio value observed up to time $t$ (running maximum).\n- **$\\text{Trough}(t)$**: Portfolio value at time $t$ (current or minimum value since peak).\n- **$T$**: End of observation period.\n\n## Interpretation\nMaximum Drawdown answers: \"What is the worst peak-to-trough decline experienced over the period?\" If a portfolio grows from $100 to $200, then falls to $120 before recovering, the maximum drawdown is $(200-120)/200 = 40\\%$. This metric captures loss magnitude, not just probability, making it essential for risk-averse investors and in capital preservation contexts. Drawdowns have psychological and practical importance: a 50% loss requires a 100% gain to recover. MDD is often reported alongside average drawdown, frequency of drawdowns, and time to recovery.\n\n## Assumptions\n- Portfolio value is marked-to-market regularly\n- Observation period is sufficiently long to capture market cycles\n- No contributions or withdrawals during the period (or they are treated appropriately)\n- Peak is measured before trough (no look-ahead bias)\n- Returns are compounded properly (geometric linking)\n\n## Practical Use\nMaximum Drawdown is critical for risk management, stress testing, and investor communication. It's often a key constraint in portfolio mandates (e.g., \"maximum drawdown not to exceed 20%\"). Fund managers report drawdown statistics prominently in marketing materials. The relationship between return and drawdown follows a power law in many markets, suggesting that larger drawdowns are more probable than Gaussian assumptions would suggest. Calmar Ratio uses MDD to assess risk-adjusted returns. Drawdown-based risk measures like the Calmar Ratio and Sterling Ratio provide alternative perspectives on performance."}
{"title": "Calmar Ratio", "equation": "\\text{Calmar} = \\frac{\\text{Annual Return}}{|\\text{Maximum Drawdown}|}", "category": "Risk Metrics", "tags": ["calmar-ratio", "risk-adjusted-return", "drawdown", "performance-measurement", "absolute-return", "risk-reward", "managed-futures", "absolute-risk"], "note": "## Equation Variables\nThe Calmar Ratio relates annualized returns to maximum drawdown, providing a simple risk-adjusted performance measure commonly used for commodity trading advisors and absolute return strategies.\n\n- **Calmar**: Calmar Ratio, named after the California Management Associates who developed it.\n- **Annual Return**: Compound Annual Growth Rate (CAGR) or average annualized return.\n- **|Maximum Drawdown|**: Absolute value of the maximum drawdown (always positive).\n\n## Interpretation\nThe Calmar Ratio answers: \"How many years of average return would it take to recover from the worst drawdown?\" A Calmar of 2.0 means the annual return is twice the maximum drawdown magnitude. Higher Calmar is better, indicating more return per unit of drawdown risk. Values above 1.0 are generally desirable, above 2.0 are excellent. The Calmar Ratio is particularly popular for evaluating managed futures and hedge fund strategies where drawdowns are a primary concern. Like all ratios, it's sensitive to the observation period and can be gamed by optimizing for specific time windows.\n\n## Assumptions\n- Returns are annualized consistently (CAGR or arithmetic mean)\n- Maximum drawdown is calculated over the same period\n- The period is representative of long-term performance\n- No survivorship bias in the data\n- Drawdown and return distributions are stationary\n\n## Practical Use\nCalmar Ratio is widely used in the hedge fund and managed futures industry for strategy comparison and selection. Many funds advertise their Calmar as a key selling point. A Calmar of 3.0 is often considered a target for systematic trend-following strategies. However, Calmar has limitations: it uses only the worst drawdown, ignoring frequency and depth of other drawdowns. It's also sensitive to the observation period - a fund with a large historical drawdown will have suppressed Calmar even if current conditions are improved. Combining Calmar with average drawdown and return statistics provides a more complete picture."}
{"title": "Portfolio Variance (Matrix Form)", "equation": "\\sigma_p^2 = \\mathbf{w}' \\boldsymbol{\\Sigma} \\mathbf{w}", "category": "Risk Metrics", "tags": ["portfolio-variance", "variance-covariance", "matrix-formulation", "diversification", "modern-portfolio-theory", "mpt", "risk-budgeting", "correlation"], "note": "## Equation Variables\nPortfolio variance in matrix form compactly represents the risk of a multi-asset portfolio, capturing both individual volatilities and pairwise correlations through the covariance matrix.\n\n- **$\\sigma_p^2$**: Portfolio variance (square of portfolio standard deviation).\n- **$\\mathbf{w}$**: Column vector of portfolio weights (summing to 1 for fully invested portfolios).\n- **$\\mathbf{w}'$**: Transpose of weight vector (row vector).\n- **$\\boldsymbol{\\Sigma}$**: Covariance matrix where element $\\Sigma_{ij}$ is the covariance between assets $i$ and $j$.\n\n## Interpretation\nThis matrix equation shows that portfolio risk depends not just on individual asset risks (diagonal of $\\Sigma$) but also on correlations between assets (off-diagonal elements). The expansion of this formula reveals: $\\sigma_p^2 = \\sum_i w_i^2 \\sigma_i^2 + \\sum_{i \\neq j} w_i w_j \\sigma_i \\sigma_j \\rho_{ij}$. Diversification benefits arise when correlations are less than 1, reducing portfolio variance below the weighted average of individual variances. Minimum variance portfolios seek weights that minimize $\\mathbf{w}'\\boldsymbol{\\Sigma}\\mathbf{w}$ subject to constraints, while mean-variance optimization trades off variance against expected returns.\n\n## Assumptions\n- Covariance matrix $\\boldsymbol{\\Sigma}$ is known and positive definite (invertible)\n- Returns follow a multivariate normal distribution (or are characterized by covariance)\n- Weights can be chosen freely (no constraints beyond specified)\n- Portfolio is rebalanced to maintain target weights\n- Covariance is stable over the investment horizon\n\n## Practical Use\nThis formulation is the foundation of Modern Portfolio Theory (MPT) and all portfolio optimization. The covariance matrix is typically estimated from historical data using shrinkage estimators or factor models to improve stability. For large portfolios, computing $\\boldsymbol{\\Sigma}$ directly is expensive; factor models reduce dimensionality by expressing returns as exposures to common factors plus idiosyncratic components. Risk parity strategies equalize risk contribution ($\\frac{\\partial \\sigma_p}{\\partial w_i}$) across assets, which can be expressed in terms of the covariance matrix. Numerical optimization algorithms (quadratic programming) solve the constrained optimization problems built on this formula."}
{"title": "Coherent Risk Measure Properties", "equation": "\\begin{aligned} &\\text{Monotonicity: } X \\leq Y \\implies \\rho(X) \\leq \\rho(Y) \\\\ &\\text{Translation: } \\rho(X + a) = \\rho(X) + a \\\\ &\\text{Positive Homogeneity: } \\rho(\\lambda X) = \\lambda \\rho(X) \\text{ for } \\lambda \\geq 0 \\\\ &\\text{Subadditivity: } \\rho(X + Y) \\leq \\rho(X) + \\rho(Y) \\end{aligned}", "category": "Risk Metrics", "tags": ["coherent-risk-measure", "axiomatic-risk", "artzner-delbaen-eber-hein", "subadditivity", "monotonicity", "translation-invariance", "risk-axioms", "regulatory"], "note": "## Equation Variables\nCoherent risk measures satisfy four fundamental axioms that ensure mathematically sound and economically sensible risk quantification, established by Artzner, Delbaen, Eber, and Heath (1999).\n\n- **$\\rho$**: Risk measure mapping random variables (portfolio outcomes) to real numbers.\n- **$X, Y$**: Random variables representing portfolio outcomes (profits or losses).\n- **$a$**: Constant (deterministic amount).\n- **$\\lambda$**: Non-negative scalar.\n- **$\\leq$**: Stochastic dominance ordering (random variable ordering).\n\n## Interpretation\nCoherence ensures risk measures behave consistently with economic intuition. Monotonicity means riskier positions (worse outcomes) get higher risk numbers. Translation invariance means adding cash reduces risk by exactly that amount. Positive homogeneity means scaling risk scales risk proportionally (10x position = 10x risk). Subadditivity means diversification reduces or at least doesn't increase risk - this is the most important property, ensuring merged portfolios aren't riskier than separate portfolios. VaR fails subadditivity (counterexample exists), while Expected Shortfall satisfies all four axioms, explaining regulatory preference for ES.\n\n## Assumptions\n- Outcomes are in a space of random variables (e.g., bounded or integrable)\n- Ordering $\\leq$ is proper (antisymmetric)\n- Risk measure is real-valued\n- Scalar multiplication and addition are defined\n- No transaction costs or other frictions in combining portfolios\n\n## Practical Use\nCoherence provides the theoretical foundation for modern risk management. Basel III replaced VaR with Expected Shortfall partly because ES is coherent. Risk measures that violate subadditivity can encourage regulatory arbitrage through portfolio splitting. Other coherent risk measures include: entropic risk measures, spectral risk measures, and distorted risk measures. The dual representation of coherent risk measures connects them to sets of probability measures (risk envelopes), providing computational and interpretive insights. Understanding coherence helps practitioners evaluate new risk measures and recognize when their risk assessments may be misleading."}
{"title": "Incremental VaR", "equation": "\\text{IVaR}_{\\text{position}} = \\text{VaR}_{\\text{with}} - \\text{VaR}_{\\text{without}}", "category": "Risk Metrics", "tags": ["incremental-var", "marginal-risk", "risk-contribution", "position-analysis", "what-if-analysis", "risk-attribution", "portfolio-risk", "additive-risk"], "note": "## Equation Variables\nIncremental VaR (IVaR) measures the change in portfolio VaR resulting from adding or removing a position, enabling risk attribution and capital allocation.\n\n- **$\\text{IVaR}_{\\text{position}}$**: Change in portfolio VaR from adding/removing the position.\n- **$\\text{VaR}_{\\text{with}}$**: Portfolio VaR including the position.\n- **$\\text{VaR}_{\\text{without}}$**: Portfolio VaR excluding the position (original portfolio).\n\n## Interpretation\nIVaR answers: \"How much does my portfolio risk increase if I add this position?\" If portfolio VaR is $1M without a trade, and $1.1M with the trade, IVaR is $100K. This directly measures the risk contribution of individual positions, useful for limit monitoring and capital allocation. IVaR is not the same as standalone position VaR because it accounts for diversification effects - a position that reduces portfolio VaR through negative correlation has negative IVaR. The relationship between IVaR, marginal VaR, and component VaR provides the basis for risk budgeting.\n\n## Assumptions\n- VaR can be computed accurately for both portfolio states\n- Marginal change is approximately linear (IVaR ≈ Marginal VaR for small positions)\n- Portfolio diversification effects are properly captured\n- VaR horizon and confidence level are held constant\n- No position interactions beyond those captured in VaR calculation\n\n## Practical Use\nIVaR is essential for risk attribution and trader limit management. Risk managers use IVaR to justify risk limits and evaluate new trades. However, IVaR has limitations: it's not additive (IVaR(A+B) ≠ IVaR(A) + IVaR(B) generally) and can be sensitive to portfolio composition. Marginal VaR (derivative of VaR with respect to position) provides a continuous approximation: $\\text{MVaR} = \\frac{\\partial \\text{VaR}}{\\partial w}$. Component VaR extends IVaR by decomposing portfolio VaR into additive components that sum to total VaR, improving risk budgeting accuracy."}
{"title": "Stress Testing (Scenario Analysis)", "equation": "\\text{Stress P\\&L} = \\sum_{i=1}^{n} w_i \\times \\Delta S_i \\times \\text{Sensitivity}_i", "category": "Risk Metrics", "tags": ["stress-testing", "scenario-analysis", "sensitivity-analysis", "what-if-analysis", "crisis-simulation", "risk-management", "regulatory", "market-risk"], "note": "## Equation Variables\nStress testing evaluates portfolio performance under extreme but plausible scenarios, using sensitivity-based or full revaluation methods to estimate potential losses.\n\n- **Stress P&L**: Projected profit or loss under the stress scenario.\n- **$w_i$**: Current position size (notional or DV01-weighted).\n- **$\\Delta S_i$**: Stress scenario change in risk factor $i$ (e.g., -20% equity, +100bps rates).\n- **$\\text{Sensitivity}_i$**: Position sensitivity to risk factor $i$ (Delta, DV01, etc.).\n- **$n$**: Number of risk factors or positions.\n\n## Interpretation\nStress testing answers: \"How much would I lose if a specified crisis scenario occurred?\" A typical equity stress scenario might be: S&P 500 -30%, VIX +50%, USDJPY +10%, High Yield spreads +500bps. The total stress P&L is the sum of each position's loss under these factor shifts. Sensitivity-based approaches use Delta and Gamma approximations, while full revaluation values the portfolio under the stressed scenario (e.g., shifted yield curves, changed volatilities). Stress tests complement VaR by exploring tail events rather than probability-weighted outcomes.\n\n## Assumptions\n- Scenarios are plausible and internally consistent (no contradictory assumptions)\n- Correlations in the scenario are appropriate (e.g., equities down when spreads widen)\n- Positions are static during the stress period\n- Liquidity and market impact are either included or acknowledged as omitted\n- sensitivities remain valid under stressed conditions (often violated)\n\n## Practical Use\nStress testing is regulatory requirement (Basel stress testing, CCAR, EBA) and best practice for risk management. Scenarios include historical (2008 crisis, COVID-2020), hypothetical (cyber attack, commodity shock), and reverse stress (scenarios causing failure). Advanced stress testing includes multi-period scenarios, path dependencies, and second-order effects. Enterprise-wide stress testing (EWST) considers contagion across risks. The results inform capital buffers, risk limits, and contingency planning. Stress testing reveals model limitations as Greeks often break down in crisis conditions."}
{"title": "Risk Budgeting (Equal Risk Contribution)", "equation": "\\text{RC}_i = w_i \\times \\frac{\\partial \\sigma_p}{\\partial w_i} = w_i \\times \\frac{(\\boldsymbol{\\Sigma} \\mathbf{w})_i}{\\sigma_p}", "category": "Risk Metrics", "tags": ["risk-budgeting", "risk-parity", "equal-risk-contribution", "erc", "diversification", "portfolio-optimization", "risk-attribution", "factor-risk"], "note": "## Equation Variables\nRisk budgeting allocates risk across portfolio components such that each contributes equally, creating diversified portfolios without relying on return forecasts.\n\n- **$\\text{RC}_i$**: Risk contribution of asset $i$ to total portfolio risk.\n- **$w_i$**: Weight of asset $i$ in the portfolio.\n- **$\\frac{\\partial \\sigma_p}{\\partial w_i}$**: Marginal risk contribution (sensitivity of total risk to weight change).\n- **$\\sigma_p$**: Portfolio volatility (standard deviation).\n- **$(\\boldsymbol{\\Sigma}\\mathbf{w})_i$**: $i$-th element of the covariance-weighted return vector.\n\n## Interpretation\nRisk budgeting answers: \"How should I allocate weights so each asset contributes equally to total risk?\" The risk contribution formula shows RC depends on both weight and how the asset interacts with the portfolio. An equal-risk-contribution (ERC) portfolio satisfies $\\text{RC}_i = \\text{RC}_j$ for all $i, j$. For uncorrelated assets, ERC implies equal weights; for correlated assets, lower-correlation assets get higher weights. Risk parity extends this to equal risk contribution from risk factors (equity beta, duration, credit exposure) rather than individual assets.\n\n## Assumptions\n- Covariance matrix $\\boldsymbol{\\Sigma}$ is known and positive definite\n- Portfolio weights are unconstrained (or constraints are handled)\n- Risk is measured by volatility (other measures possible)\n- Equal risk contribution is the objective (not return maximization)\n- No transaction costs for rebalancing\n\n## Practical Use\nRisk budgeting has grown popular since the 2008 crisis as an alternative to mean-variance optimization. It's particularly useful when return forecasts are unreliable or when investors want diversified outcomes regardless of return predictions. Risk parity funds manage hundreds of billions globally. Implementation requires numerical optimization (Newton-Raphson or similar) to find weights satisfying the ERC conditions. Risk budgeting can be extended to factor risk budgeting (equal contribution from equity, rates, credit, commodities factors) or to budget by trading strategy."}
{"title": "Wrong-Way Risk", "equation": "\\text{WWR Factor} = \\frac{\\text{Correlation}(X, Y)}{\\sqrt{\\text{Correlation}(X, X) \\times \\text{Correlation}(Y, Y)}}", "category": "Risk Metrics", "tags": ["wrong-way-risk", "counterparty-risk", "correlation-risk", "credit-exposure", "cva", "default-correlation", "stress-testing", "derivatives"], "note": "## Equation Variables\nWrong-Way Risk (WWR) occurs when exposure to a counterparty is positively correlated with the counterparty's default probability, creating amplified losses when both events happen together.\n\n- **WWR Factor**: Measure of inappropriate correlation between exposure and default.\n- **$X$**: Random variable representing exposure to counterparty.\n- **$Y$**: Random variable representing counterparty default intensity or probability.\n- **$\\text{Correlation}(\\cdot, \\cdot)$**: Correlation coefficient between the two variables.\n\n## Interpretation\nWrong-Way Risk exists when $\\text{Correlation}(X, Y) > 0$. If a bank is most exposed to a counterparty precisely when that counterparty is most likely to default, the exposure and default move together, causing worse losses than standard CVA models assume. For example, an interest rate swap where the bank receives fixed rates: if rates rise (increasing mark-to-market exposure), the counterparty (perhaps a levered real estate company) becomes more likely to default due to higher funding costs. WWR can double or triple CVA capital requirements for highly correlated positions.\n\n## Assumptions\n- Exposure and default can be modeled as correlated random variables\n- Correlation is stable over time and across scenarios\n- Sufficient data exists to estimate the correlation\n- Default is modeled as intensity-based (Poisson process) or reduced-form\n- Wrong-way risk is not captured by standard CVA models\n\n## Practical Use\nWrong-Way Risk is a key focus of Basel III CVA capital requirements and credit risk management. Banks must identify, measure, and mitigate WWR in their derivative portfolios. Methods to address WWR include: limiting exposure to correlated counterparties, using collateral agreements, buying CVA hedges, and stress testing extreme wrong-way scenarios. Advanced modeling uses copulas (Gaussian, t-, or Clayton) to model the joint distribution of exposure and default intensity. WWR is particularly important for emerging market counterparties, commodities exposures, and structured products with embedded leverage."}
{"title": "Greeks for Asian Options", "equation": "\\text{Asian Delta} \\approx \\frac{\\partial V}{\\partial S} \\approx \\frac{A}{nS} \\sum_{i=1}^{n} e^{-\\alpha(t_i - t)} \\frac{\\partial V_{\\text{geometric}}}{\\partial K}", "category": "Risk Metrics", "tags": ["asian-options", "path-dependent-options", "average-price-options", "sensitivity-analysis", "approximation-methods", "geometric-brownian", "monte-carlo", "option-greeks"], "note": "## Equation Variables\nAsian options depend on the average price of the underlying over time, making their Greeks more complex to compute than European options and requiring specialized techniques.\n\n- **Asian Delta**: Sensitivity of Asian option value to current underlying price.\n- **$V$**: Value of the Asian (average price) option.\n- **$S$**: Current underlying price.\n- **$A$**: Average price (arithmetic or geometric) of underlying.\n- **$n$**: Number of averaging observations.\n- **$t_i$**: Observation times.\n- **$t$**: Current time.\n- **$V_{\\text{geometric}}$**: Value of geometric Asian option (analytically tractable).\n- **$K$**: Strike price.\n\n## Interpretation\nAsian options reduce manipulation risk and volatility of the underlying by using average prices. Their Delta is lower than European options because the average price moves less than the spot price (averaging smooths out fluctuations). For an Asian call, Delta is approximately $\\frac{A}{nS}$ times the European Delta at each observation, weighted by time to observation. This \"averaging effect\" reduces Delta, Gamma, and Vega compared to vanilla options of the same strike and maturity. Asian options are often cheaper than European options due to this reduced sensitivity.\n\n## Assumptions\n- Underlying follows geometric Brownian motion (or jump-diffusion)\n- Average is observable and non-manipulable (close enough sampling)\n- Geometric average approximation is reasonable for arithmetic averages\n- No early exercise (American Asian options require numerical methods)\n- Volatility is constant (or term structure of volatility is specified)\n\n## Practical Use\nComputing Greeks for Asian options typically requires Monte Carlo simulation with control variates or finite difference methods on the pricing grid. The geometric average Asian option has an analytical solution (Kemna-Vorst model), providing a useful control variate for Monte Carlo and an approximation for the arithmetic case. Popular approximations include: Turnbull-Wakeman (approximate continuous average), Levy (approx for discrete average), and exact numerical integration for small $n$. Greeks for path-dependent options show path-wise behavior - different paths can have very different sensitivities, making Greeks stochastic themselves."}
{"title": "Greeks for Barrier Options", "equation": "\\text{Barrier Delta} = \\frac{\\partial V}{\\partial S} = \\Delta_{\\text{vanilla}} \\times \\frac{\\text{Rebate Factor}}{1 + \\text{Barrier Factor}}", "category": "Risk Metrics", "tags": ["barrier-options", "knock-out-options", "path-dependent-options", "barrier-sensitivity", "reflection-principle", "first-passage", "option-greeks", "exotic-options"], "note": "## Equation Variables\nBarrier options become worthless (knock-out) or begin to exist (knock-in) when the underlying price reaches a specified barrier level, making their Greeks discontinuous at the barrier.\n\n- **Barrier Delta**: Sensitivity of barrier option to underlying price.\n- **$V$**: Barrier option value.\n- **$S$**: Current underlying price.\n- **$\\Delta_{\\text{vanilla}}$**: Delta of equivalent vanilla option.\n- **Rebate Factor**: Cash payment if barrier is touched (for rebate barriers).\n- **Barrier Factor**: Adjustment for barrier proximity and type (down-and-out, up-and-call, etc.).\n\n## Interpretation\nBarrier options have complex Greeks because their value can change discontinuously at the barrier. As the underlying approaches the barrier, Delta can spike as the probability of barrier touch changes rapidly. A down-and-out option near its barrier has high Gamma as small price moves determine whether the option lives or dies. Vega is also concentrated near the barrier because volatility affects barrier touch probability. The \"reflection principle\" provides analytical solutions for barrier option Greeks under Black-Scholes, but numerical methods are needed for path-dependent or American features.\n\n## Assumptions\n- Underlying follows continuous diffusion (no jumps that skip over barrier)\n- Barrier is observable and monitorable (continuous or discrete monitoring)\n- No rebates unless specified (or rebates are known amounts)\n- Standard barrier types: down-and-out, up-and-out, down-and-in, up-and-in\n- Correlation between underlying and volatility is ignored (simplified model)\n\n## Practical Use\nBarrier options are popular for hedging and structured products because they offer tailored payoff profiles at lower cost than vanilla options. Greeks for barrier options are critical for hedging, especially near the barrier where sensitivities change rapidly. Numerical methods (finite differences, Monte Carlo with pathwise derivatives) are often used. Hedge ratios must account for the discrete monitoring adjustment - a daily monitored barrier has higher survival probability than a continuously monitored one with the same level. The barrier option Greeks illustrate the general principle that path-dependent options have Greeks that are themselves path-dependent."}
{"title": "Stress VaR (Filtered Historical)", "equation": "\\text{SVaR}_{\\alpha} = -\\mu_{\\text{filtered}} - z_{\\alpha} \\sigma_{\\text{filtered}}", "category": "Risk Metrics", "tags": ["stressed-var", "filtered-historical-simulation", "volatility-scaling", "garch", "regulatory", "basel", "scenario-period", "risk-measure"], "note": "## Equation Variables\nStress VaR (or Stressed VaR) uses historical data from a period of significant market stress, scaled to current volatility levels, to capture tail risk during crisis conditions.\n\n- **$\\text{SVaR}_{\\alpha}$**: Stressed Value at Risk at confidence level $\\alpha$.\n- **$\\mu_{\\text{filtered}}$**: Mean of filtered/scaled historical returns.\n- **$z_{\\alpha}$**: $\\alpha$-quantile of standard normal distribution.\n- **$\\sigma_{\\text{filtered}}$**: Filtered volatility (current volatility applied to stressed period returns).\n\n## Interpretation\nStressed VaR addresses VaR's failure to capture non-stationary volatility by deliberately using stressed market conditions. Under Basel 2.5, banks must compute VaR using a 60-day rolling window of the most volatile 60-day period in the past 4 years. The filtered historical approach scales historical returns by the ratio of current volatility to historical volatility: $r_{\\text{scaled}} = r_{\\text{historical}} \\times (\\sigma_{\\text{current}} / \\sigma_{\\text{historical}})$. This produces a VaR that reflects both the correlation structure from history and current volatility levels, intended to represent the \"worst case\" under recent memory.\n\n## Assumptions\n- Historical stressed period is representative of future stressed conditions\n- Volatility scaling preserves correlation structure\n- Current volatility is a reasonable estimate of future volatility\n- Linear scaling is adequate for the portfolio\n- The 4-year lookback period captures meaningful stress periods\n\n## Practical Use\nStressed VaR became regulatory requirement after the 2008 crisis, adding approximately 3x to VaR capital for many trading books. It forces banks to consider what losses would be if current volatility persisted during a crisis period. Limitations include: depends on arbitrary window choices, may miss unprecedented scenarios, and creates procyclical capital requirements (high volatility causes high SVaR which causes high capital which may constrain market-making when most needed). Some jurisdictions allow internal models for stressed calibration, while others require standardized approaches."}
{"title": "Liquidity-Adjusted VaR", "equation": "\\text{LVaR} = \\text{VaR} + \\text{Liquidity Adjustment} = \\text{VaR} + \\text{Spread} \\times \\sqrt{\\text{Holding Period}}", "category": "Risk Metrics", "tags": ["liquidity-var", "liquidity-risk", "bid-ask-spread", "market-impact", "liquidity-adjusted-risk", "trading-cost", "bid-ask-spread", "regulatory"], "note": "## Equation Variables\nLiquidity-Adjusted VaR (LVaR) incorporates the cost of liquidating positions under adverse market conditions, adding transaction cost risk to price risk.\n\n- **LVaR**: Liquidity-adjusted Value at Risk including liquidation costs.\n- **VaR**: Standard Value at Risk (price-based loss).\n- **Liquidity Adjustment**: Additional loss from bid-ask spreads and market impact.\n- **Spread**: Bid-ask spread (often expressed as a percentage of notional).\n- **Holding Period**: Time to liquidate the position (hours to days).\n\n## Interpretation\nLVaR recognizes that in stressed markets, you cannot instantly liquidate positions at mid-prices. The adjustment adds the expected transaction cost to potential losses: $\\text{LVaR}_{\\alpha} = \\text{VaR}_{\\alpha} + \\text{bid-ask spread} \\times \\text{notional}$. More sophisticated models include market impact: larger trades move prices, creating additional cost proportional to trade size and market depth. LVaR is higher for less liquid positions (credit derivatives, emerging market bonds, structured products) and in stressed markets when spreads widen. The holding period scaling matters because longer liquidation periods increase both price risk and cost accumulation.\n\n## Assumptions\n- Liquidity conditions during the VaR horizon match the spread assumption\n- Position can be fully liquidated within the holding period\n- Market impact is linear with trade size (often violated for large trades)\n- No feedback effects from liquidation on market prices (unless explicitly modeled)\n- Bid-ask spreads are representative of execution costs\n\n## Practical Use\nLVaR is used for illiquid positions and portfolios where liquidity risk is material. Basel III introduced liquidity coverage ratios and considers liquidity in market risk capital. Trading desks monitor \"liquidity-adjusted limits\" that account for the cost of exiting positions. Advanced LVaR models include: Almgren-Chriss optimal execution framework, queue-based models (matching engine dynamics), and endogenous liquidity models where fire sales cause feedback effects. For the most illiquid assets (ABS, CDO tranches), LVaR can be 2-3x higher than standard VaR, significantly affecting capital allocation."}
{"title": "Greeks for Lookback Options", "equation": "\\text{Lookback Delta} = \\frac{\\partial V}{\\partial S} = N(d_1) \\times \\frac{S_{\\text{max}} - S}{S_{\\text{max}}}", "category": "Risk Metrics", "tags": ["lookback-options", "floating-strike", "path-dependent-options", "extremum-sensitivity", "option-greeks", "moneyness", "max-min-payoff", "exotic-options"], "note": "## Equation Variables\nLookback options have payoffs based on the maximum or minimum underlying price during the option life, creating Greeks that depend on the entire price path, not just current price.\n\n- **Lookback Delta**: Sensitivity of lookback option to current underlying price.\n- **$V$**: Value of the lookback option (floating strike call or put).\n- **$S$**: Current underlying price.\n- **$N(d_1)$**: Standard normal CDF.\n- **$S_{\\text{max}}$**: Maximum underlying price observed (for floating strike call).\n\n## Interpretation\nLookback options have unique Greeks because their payoff depends on the extreme price achieved. A floating strike lookback call gives the right to buy at the minimum price, so its value depends on how close current price is to the running minimum. The Delta is reduced compared to a vanilla option because some of the option's value is already \"locked in\" by the extreme price observation. If $S$ is close to $S_{\\text{max}}$ (near the running maximum), the lookback call Delta approaches zero because the strike is already favorable. Conversely, if $S$ is far from $S_{\\text{max}}$, Delta approaches the vanilla Delta.\n\n## Assumptions\n- Underlying price path is fully observable and continuous\n- Maximum/minimum is observed continuously (or discrete sampling specified)\n- No early exercise constraint (European style lookback)\n- Volatility is constant or term structure specified\n- No dividends (or appropriate adjustments made)\n\n## Practical Use\nLookback options are used for hedging uncertain timing decisions or capturing trend-following returns. Their Greeks are path-dependent, meaning Monte Carlo simulation with pathwise differentiation or the Likelihood Ratio Method is needed for accurate estimation. The continuous monitoring assumption is often adjusted for discrete observation (daily max/min). Lookback options are more expensive than vanilla options because they offer better payoffs, and their Greeks show interesting dynamics: Delta increases when the underlying moves away from the extreme, and Gamma spikes when the extreme price is updated (when a new maximum/minimum is reached)."}
{"title": "Interest Rate Swap Present Value", "equation": "V_{\\text{pay}} = \\sum_{i=1}^{n} \\delta_i (F_{i-1} - K) P(0, t_i)", "category": "Interest Rate Derivatives", "tags": ["interest-rate-swap", "fixed-income-derivatives", "present-value", "libor", "vanilla", "fixed-leg", "floating-leg", "curve-building", "risk-neutral"], "note": "## Equation Variables\nThe interest rate swap is the most widely traded interest rate derivative, exchanging fixed for floating cash flows based on a notional principal.\n\n- **$V_{\\text{pay}}$**: Present value of the swap from the perspective of the fixed-rate payer (negative when in-the-money for the fixed payer).\n- **$\\delta_{i}$**: Accrual factor (day count fraction) for period $i$, typically Actual/360 for USD LIBOR swaps.\n- **$F_{i-1}$**: Forward rate for period $i$, set at the beginning of the period $t_{i-1}$ and paid at $t_i$.\n- **$K$**: Fixed swap rate (strike) agreed at trade inception.\n- **$P(0, t_i)$**: Discount factor from the valuation curve for payment date $t_i$.\n- **$n$**: Number of payment periods.\n\n## Interpretation\nThe swap value is the present value of the difference between floating and fixed cash flows. The floating leg equals the par value at each payment (because the forward rate exactly discounts the expected payment), so only the fixed leg requires full discounting. When rates rise, the fixed payer owes more (negative value); when rates fall, they benefit (positive value).\n\n## Assumptions\n- Standard vanilla swap structure with regular payments\n- No early termination or optionality\n- Collateralized with overnight rates as proxy for risk-free\n- Use of OIS discounting for collateralized trades\n\n## Practical Use\nSwaps are used for interest rate hedging, speculation, and curve construction. The swap rate (which makes PV = 0) provides the par swap curve. Basis swaps exchange floating-for-floating (e.g., USD-LIBOR vs Fed Funds). Cross-currency basis reflects funding spreads between currencies."}
{"title": "Swap Par Rate", "equation": "s = \\frac{1 - P(0, T)}{\\sum_{i=1}^{n} \\delta_i P(0, t_i)}", "category": "Interest Rate Derivatives", "tags": ["swap-rate", "par-swap-rate", "interest-rate-derivatives", "zero-curve", "curve-building", "forward-rates", "libor", "pricing", "bootstrapping"], "note": "## Equation Variables\nThe swap par rate (or par swap rate) is the fixed rate that makes an interest rate swap have zero present value at inception.\n\n- **$s$**: Par swap rate (annualized, semiannual if $\\delta_i$ reflects semiannual payments).\n- **$P(0, T)$**: Discount factor to the swap maturity $T = t_n$ from the valuation curve.\n- **$P(0, t_i)$**: Discount factor to each payment date $t_i$.\n- **$\\delta_i$**: Accrual factor for the $i$-th payment period.\n- **$n$**: Number of fixed payment periods over the swap life.\n- **$T$**: Total swap tenor (maturity date).\n\n## Interpretation\nThe par swap rate is the weighted average of forward rates implied by the discount curve, where weights are the discounted accrual factors. This rate is called \"par\" because it equates the present value of the fixed leg to the present value of the floating leg (which equals par at inception). The denominator is the annuity or present value of a basis point (PVBP).\n\n## Assumptions\n- Fixed leg payments are regular (annual, semiannual, quarterly).\n- Floating leg resets to prevailing LIBOR/SOFR at each period start.\n- No convexity adjustment for daily/continuous compounding.\n- Bootstrap the discount curve from market instruments (deposits, FRAs, futures, swaps).\n\n## Practical Use\nThe par swap rate is quoted in the market for standard tenors (2Y, 5Y, 10Y, 30Y). It forms the \"par swap curve\" used for discounting and forward rate extraction. Trading the swap curve involves basis swaps, asset swaps, and relative value trades between tenors."}
{"title": "Forward Rate Agreement Value", "equation": "V_{FRA} = (F - K) \\cdot \\delta \\cdot P(0, T_2)", "category": "Interest Rate Derivatives", "tags": ["forward-rate-agreement", "fra", "interest-rate-derivatives", "forward-rate", "libor", "otc", "hedging", "speculation", "fixed-income"], "note": "## Equation Variables\nA Forward Rate Agreement (FRA) is an over-the-counter contract specifying a forward borrowing/lending rate to be paid at a future date.\n\n- **$V_{FRA}$**: Present value of the FRA position (positive = receiver benefits).\n- **$F$**: Forward rate agreed upon at contract inception for the period $[T_1, T_2]$.\n- **$K$**: Contract rate (strike) at which the FRA is settled.\n- **$\\delta$**: Accrual factor (day count) for the forward period $T_2 - T_1$.\n- **$P(0, T_2)$**: Discount factor to the settlement date $T_2$.\n- **$T_1$**: Start of the forward period (fixing date).\n- **$T_2$**: End of the forward period (payment date).\n\n## Interpretation\nThe FRA value represents the present value of the difference between the contracted rate and the actual realized rate. If the market rate $F$ exceeds the strike $K$, the FRA receiver receives $(F - K)\\delta$ times the notional at $T_2$, discounted to today. This captures the time value of money and the uncertainty in future rates.\n\n## Assumptions\n- Settlement occurs at $T_2$ (end of forward period) with cash exchange.\n- No initial premium payment (FRA is priced off-market initially).\n- Uses LIBOR/SOFR as underlying forward rate.\n- Linear approximation valid for short-dated FRAs.\n\n## Practical Use\nFRAs are used for short-term interest rate hedging (3M to 24M forward start). They form the building blocks of the forward curve, interpolated between deposit rates and swap rates. Corporate treasurers use FRAs to lock in future borrowing costs."}
{"title": "Cap Price (Black's Model)", "equation": "\\text{Cap} = \\sum_{i=1}^{n} \\delta_i P(0, t_i) \\left[ F_i N(d_1) - K N(d_2) \\right]", "category": "Interest Rate Derivatives", "tags": ["interest-rate-cap", "black-model", "caplet", "option", "libor", "volatility", "greeks", "fixed-income-derivatives", "interest-rate-hedging"], "note": "## Equation Variables\nAn interest rate cap is a series of caplets (call options on interest rates) that pay when the floating rate exceeds a predetermined strike.\n\n- **$\\text{Cap}$**: Total present value of the cap (sum of caplet values).\n- **$\\delta_i$**: Accrual factor for the $i$-th caplet period.\n- **$P(0, t_i)$**: Discount factor to the $i$-th payment date.\n- **$F_i$**: Forward rate for the $i$-th period, the underlying of the $i$-th caplet.\n- **$K$**: Cap strike rate (typically the ATM rate at inception).\n- **$N(\\cdot)$**: Cumulative standard normal distribution function.\n- **$d_1 = \\frac{\\ln(F_i/K) + \\frac{1}{2}\\sigma^2 t_i}{\\sigma\\sqrt{t_i}}$**\n- **$d_2 = d_1 - \\sigma\\sqrt{t_i}$**\n- **$\\sigma$**: Black-implied volatility for the forward rate.\n- **$t_i$**: Time to the $i$-th caplet expiration.\n\n## Interpretation\nEach caplet is valued as a Black-style option on the forward rate $F_i$. When $F_i > K$, the caplet pays $(F_i - K)\\delta_i$, which is discounted to today. The normal distribution weights this payoff by the probability (under the forward measure) that the rate exceeds the strike. Higher volatility increases option value through the $\\sigma^2 t_i$ term.\n\n## Assumptions\n- Forward rates are lognormally distributed under the appropriate measure.\n- Constant volatility across strikes and maturities (flat vol surface).\n- No correlation between caplets (analytical tractability).\n- Settlement at period end (European-style).\n\n## Practical Use\nCaps protect borrowers against rising rates and are used in mortgage-backed securities (MBS) as prepayment hedges. The cap price is sensitive to implied volatility (Vega). Cap-floor parity relates caps, floors, and swaps. The market uses Black's model despite its simplifying assumptions."}
{"title": "Floor Price (Black's Model)", "equation": "\\text{Floor} = \\sum_{i=1}^{n} \\delta_i P(0, t_i) \\left[ K N(-d_2) - F_i N(-d_1) \\right]", "category": "Interest Rate Derivatives", "tags": ["interest-rate-floor", "black-model", "floorlet", "option", "libor", "volatility", "greeks", "fixed-income-derivatives", "interest-rate-hedging"], "note": "## Equation Variables\nAn interest rate floor is a series of floorlets (put options on interest rates) that pay when the floating rate falls below a predetermined strike.\n\n- **$\\text{Floor}$**: Total present value of the floor (sum of floorlet values).\n- **$\\delta_i$**: Accrual factor for the $i$-th floorlet period.\n- **$P(0, t_i)$**: Discount factor to the $i$-th payment date.\n- **$F_i$**: Forward rate for the $i$-th period, the underlying of the $i$-th floorlet.\n- **$K$**: Floor strike rate.\n- **$N(\\cdot)$**: Cumulative standard normal distribution function.\n- **$d_1 = \\frac{\\ln(F_i/K) + \\frac{1}{2}\\sigma^2 t_i}{\\sigma\\sqrt{t_i}}$**\n- **$d_2 = d_1 - \\sigma\\sqrt{t_i}$**\n- **$\\sigma$**: Black-implied volatility for the forward rate.\n- **$t_i$**: Time to the $i$-th floorlet expiration.\n\n## Interpretation\nEach floorlet is valued as a put option on the forward rate. When $F_i < K$, the floorlet pays $(K - F_i)\\delta_i$, discounted to today. The negative arguments in the normal distribution $N(-d_1)$ and $N(-d_2)$ account for the put payoff structure. Floor and cap values are related through cap-floor parity: Cap - Floor = Annuity(K), where the annuity is the present value factor.\n\n## Assumptions\n- Forward rates are lognormally distributed under the appropriate measure.\n- Constant volatility across strikes and maturities.\n- No early exercise (European-style settlement).\n- Floor and cap are treated as separate instruments.\n\n## Practical Use\nFloors protect lenders and investors (e.g., in floating-rate notes) against declining rates. They are used in structured products and as part of collar strategies (long cap, short floor, or vice versa). Floor volatility is typically lower than cap volatility due to the sticky-delta phenomenon."}
{"title": "Payer Swaption Price", "equation": "\\text{PayerSwaption} = P(0, T_0) \\left[ s_0 N(d_1) - K N(d_2) \\right]", "category": "Interest Rate Derivatives", "tags": ["payer-swaption", "swaption", "black-model", "option", "swap-rate", "volatility", "greeks", "fixed-income-derivatives", "exercise"], "note": "## Equation Variables\nA payer swaption gives the holder the right (but not obligation) to enter into a swap as the fixed-rate payer at a predetermined strike.\n\n- **$\\text{PayerSwaption}$**: Present value of the payer swaption (right to pay fixed).\n- **$P(0, T_0)$**: Discount factor to the swaption expiration date $T_0$.\n- **$s_0$**: Forward swap rate at inception for the underlying swap (the ATM rate).\n- **$K$**: Swaption strike rate (the fixed rate at which the holder can enter the swap).\n- **$N(\\cdot)$**: Cumulative standard normal distribution.\n- **$d_1 = \\frac{\\ln(s_0/K) + \\frac{1}{2}\\sigma_s^2 T_0}{\\sigma_s\\sqrt{T_0}}$**\n- **$d_2 = d_1 - \\sigma_s\\sqrt{T_0}$**\n- **$\\sigma_s$**: Swaption volatility (Black-implied, annual).\n- **$T_0$**: Time to swaption expiration.\n\n## Interpretation\nThe payer swaption is equivalent to a call option on the swap rate. If the market swap rate $s_0$ exceeds the strike $K$, exercising the swaption and entering a pay-fixed swap is profitable (the holder pays above-market fixed rates). The value equals the discounted expected payoff, where $N(d_1)$ captures the probability of exercise adjusted for the option's delta.\n\n## Assumptions\n- Swap rate is lognormally distributed at expiration (Black's model).\n- Swap rate volatility is constant over the swaption's life.\n- Exercise is European (at expiry only).\n- Underlying swap has the same fixed and floating specifications as the swaption.\n\n## Practical Use\nPayer swaptions are used to hedge against rising rates (e.g., mortgage lenders hedging pipelines). Receiver swaptions (puts on swap rates) hedge falling rates. Swaptions are quoted by expiry, tenor, and strike. Swaption volatility surfaces are critical inputs for pricing exotic derivatives."}
{"title": "Black's Forward Rate Model", "equation": "F_i = \\frac{1}{\\delta_i} \\left[ \\frac{P(0, t_{i-1})}{P(0, t_i)} - 1 \\right]", "category": "Interest Rate Derivatives", "tags": ["forward-rate", "black-model", "discount-factors", "libor", "term-structure", "interest-rate-derivatives", "curve-building", "forward-curve"], "note": "## Equation Variables\nBlack's forward rate model provides the relationship between discount factors and forward rates for a given term structure.\n\n- **$F_i$**: Forward rate for the period $[t_{i-1}, t_i]$.\n- **$\\delta_i$**: Accrual factor for period $i$ ($t_i - t_{i-1}$ in years).\n- **$P(0, t_{i-1})$**: Discount factor to the start of the forward period.\n- **$P(0, t_i)$**: Discount factor to the end of the forward period.\n- **$t_{i-1}$**: Start date of the forward period (fixing date).\n- **$t_i$**: End date of the forward period (payment date).\n\n## Interpretation\nThe forward rate is the break-even rate that equates the return from investing from $t_{i-1}$ to $t_i$ with rolling shorter investments. Algebraically, $P(0, t_i) = P(0, t_{i-1}) / (1 + \\delta_i F_i)$. This relationship holds regardless of the underlying rate type (LIBOR, EURIBOR, SOFR) and is the foundation of forward curve construction from discount factors.\n\n## Assumptions\n- No arbitrage between instruments of different maturities.\n- Consistent day count conventions across the curve.\n- Discount factors are derived from observable market instruments.\n- Forward rates are simple (not continuously compounded).\n\n## Practical Use\nForward rates are the building blocks of interest rate derivatives pricing. They are extracted from FRAs, futures prices, and swap rates during curve bootstrapping. Forward curves enable forward-starting swaps, FRAs, and basis swap pricing. Changes in forward rates drive P&L in interest rate positions."}
{"title": "LIBOR Forward Rate", "equation": "L(t, T, T+\\delta) = \\frac{1}{\\delta} \\left[ \\frac{P(t, T)}{P(t, T+\\delta)} - 1 \\right]", "category": "Interest Rate Derivatives", "tags": ["libor-forward-rate", "forward-rate", "libor", "term-structure", "risk-neutral", "discount-factors", "interest-rate-derivatives", "t-forward-measure"], "note": "## Equation Variables\nThe LIBOR forward rate is the implied future LIBOR rate observed at time $t$ for the period $[T, T+\\delta]$.\n\n- **$L(t, T, T+\\delta)$**: Forward LIBOR rate at time $t$ for the period beginning at $T$ and ending at $T+\\delta$.\n- **$t$**: Valuation date (today).\n- **$T$**: Start of the forward period (fixing date).\n- **$T+\\delta$**: End of the forward period (payment date).\n- **$\\delta$**: Length of the forward period in years (day count).\n- **$P(t, T)$**: Discount factor from $t$ to $T$ (price of $1 at $T$).\n- **$P(t, T+\\delta)$**: Discount factor from $t$ to $T+\\delta$.\n\n## Interpretation\nThe LIBOR forward rate is the risk-neutral expectation of the future LIBOR rate, derived from the ratio of discount factors. Under the $T$-forward measure, the forward rate $L(t, T, T+\\delta)$ becomes a martingale (its expected future value equals its current value). This property is fundamental to pricing interest rate derivatives.\n\n## Assumptions\n- LIBOR rates are risk-neutral expectations of future overnight rates.\n- No credit risk in the theoretical LIBOR rate.\n- Market completeness for the underlying forward measure.\n- Consistent discounting across all tenors.\n\n## Practical Use\nLIBOR forward rates underlie all interest rate derivative pricing (FRAs, swaps, caps, floors). The transition from LIBOR to risk-free rates (SOFR, SONIA) requires rebuilding curves and adjusting models. Forward rates also appear in convexity adjustments for futures-style products."}
{"title": "Basis Swap Spread", "equation": "s_{\\text{basis}} = s_{\\text{float1}} - s_{\\text{float2}}", "category": "Interest Rate Derivatives", "tags": ["basis-swap", "basis-spread", "libor", "fed-funds", "floating-leg", "interest-rate-derivatives", "liquidity-premium", "credit-spread"], "note": "## Equation Variables\nA basis swap exchanges cash flows between two different floating rate indices (e.g., USD-LIBOR and Fed Funds), with the spread as the key pricing parameter.\n\n- **$s_{\\text{basis}}$**: Basis swap spread (quoted in basis points per annum).\n- **$s_{\\text{float1}}$**: Par swap rate for the first floating leg (e.g., 3M USD-LIBOR).\n- **$s_{\\text{float2}}$**: Par swap rate for the second floating leg (e.g., Fed Funds).\n- **$n$**: Number of payment periods in the swap.\n- **$\\delta_i$**: Accrual factors for each floating leg.\n\n## Interpretation\nThe basis spread reflects the relative value and liquidity of two floating rate indices. When $s_{\\text{float1}} > s_{\\text{float2}}$, the basis is positive (the first index is more expensive). The basis swap exchanges floating-for-floating at this spread, isolating the basis risk from the underlying rate level. The spread compensates for differences in credit risk, liquidity, and market depth.\n\n## Assumptions\n- Both legs use the same notional principal.\n- Payment frequencies and day counts are aligned.\n- No optionality in the basis swap.\n- Market liquidity allows quoting tight bid-ask spreads.\n\n## Practical Use\nBasis swaps are used to transform exposure from one floating index to another (e.g., LIBOR to Fed Funds for collateralized trades). They capture funding spreads and relative value between money markets. The basis widens during stress (e.g., 2008, 2020) when LIBOR funding becomes expensive relative to OIS."}
{"title": "Cross-Currency Basis", "equation": "\\text{basis} = s_{\\text{ccy}} - (r_{\\text{dom}} - r_{\\text{for}})", "category": "Interest Rate Derivatives", "tags": ["cross-currency-basis", "ccy-basis", "xccy", "funding-spread", "libor", "fx-swap", "interest-rate-derivatives", "collateral"], "note": "## Equation Variables\nThe cross-currency (XCCY) basis reflects the deviation from covered interest rate parity (CIP) in currency pairs, capturing funding and liquidity imbalances.\n\n- **$\\text{basis}$**: Cross-currency basis spread (in basis points, added to foreign leg).\n- **$s_{\\text{ccy}}$**: Quoted cross-currency basis swap spread.\n- **$r_{\\text{dom}}$**: Domestic interest rate (e.g., USD OIS).\n- **$r_{\\text{for}}$**: Foreign interest rate (e.g., EUR EURIBOR or OIS).\n- **$r_{\\text{dom}} - r_{\\text{for}}$**: Interest rate differential between currencies.\n\n## Interpretation\nUnder perfect CIP, the basis would be zero. In practice, the basis reflects funding constraints: when banks cannot borrow cheaply in a currency, the basis becomes negative (they pay extra to borrow the currency in the XCCY market). The basis compensates for credit risk, collateral scarcity, and regulatory costs (balance sheet usage).\n\n## Assumptions\n- Basis swaps involve exchanging notional and interest in two currencies.\n- FX spot rate is fixed at trade inception (no currency risk).\n- Basis is quoted for standard tenors (1Y, 5Y, 10Y).\n- Basis is typically added to the foreign currency leg.\n\n## Practical Use\nXCCY basis is a key indicator of funding stress in currency markets. Negative bases (e.g., EUR/USD, USD/JPY) indicate dollar shortage. Hedge funds exploit basis convergence trades. The basis widened dramatically in 2008 and 2020, revealing structural fragilities in FX swap markets."}
{"title": "Convexity Adjustment", "equation": "F^{\\text{convex}} = F^{\\text{forward}} + \\frac{1}{2} \\sigma^2 T_1 T_2", "category": "Interest Rate Derivatives", "tags": ["convexity-adjustment", "futures", "forward-rate", "libor", "volatility", "mark-to-market", "interest-rate-derivatives", "pricing-adjustment"], "note": "## Equation Variables\nThe convexity adjustment corrects the relationship between futures prices and forward rates, accounting for the mark-to-market feature of futures contracts.\n\n- **$F^{\\text{convex}}$**: Convexity-adjusted forward rate (from futures price).\n- **$F^{\\text{forward}}$**: Forward rate from the term structure model (no convexity adjustment).\n- **$\\sigma$**: Volatility of the underlying interest rate (annualized).\n- **$T_1$**: Time to first rate fixing.\n- **$T_2$**: Time to second rate fixing.\n- **$T = T_1 + \\delta/2$**: Average time to the rate observation.\n\n## Interpretation\nFutures prices differ from forward prices due to daily mark-to-market. When rates are volatile, the daily reset feature creates a correlation between rate levels and the reinvestment of variation margin. This correlation (convexity) is positive for long positions when rates are positively correlated with the reinvestment rate. The adjustment is typically small (1-5 bps) but material for pricing precision.\n\n## Assumptions\n- Constant volatility $\\sigma$ for the underlying rate.\n- Linear payoff structure (no optionality).\n- Correlations drive the adjustment magnitude.\n- Rate and reinvestment are positively correlated.\n\n## Practical Use\nConvexity adjustments are critical when bootstrapping curves from futures prices (e.g., Eurodollar futures). Traders adjust futures quotes to match forward rates for swap curve construction. The adjustment depends on the correlation between rates and is calibrated to swaption volatilities."}
{"title": "Annuity (Swap Present Value Factor)", "equation": "A(t, T) = \\sum_{i=1}^{n} \\delta_i P(t, t_i)", "category": "Interest Rate Derivatives", "tags": ["annuity", "pv-factor", "swap-present-value", "pvbp", "basis-point-value", "interest-rate-swap", "fixed-income-derivatives", "risk-metrics"], "note": "## Equation Variables\nThe annuity (also called the present value of a basis point, PVBP, or DV01) is the sum of discounted accrual factors for a series of fixed cash flows.\n\n- **$A(t, T)$**: Annuity (PV factor) from valuation date $t$ to swap maturity $T$.\n- **$\\delta_i$**: Accrual factor for the $i$-th payment period.\n- **$P(t, t_i)$**: Discount factor from $t$ to payment date $t_i$.\n- **$n$**: Number of remaining payment dates.\n- **$T$**: Swap maturity (last payment date).\n\n## Interpretation\nThe annuity represents the present value of receiving 1 basis point per period on the fixed leg of a swap. It is the key scaling factor for converting basis point sensitivities into present values. A 1 bp change in the swap rate changes the PV by exactly the annuity amount. The annuity is central to swap pricing, hedging, and risk management.\n\n## Assumptions\n- Fixed payments are regular (annual, semiannual, quarterly).\n- Day count conventions are consistent across all periods.\n- No optionality (plain vanilla swap).\n- Annuity is calculated using the valuation discount curve.\n\n## Practical Use\nThe annuity is used to quote swap spreads, calculate DV01 for hedging, and scale option-adjusted spreads (OAS). It decreases as the swap approaches maturity (fewer payments remaining). The annuity-to-par ratio is used in CMS pricing and swap rate interpolation."}
{"title": "Constant Maturity Swap Rate", "equation": "\\text{CMS}(T_0) = \\sum_{i=1}^{n} w_i R(t_0, t_{i-1}, t_i)", "category": "Interest Rate Derivatives", "tags": ["cms", "constant-maturity-swap", "swap-rate", "weighting", "forward-rate", "interest-rate-derivatives", "replication", "volatility"], "note": "## Equation Variables\nA Constant Maturity Swap (CMS) exchanges a fixed or floating leg for payments based on a constantly maturing swap rate (e.g., 10Y swap rate).\n\n- **$\\text{CMS}(T_0)$**: CMS rate at observation time $T_0$ (e.g., 10Y swap rate observed today).\n- **$w_i$**: Weights derived from the CMS product specifications (often $\\delta_i P(t_0, t_i)$).\n- **$R(t_0, t_{i-1}, t_i)$**: Swap rate for tenor $(t_i - t_{i-1})$ observed at $t_0$.\n- **$t_0$**: CMS observation date (rate setting date).\n- **$t_i$**: CMS payment dates.\n- **$n$**: Number of CMS payment periods.\n\n## Interpretation\nThe CMS rate is the market-quoted swap rate for a standard tenor (e.g., 2Y, 5Y, 10Y, 30Y) observed at each fixing date. The weights depend on the specific CMS structure (linear vs. non-linear payoffs). CMS products are sensitive to the volatility of long-term swap rates, making them attractive for yield enhancement strategies.\n\n## Assumptions\n- CMS rate is observed from liquid market quotes.\n- Weights are fixed at trade inception.\n- CMS rate follows a lognormal distribution (for Black-style pricing).\n- No early termination or American-style features.\n\n## Practical Use\nCMS swaps and options are used for yield enhancement and duration management. CMS caps/floors are priced using a shifted lognormal model with correlation inputs. The CMS market is less liquid than vanilla swaps but offers unique exposure to the long end of the curve."}
{"title": "Mean Reversion Rate", "equation": "\\kappa = -\\frac{1}{dt} \\mathbb{E}\\left[ \\frac{dr_t}{r_t} \\right]", "category": "Interest Rate Derivatives", "tags": ["mean-reversion", "ou-process", "short-rate", "calibration", "vasicek", "interest-rate-models", "dynamics", "drift"], "note": "## Equation Variables\nThe mean reversion rate $\\kappa$ (kappa) characterizes how quickly the short rate reverts to its long-run mean in affine term structure models.\n\n- **$\\kappa$**: Mean reversion rate (speed of reversion to mean).\n- **$dr_t$**: Change in the short rate over interval $dt$.\n- **$r_t$**: Current short rate level.\n- **$dt$**: Small time increment.\n- **$\\mathbb{E}[\\cdot]$**: Expectation operator under the risk-neutral measure.\n- **$\\theta$**: Long-run mean level of the short rate.\n\n## Interpretation\nIn models like Vasicek or Hull-White, the short rate follows $dr_t = \\kappa(\\theta - r_t)dt + \\sigma dW_t$. The mean reversion rate $\\kappa$ determines how quickly deviations from the mean decay. Higher $\\kappa$ means faster reversion (shorter effective horizon) and lower sensitivity to long-term rate movements. $\\kappa$ is calibrated to market data (swaptions, caps/floors).\n\n## Assumptions\n- Mean reversion is linear (affine drift).\n- Volatility $\\sigma$ is constant or deterministic.\n- Short rate remains positive (may require shift for negative rates).\n- Model fits the initial term structure exactly.\n\n## Practical Use\n$\\kappa$ is a key calibration parameter affecting all interest rate derivative prices. Typical values range from 0.01 to 0.15 for major currencies. Higher $\\kappa$ (faster reversion) compresses swaption volatilities across expiries. The mean reversion-holding period relationship is critical for VaR and stress testing."}
{"title": "Instantaneous Forward Rate Covariance", "equation": "dF(t,T) \\cdot dF(t,S) = \\rho(t,T,S) \\sigma_F(t,T) \\sigma_F(t,S) dt", "category": "Interest Rate Derivatives", "tags": ["forward-rate-covariance", "correlation", "volatility-structure", "hjm-model", "gaussian", "interest-rate-models", "dynamics", "multifactor"], "note": "## Equation Variables\nThe instantaneous covariance structure defines how forward rates at different maturities move together, a cornerstone of multifactor interest rate models.\n\n- **$dF(t,T)$**: Diffusion of the forward rate for maturity $T$ at time $t$.\n- **$dF(t,S)$**: Diffusion of the forward rate for maturity $S$ at time $t$.\n- **$\\rho(t,T,S)$**: Instantaneous correlation between forward rates at maturities $T$ and $S$.\n- **$\\sigma_F(t,T)$**: Volatility of the forward rate with maturity $T$.\n- **$\\sigma_F(t,S)$**: Volatility of the forward rate with maturity $S$.\n- **$dt$**: Infinitesimal time increment.\n\n## Interpretation\nThe covariance structure captures how rates of different tenors move together. $\\rho = 1$ implies perfect correlation (parallel shifts); $\\rho < 1$ allows for twists and bends in the yield curve. The full covariance matrix enables Monte Carlo simulation of the yield curve evolution. This structure underpins the Heath-Jarrow-Morton (HJM) framework.\n\n## Assumptions\n- Forward rate dynamics are driven by Brownian motions.\n- Volatility and correlation are deterministic (Gaussian models).\n- No arbitrage is enforced through the HJM drift condition.\n- Market prices of risk are incorporated.\n\n## Practical Use\nThe covariance structure is calibrated to swaption volatilities and correlations. Principal component analysis (PCA) typically finds 2-3 dominant factors (level, steepness, curvature). Gaussian models (e.g., G2++, LMM) use this structure for pricing complex exotics. Correlation matrices are critical for Bermudan swaption and CMS product pricing."}
{"title": "Hazard Rate to Default Probability", "equation": "Q(t,T) = 1 - \\exp\\left(-\\int_t^T \\lambda_s\\,ds\\right)", "category": "Credit Risk", "tags": ["hazard-rate", "default-probability", "survival-probability", "intensity-model", "reduced-form", "credit-risk", "exponential", "stochastic-processes", "default-intensity", "credit-modelling"], "note": "## Equation Variables\nThe hazard rate framework is the foundation of reduced-form credit risk models, converting an intensity (hazard rate) into a probability of default over a time interval.\n\n- **$Q(t,T)$**: Default probability between times $t$ and $T$, representing $\\mathbb{P}(\\tau \\le T \\mid \\tau > t)$.\n- **$\\lambda_{s}$**: Hazard rate (default intensity) at time $s$, interpreted as the instantaneous conditional default rate: $\\lambda_s = \\lim_{\\Delta \\to 0} \\frac{1}{\\Delta} \\mathbb{P}(\\tau \\le s+\\Delta \\mid \\tau > s)$.\n- **$\\int_{t}^{T} \\lambda_{s}\\,ds$**: Integrated hazard rate over the survival period.\n- **$\\exp(\\cdot)$**: Exponential survival function for constant or time-varying intensity.\n\n## Interpretation\nThe survival probability $P_{surv}(t,T) = \\exp\\left(-\\int_t^T \\lambda_s\\,ds\\right)$ is the probability of no default by $T$ given survival at $t$. The default probability is one minus survival. This framework captures default as a surprise event with no recovery in the default state. A constant hazard rate $\\lambda$ gives exponentially distributed default times with the memoryless property, while time-varying $\\lambda_t$ enables fitting complex credit curves. The hazard rate represents the market price of default risk embedded in observable instruments like CDS spreads.\n\n## Assumptions\n- Default intensity $\\lambda_t$ is $\\mathcal{F}_t$-adapted and non-negative\n- Hazard rate can be deterministic or stochastic (affine, mean-reverting)\n- No recovery at default (recovery is handled separately in pricing formulas)\n- Market prices of default risk are captured in the calibrated $\\lambda_t$\n- Default is an unexpected event that cannot be perfectly predicted\n\n## Practical Use\nHazard rates are calibrated to CDS spreads or bond prices. For constant hazard models, $\\lambda$ is directly recovered using the credit triangle approximation. Time-varying hazard rates (affine processes, Cox-Ingersoll-Ross) enable fitting the entire term structure of credit spreads. This framework is essential for CVA/DVA calculations, wrong-way risk modeling, counterparty credit exposure analysis, and pricing credit derivatives. The analytical tractability of constant intensity makes it the starting point for more sophisticated reduced-form models."}
{"title": "Survival Probability Constant Hazard", "equation": "P_{surv}(t,T) = e^{-\\lambda(T-t)}", "category": "Credit Risk", "tags": ["survival-probability", "constant-hazard", "exponential-distribution", "memoryless", "reduced-form", "credit-risk", "default-timing", "analytical-solutions", "intensity-model", "credit-modelling"], "note": "## Equation Variables\nThe survival probability under constant hazard rate follows the exponential distribution, providing the simplest reduced-form credit model.\n\n- **$P_{surv}(t,T)$**: Survival probability from time $t$ to time $T$, the probability of no default occurring\n- **$\\lambda$**: Constant hazard rate (annualized), representing the instantaneous conditional default rate\n- **$T-t$**: Time horizon in years, the duration of the survival period\n- **$e$**: Base of natural logarithm, approximately 2.71828\n- **Exponent**: Negative of hazard rate times time horizon\n\n## Interpretation\nThe exponential survival function has the memoryless property—default probability depends only on the remaining time horizon, not on how long the reference entity has already survived. This is both a mathematical convenience and a limitation. The survival probability decreases monotonically with time, with the rate of decrease determined by $\\lambda$. At $t=0$, $P_{surv}(0,T) = e^{-\\lambda T}$, and as $T \\to \\infty$, survival approaches zero. The parameter $\\lambda$ directly gives the expected time to default as $1/\\lambda$.\n\n## Assumptions\n- Constant hazard rate $\\lambda$ over the entire time horizon\n- Memoryless default time distribution (exponential)\n- No deterministic or stochastic intensity variations\n- Infinite horizon survival probability approaches zero\n- No jumps or regime changes in credit quality\n- Default occurs as a Poisson process with rate $\\lambda$\n\n## Practical Use\nConstant hazard models are used for initial approximations, quick calculations, and pedagogical purposes. They are embedded in many analytical formulas for CVA and CDS pricing. When calibrated to a single-point CDS spread using the credit triangle, the constant hazard provides a baseline for more sophisticated time-varying intensity models. The analytical simplicity makes it useful for teaching credit risk concepts, rapid prototyping, and benchmarking more complex models. It serves as the foundation before extending to affine intensity models with term structure."}
{"title": "Credit Valuation Adjustment", "equation": "CVA = (1 - R) \\int_0^T EE(t)  dPD(t)", "category": "Credit Risk", "tags": ["credit-valuation-adjustment", "cva", "counterparty-risk", "expected-exposure", "loss-given-default", "credit-risk", "derivative-pricing", "fair-value", "risk-management", "-basel"], "note": "## Equation Variables\nCVA represents the market value of counterparty credit risk, calculated as the present value of expected losses from default.\n\n- **$CVA$**: Credit Valuation Adjustment, the amount to subtract from the risk-free derivative value\n- **$R$**: Recovery rate, expected recovery as a fraction of exposure\n- **$(1-R)$**: Loss Given Default (LGD), the proportion of exposure lost in default\n- **$EE(t)$**: Expected Exposure at time $t$, the mean of positive mark-to-market values\n- **$dPD(t)$**: Risk-neutral default probability measure, the probability of default in $[t, t+dt)$\n- **$T$**: Time horizon of the derivative or portfolio\n- **$\\int_0^T$**: Integration over the full time horizon\n\n## Interpretation\nCVA answers the question: \"How much should we subtract from our derivative value because the counterparty might default before we receive our expected cash flows?\" The $(1-R)$ term converts expected exposure to expected loss by applying LGD. The integral captures the timing structure—earlier defaults matter more because their losses are less discounted. $EE(t)$ is typically computed from Monte Carlo simulation of exposure paths, as exposure profiles depend on future market variable evolution (interest rates, FX, equities). A higher exposure, higher default probability, or lower recovery all increase CVA.\n\n## Assumptions\n- Risk-neutral default probabilities calibrated to market prices (CDS, bonds)\n- Independence between exposure and default (base case, no wrong-way risk)\n- Known recovery rate $R$ (or deterministic assumption)\n- No bilateral netting benefits considered in unilateral CVA\n- $EE(t)$ computed under the risk-neutral measure\n- Exposure is positive from our perspective (we are owed money)\n\n## Practical Use\nCVA is a fundamental adjustment in OTC derivative pricing post-2008 crisis. It is calculated daily for risk management, disclosure (IFRS 9, ASC 820), and regulatory capital purposes. The integral form enables numerical integration once exposure profiles are known through Monte Carlo simulation. Advanced implementations use full exposure distributions (Expected Positive Exposure, Effective EPE) rather than just point estimates. CVA trading has emerged as a distinct desk activity, with CVA desks hedging exposure to counterparty credit risk through CDS positions and other derivatives."}
{"title": "Debit Valuation Adjustment", "equation": "DVA = (1 - R_L) \\int_0^T DFE(t)  dPD_L(t)", "category": "Credit Risk", "tags": ["debit-valuation-adjustment", "dva", "own-credit-risk", "bilateral-cva", "funding-cost", "derivative-pricing", "credit-risk", "counterparty-risk", "fair-value", "accounting"], "note": "## Equation Variables\nDVA represents the benefit to the derivative holder from their own potential default, the counterparty to CVA.\n\n- **$DVA$**: Debit Valuation Adjustment, the amount to add from potential own default\n- **$R_L$**: Own recovery rate, expected recovery as a fraction of liability\n- **$(1-R_L)$**: LGD from the counterparty's perspective when we default\n- **$DFE(t)$**: Discounted Expected Funding cost or Expected Liability at time $t$\n- **$dPD_L(t)$**: Own risk-neutral default probability measure\n- **$T$**: Time horizon of the derivative or portfolio\n- **$\\int_0^T$**: Integration over the full time horizon\n\n## Interpretation\nDVA creates an apparent paradox: a company with worse credit quality appears to have more valuable derivatives! This is economically correct—we benefit from our own potential default when we owe money to the counterparty. If the counterparty would receive money from us and we default, they lose the expected payment—creating a benefit that increases our derivative value. The bilateral CVA framework includes both CVA (counterparty default risk) and DVA (own default risk), typically as $CVA - DVA$. The $DFE$ term captures funding costs—if we must fund our obligations at a spread, this creates additional value.\n\n## Assumptions\n- Bilateral counterparty relationship where both parties can default\n- Counterparty can enforce claims against us\n- Own default is independent of exposure (no wrong-way DVA)\n- Recovery rate applicable to our obligations is known\n- $DFE$ represents the economic cost of funding positions\n- Legal framework allows counterparty to claim against us in default\n\n## Practical Use\nDVA is included in bilateral CVA calculations ($CVA - DVA$). Some institutions have moved to unilateral CVA (CVA only) to avoid DVA volatility and accounting asymmetry. DVA hedges typically involve buying CDS protection on the firm's own name—a strategy that has drawn regulatory scrutiny. The debate over DVA accounting treatment continues, with some arguing it should be eliminated from fair value accounting entirely because it creates pro-cyclicality (improving credit quality increases losses). Basel III and IFRS 13 guidance continue to evolve on this topic."}
{"title": "Merton Distance to Default", "equation": "DD = \\frac{\\ln(V/K) + (\\mu - \\sigma_v^2/2)T}{\\sigma_v \\sqrt{T}}", "category": "Credit Risk", "tags": ["distance-to-default", "merton-model", "firm-value", "structural-model", "default-probability", "credit-risk", "option-pricing", "asset-volatility", "leverage", "kmv"], "note": "## Equation Variables\nThe Merton Distance to Default measures how many standard deviations the firm's asset value is from the default barrier.\n\n- **$DD$**: Distance to Default, number of standard deviations to the default barrier\n- **$V$**: Current firm value (market value of assets)\n- **$K$**: Default barrier, typically total debt or strike price\n- **$\\mu$**: Expected return on assets (drift of asset value process)\n- **$\\sigma_v$**: Volatility of firm value (asset volatility)\n- **$T$**: Time horizon, typically one year\n- **$\\ln$**: Natural logarithm\n- **$\\sqrt{T}$**: Square root of time (volatility scales with square root of horizon)\n\n## Interpretation\nDistance to Default is intuitive: it measures safety in terms of asset volatility. A $DD = 2$ means firm assets are 2 standard deviations from the default barrier, implying roughly 2.5% annual default probability under normality assumptions. Higher leverage (lower $V/K$) reduces DD. Higher volatility increases the denominator (reducing DD) and the negative drift term $\\sigma_v^2/2$ (also reducing DD through volatility drag). The model views equity as a call option on the firm's assets, with default occurring when asset value falls below the debt barrier.\n\n## Assumptions\n- Firm value follows geometric Brownian motion: $dV = \\mu V dt + \\sigma_v V dW$\n- Volatility $\\sigma_v$ is constant over the horizon\n- No dividends or coupon payments during the period\n- Default is instantaneous when $V \\le K$\n- Capital structure is simple (equity and zero-coupon debt)\n- Markets are efficient and complete\n- Risk-neutral pricing applies for derivative valuation\n\n## Practical Use\nDistance to Default is used by Moody's Analytics (KMV model) and widely in credit portfolio management. The DD is converted to default probabilities using the standard normal distribution: $PD = N(-DD)$. Key advantages: market-implied (uses equity prices), forward-looking, and sensitive to volatility changes. Limitations include requiring solving for $V$ and $\\sigma_v$ from equity prices (non-linear system), assuming lognormal distribution, and oversimplified capital structure. The model systematically underestimates default probability for highly levered firms due to thin tails."}
{"title": "Default Probability from Merton Model", "equation": "PD = N(-DD)", "category": "Credit Risk", "tags": ["default-probability", "merton-model", "distance-to-default", "normal-distribution", "structural-model", "credit-risk", "kmv", "firm-value", "lognormal", "credit-analysis"], "note": "## Equation Variables\nThe default probability from the Merton model uses the standard normal cumulative distribution function to convert Distance to Default.\n\n- **$PD$**: Default probability (annual or period probability)\n- **$N(\\cdot)$**: Standard normal cumulative distribution function\n- **$-DD$**: Negative of Distance to Default\n- **$DD$**: Distance to Default from the Merton model\n\n## Interpretation\nThe normal distribution mapping provides an analytical default probability estimate from the Merton framework. The formula's elegance is a key reason for the model's persistence: DD can be estimated from market data (equity prices, equity volatility), and PD follows directly. Under the lognormal assumption for firm value, log-returns are normally distributed, making $N(-DD)$ the exact default probability. When $DD$ is positive (assets above the barrier), $-DD$ is negative, and $N(\\text{negative})$ gives a probability less than 0.5. A $DD$ of 0 (at the barrier) gives $PD = 0.5$, while $DD = 2$ gives $PD \\approx 0.0228$.\n\n## Assumptions\n- Asset returns are normally distributed\n- Firm value process has no jumps (continuous diffusion)\n- The normal distribution is a good approximation for extreme events\n- Volatility is constant over the horizon\n- Barrier is fixed and known\n- Implicit assumption of continuous monitoring for barrier crossing\n\n## Practical Use\nMerton PDs are used for credit analysis, risk pricing, and regulatory capital. However, the model systematically underestimates default probability for highly levered firms because the normal distribution has thin tails and doesn't capture rare catastrophic events. Extensions include: jump-diffusion models (to capture rare events), stochastic volatility models, and alternative distributions (Student-t, skewed-t) for better tail modeling. The model is foundational for understanding the link between equity markets and credit risk, even if its empirical performance varies across firms and market conditions."}
{"title": "Black-Cox First Passage Model", "equation": "V(t) = K \\exp(-r(T-t))  when barrier breached", "category": "Credit Risk", "tags": ["black-cox", "first-passage", "barrier-option", "default-barrier", "structural-model", "credit-risk", "first-hitting-time", "firm-value", "boundary-crossing", "workout"], "note": "## Equation Variables\nThe Black-Cox first passage model enables default to occur before maturity when firm value crosses a barrier.\n\n- **$V(t)$**: Firm value at time $t$\n- **$K$**: Default barrier, typically total debt value\n- **$r$**: Risk-free interest rate\n- **$T$**: Time horizon (final maturity)\n- **$t$**: Current time\n- **$\\exp$**: Exponential function\n- **$r(T-t)$**: Risk-free return over remaining period\n\n## Interpretation\nFirst-passage models recognize that default need not wait until maturity—creditors can act when firm value deteriorates significantly. The barrier $K$ represents the point where debt renegotiation or liquidation becomes optimal, and $K \\exp(-r(T-t))$ shows the barrier's present value under risk-free discounting. The model produces default probabilities higher than Merton's because default can occur at any time before $T$, not just at maturity. The solution involves hitting probabilities for Brownian motion, typically using the method of images or conformal mapping techniques from barrier option pricing.\n\n## Assumptions\n- Firm value follows geometric Brownian motion: $dV = \\mu V dt + \\sigma_v V dW$\n- Default barrier is constant over time\n- Instantaneous default upon barrier crossing\n- No reorganization or restructuring possibilities (absorbing barrier)\n- Complete markets with continuous trading\n- Risk-neutral pricing framework for valuation\n- Barrier represents debt present value with continuous compounding\n\n## Practical Use\nBlack-Cox provides more realistic default timing than Merton, particularly for firms with high leverage or volatile assets. The barrier interpretation maps to covenant violations in debt contracts—crossing certain thresholds triggers default events. Extensions include: declining barriers (as debt amortizes over time), moving barriers (dependent on interest rates), and multiple barriers (senior and subordinated debt with different priorities). The first-passage framework underlies many modern reduced-form intensity models and provides the theoretical foundation for understanding credit events in structural models."}
{"title": "CDS Spread Approximation", "equation": "s \\approx (1 - R) \\lambda", "category": "Credit Risk", "tags": ["cds-spread", "approximation", "hazard-rate", "loss-given-default", "credit-triangle", "credit-risk", "pricing", "calibration", "protection", "derivative"], "note": "## Equation Variables\nThis simple approximation shows that CDS spread approximately equals LGD times hazard rate.\n\n- **$s$**: CDS spread (annualized, in basis points or decimal)\n- **$R$**: Recovery rate (expected recovery as fraction of notional)\n- **$(1-R)$**: Loss Given Default (LGD)\n- **$\\lambda$**: Hazard rate (annual default intensity)\n- **$\\approx$**: Approximation symbol (exact under continuous assumptions)\n\n## Interpretation\nThe formula reveals the economic essence of credit risk pricing: the CDS spread compensates the protection seller for expected losses. The spread should equal the product of loss given default and default intensity. Higher default risk (higher $\\lambda$) requires higher spreads. Lower expected recovery (higher LGD) requires higher spreads. This decomposition is fundamental to all credit derivative pricing. The approximation assumes continuous premium payments, no accrual on defaults, and standard day count conventions. It provides intuition for pricing and hedging credit risk.\n\n## Assumptions\n- Continuous premium payments (discrete effects small for standard tenors)\n- No upfront CDS payments (standardized spread quotes)\n- Protection starts immediately (spot-start CDS)\n- Default occurs at Poisson intensity $\\lambda$\n- Constant hazard rate over CDS term\n- Risk-neutral default probability equals physical probability\n- No accrued premium on default (simplified for approximation)\n\n## Practical Use\nThis approximation is used for quick pricing and for understanding CDS dynamics. Actual CDS pricing requires solving for the hazard rate that makes the CDS PV zero, which involves iterative methods. The approximation is accurate for standard CDS tenors when hazard rates are moderate. For steep credit curves or long tenors, the continuous approximation needs correction for discrete default timing and term structure effects. Traders use this as a sanity check: implied hazard rates from CDS should be consistent with observed spreads and assumed recovery rates."}
{"title": "CDS Present Value Standard Model", "equation": "PV = \\sum \\Delta_i Q_i P(0,t_i) - s \\sum \\Delta_i Q_i P(0,t_i) / 2", "category": "Credit Risk", "tags": ["cds-valuation", "present-value", "protection-leg", "premium-leg", "risky-annuity", "credit-derivatives", "pricing", "cashflows", "discounting", "survival-probability"], "note": "## Equation Variables\nThe standard CDS PV formula from the protection buyer's perspective equates protection and premium legs.\n\n- **$PV$**: Present value of the CDS (protection buyer positive = cheap protection)\n- **$\\Delta_i$**: Accrual factor for period $i$ (time between payment dates)\n- **$Q_i$**: Risk-neutral survival probability to time $t_i$\n- **$P(0,t_i)$**: Discount factor from 0 to $t_i$ (risk-free)\n- **$s$**: CDS spread (annualized)\n- **$\\sum$**: Sum over all premium/payment periods\n- **$/2$**: Approximation for risky present value of premium leg\n\n## Interpretation\nThe first term is the protection leg PV: expected present value of protection payments received if default occurs. The second term is the premium leg PV: expected present value of premium payments made, weighted by survival probability. At fair spread, these legs are equal and $PV = 0$. The formula uses the \"risky annuity\" or \"CDS duration\" to weight payments by survival probability. The protection leg pays $(1-R)$ if default occurs between dates, while the premium leg sums coupon payments weighted by survival (we only pay if no default).\n\n## Assumptions\n- Recovery rate $R$ is constant and known\n- Default can only occur at period ends (discrete approximation)\n- No accrued premium on default (simplified for standard formula)\n- Risk-neutral measure for pricing\n- Flat hazard rate within each period (piecewise constant)\n- Standard payment frequencies (quarterly, semiannual)\n- Actual/360 or 30/360 day count conventions\n\n## Practical Use\nThis formula is the workhorse of CDS valuation. In practice, iterative methods solve for the fair spread given market quotes. The formula extends to: forward-starting CDS (hazard rate curves), recovery swaps (endogenous recovery), credit indices (portfolio of entities), and contingent CDS (triggers based on other events). The discrete version uses the actual accrual convention and includes proper default probability calculation within each period. Market standard is ISDA CDS model for exact calculations."}
{"title": "Credit Spread Yield Difference", "equation": "s = -\\frac{\\ln P_{risky}(T)}{T} + y_{risk-free}(T)", "category": "Credit Risk", "tags": ["credit-spread", "yield-difference", "bond-yield", "risky-bond", "risk-free", "term-structure", "credit-risk", "yield-curve", "spread-decomposition", "z-spread"], "note": "## Equation Variables\nCredit spread is the yield difference between a risky bond and a risk-free bond of the same maturity.\n\n- **$s$**: Credit spread (annualized, typically in basis points)\n- **$P_{risky}(T)$**: Risky discount factor (price of T-year risky zero-coupon bond)\n- **$y_{risk-free}(T)$**: Risk-free yield for maturity $T$\n- **$\\ln$**: Natural logarithm\n- **$T$**: Time to maturity in years\n- **$+$**: Addition (spread equals yield difference)\n\n## Interpretation\nCredit spreads are observable market measures of default risk. They capture the extra compensation investors require for bearing default risk beyond the risk-free rate. The logarithmic formula converts bond prices to yields properly, ensuring correct compounding. A higher spread means the risky bond yields more but trades at a lower price relative to risk-free equivalents. The spread decomposition reveals: $s \\approx$ expected loss component ($LGD \\times \\lambda$) plus risk premium (compensation for uncertainty in default timing and recovery). Spreads reflect both fundamental credit risk and technical market factors.\n\n## Assumptions\n- Bonds are zero-coupon for clean yield calculation (Z-spread extends to coupons)\n- Risk-free yield curve is well-defined and observable (sovereign curve)\n- No liquidity effects (or liquidity premium is constant across tenors)\n- Credit spread is primarily compensation for default risk\n- Interest rates and credit risk are independent (no correlation)\n- Default occurs at maturity only (for zero-coupon simplification)\n\n## Practical Use\nCredit spreads are monitored daily across markets (sovereign, investment grade, high yield). They enable cross-asset comparison: bond spreads versus CDS spreads should be equivalent under no-arbitrage. Spread changes signal credit quality deterioration (widening) or improvement (tightening). Spread decomposition is used in credit research to separate fundamentals (expected loss) from technical factors (liquidity, demand-supply). The Z-spread adds a constant to risk-free rates to match risky bond prices, while the OAS adjusts for embedded options."}
{"title": "Expected Loss", "equation": "EL = PD \\times LGD \\times EAD", "category": "Credit Risk", "tags": ["expected-loss", "probability-of-default", "loss-given-default", "exposure-at-default", "credit-risk", "risk-metrics", "pricing", "capital", "provisions", "basel"], "note": "## Equation Variables\nExpected Loss combines the three fundamental components of credit risk into a single loss estimate.\n\n- **$EL$**: Expected Loss (average loss over many exposures)\n- **$PD$**: Probability of Default (probability of default over the horizon)\n- **$LGD$**: Loss Given Default (proportion of exposure lost in default)\n- **$EAD$**: Exposure at Default (exposure level when default occurs)\n- **$\\times$**: Multiplication of all three components\n\n## Interpretation\nExpected Loss answers: \"On average, how much will we lose from this exposure?\" It is the statistical mean loss across many similar exposures—not a single outcome but the central tendency. EL is the baseline credit cost embedded in pricing. If we charge less than EL in credit spread, we expect to lose money on the exposure over time. The multiplicative structure means each component must be estimated carefully—a small error in any factor propagates to EL. EL applies to individual exposures and can be aggregated to portfolio level by summing or using correlation adjustments.\n\n## Assumptions\n- PD, LGD, EAD are independent (or independence is a reasonable approximation)\n- Single-period horizon (or components defined consistently across periods)\n- PD is unconditional (not dependent on macroeconomic conditions)\n- EAD captures the maximum exposure or CCF correctly converts limit to EAD\n- LGD is independent of the cause of default\n- Large portfolio where law of large numbers applies\n\n## Practical Use\nExpected Loss is embedded in regulatory capital (minimum capital = EL under Basel), loan pricing (spread $\\geq$ EL / expected return), and risk reporting. It is the baseline for portfolio credit risk: actual losses hover around EL in benign environments but can exceed EL dramatically in stress. Stress testing increases PDs and potentially LGDs while keeping EL as the central benchmark. Provisioning (IFRS 9, CECL) uses EL-type calculations for expected credit losses. Banks price loans to cover EL plus capital costs plus return requirements."}
{"title": "Unexpected Loss", "equation": "UL = \\sqrt{PD(1-PD)LGD^2EAD^2 + PD \\cdot LGD^2 \\cdot EAD^2 \\cdot \\sigma_{PD}^2}", "category": "Credit Risk", "tags": ["unexpected-loss", "volatility", "credit-risk", "risk-metrics", "capital-requirements", "variance", "correlation", "portfolio-risk", "stress-testing", "basel"], "note": "## Equation Variables\nUnexpected Loss measures the volatility or dispersion of potential losses around Expected Loss.\n\n- **$UL$**: Unexpected Loss (standard deviation of loss distribution)\n- **$PD$**: Probability of Default\n- **$LGD$**: Loss Given Default\n- **$EAD$**: Exposure at Default\n- **$\\sigma_{PD}$**: Volatility of PD (standard deviation of default probability)\n- **$(1-PD)$**: Probability of survival\n- **$\\sqrt{\\cdot}$**: Square root of the variance expression\n\n## Interpretation\nExpected Loss is the mean; Unexpected Loss is the standard deviation. A loan with $EL = 1\\%$ and $UL = 2\\%$ has high uncertainty—actual losses could range from $-3\\%$ to $+5\\%$ with significant probability. The first term in the bracket captures default timing uncertainty (binomial variance), while the second captures PD uncertainty (cyclical and model risk). The square root combines these independent sources of variance. UL is critical for capital adequacy because it captures the risk that actual losses will deviate from expectations.\n\n## Assumptions\n- PD uncertainty is independent of default timing\n- LGD and EAD are constant (no variance in these components modeled)\n- PD volatility is estimated externally (from ratings migrations or models)\n- Loss distribution is approximately normal for UL calculation\n- Single-factor or additivity assumptions for portfolio aggregation\n- Independence between systematic and idiosyncratic risk components\n\n## Practical Use\nUnexpected Loss drives economic capital requirements. Banks hold capital against UL, not EL—regulatory capital formulas (Basel IRB) incorporate UL through risk weights. Portfolio UL is typically less than sum of individual ULs due to diversification benefits. Credit portfolio models (CreditMetrics, PortfolioManager, CreditRisk+) quantify portfolio UL by incorporating default correlations. UL estimates are sensitive to PD volatility assumptions, which can vary significantly across economic cycles and portfolios."}
{"title": "Loss Given Default", "equation": "LGD = 1 - Recovery Rate", "category": "Credit Risk", "tags": ["loss-given-default", "recovery-rate", "credit-risk", "default-loss", "workout", "bankruptcy", "seniority", "collateral", "risk-metrics", "basel"], "note": "## Equation Variables\nLoss Given Default is the complement of Recovery Rate, representing the proportion of exposure lost in default.\n\n- **$LGD$**: Loss Given Default (proportion of exposure lost)\n- **$1$**: Total exposure (100%)\n- **$Recovery Rate$**: Proportion of exposure recovered after default\n\n## Interpretation\nLGD is the key determinant of loss severity in credit portfolios. A 60% LGD means we recover only 40% of our exposure when default occurs. LGD is more volatile than recovery rates suggest because it captures all costs of default: legal fees, workout costs, administrative expenses, and time value of money during the recovery period. LGD varies by seniority (senior secured recovers more than senior unsecured), collateral coverage, industry, economic cycle, and legal jurisdiction. Downturn LGD (experienced in stressed conditions) is higher than average LGD.\n\n## Assumptions\n- Recovery rate is observable and estimable from historical data\n- LGD is independent of PD (usually a simplifying assumption)\n- Recovery occurs at a single point in time (simplified)\n- No additional costs beyond the recovery calculation\n- Sovereign versus corporate LGDs follow similar principles\n- Recovery process is stationary over time\n\n## Practical Use\nLGD is a critical input to EL, regulatory capital, and pricing. Basel II/III use supervisory LGD values (45% for senior unsecured, 75% for subordinated). Internal models estimate LGD from historical recovery data, adjusting for collateral and seniority. Downturn LGD (stressed conditions) is required for regulatory capital. Recovery trading (buying defaulted bonds at deep discounts) is a niche credit strategy. LGD volatility is increasingly modeled stochastically in advanced credit risk frameworks."}
{"title": "Jarrow-Turnbull Reduced Form Model", "equation": "d\\lambda(t) = \\mu_\\lambda(t) dt + \\sigma_\\lambda(t) dW(t)", "category": "Credit Risk", "tags": ["jarrow-turnbull", "stochastic-intensity", "reduced-form", "sde", "mean-reversion", "credit-risk", "affine-models", "default-intensity", "diffusion", "calibration"], "note": "## Equation Variables\nThe Jarrow-Turnbull model specifies stochastic dynamics for default intensity in a reduced-form framework.\n\n- **$d\\lambda(t)$**: Change in default intensity (infinitesimal)\n- **$\\mu_\\lambda(t)$**: Drift term (mean reversion speed × long-term level)\n- **$\\sigma_\\lambda(t)$**: Volatility of intensity (diffusion coefficient)\n- **$dW(t)$**: Brownian motion increment (Wiener process)\n- **$dt$**: Infinitesimal time increment\n\n## Interpretation\nThe SDE specifies how intensity evolves: the drift $\\mu_\\lambda(t)$ determines the expected path (often mean-reverting toward a long-term level), while $\\sigma_\\lambda(t) dW(t)$ adds random variation. This framework captures the observation that credit spreads vary even without default events, reflecting changing market risk premiums and economic conditions. The diffusion term makes intensity uncertain—future credit conditions are not perfectly predictable. This contrasts with deterministic intensity models and enables more realistic credit derivative pricing.\n\n## Assumptions\n- Intensity follows a diffusion process (continuous paths)\n- Brownian motion is adapted to the filtration\n- Parameters are deterministic or deterministic functions of time\n- Market prices of risk are incorporated in drift modification\n- No jumps (extendable to jump-diffusions for rare events)\n- Affine class for analytical tractability\n\n## Practical Use\nJarrow-Turnbull dynamics are used in CVA modeling (stochastic intensity captures credit spread volatility), credit derivative pricing (affine solutions available), and multi-curve frameworks (joint interest rate and credit modeling). The affine class (where drift and volatility are affine in $\\lambda$) provides analytical solutions for survival probabilities and CDS pricing. Extensions include: Cox-Ingersoll-Ross intensity (ensures non-negativity), jump-diffusions, and forward rate credit models. The framework bridges reduced-form models with interest rate modeling traditions."}
{"title": "Credit Triangle", "equation": "s \\approx \\frac{\\lambda}{1 - R}", "category": "Credit Risk", "tags": ["credit-triangle", "cds-spread", "hazard-rate", "calibration", "credit-risk", "spread", "intensity", "recovery", "approximation", "pricing"], "note": "## Equation Variables\nThe Credit Triangle is the foundational relationship between CDS spreads, hazard rates, and recovery rates.\n\n- **$s$**: CDS spread or credit spread\n- **$\\lambda$**: Default intensity (hazard rate)\n- **$R$**: Recovery rate\n- **$(1-R)$**: Loss Given Default\n- **$\\approx$**: Approximation symbol\n\n## Interpretation\nThe Credit Triangle provides the bridge between market prices (CDS spreads) and default risk parameters (hazard rates). It states that the spread should approximately equal the hazard rate divided by one minus recovery. If we observe a 100bp CDS spread and assume 40% recovery, the implied hazard rate is approximately 60bp. This intensity can then be used for pricing other instruments, calculating CVA, or estimating default probabilities. The approximation is exact in continuous time with constant parameters. The \"triangle\" visualizes the three interconnected quantities.\n\n## Assumptions\n- Continuous premium payments\n- Default at Poisson intensity $\\lambda$\n- No recovery at default moment (recovery comes post-default)\n- Risk-neutral probabilities equal physical probabilities\n- Constant hazard rate and recovery rate over the horizon\n- No discrete effects from payment timing\n\n## Practical Use\nThe Credit Triangle is used daily by traders and risk managers to: imply hazard rates from CDS spreads, check for arbitrage between bonds and CDS, calibrate reduced-form models, estimate CVA for new counterparties, and perform quick mental calculations for credit analysis. The formula is the starting point for any credit risk calculation involving market data. Deviations from the triangle signal opportunities (if spread > implied) or concerns (if spread < implied, possibly illiquidity or distress)."}
{"title": "CVA with Gaussian Copula", "equation": "CVA = (1 - R) \\int_0^T D(t)  EPE(t)  dQ(t)", "category": "Credit Risk", "tags": ["cva-gaussian-copula", "expected-positive-exposure", "risk-neutral", "monte-carlo", "credit-risk", "counterparty-risk", "derivative-pricing", "integration", "discounting", "exposure-profile"], "note": "## Equation Variables\nThe Gaussian Copula CVA formula uses risk-neutral default probability and expected positive exposure.\n\n- **$CVA$**: Credit Valuation Adjustment\n- **$(1-R)$**: Loss Given Default\n- **$D(t)$**: Discount factor to time $t$ (risk-free)\n- **$EPE(t)$**: Expected Positive Exposure at time $t$\n- **$dQ(t)$**: Risk-neutral default probability measure\n- **$\\int_0^T$**: Integration over full horizon\n\n## Interpretation\nThis formula is the standard single-name CVA calculation under the risk-neutral measure. $EPE(t)$ is typically computed from simulating future market variables (interest rates, FX, equities) and revaluing the portfolio at each future date. The integration weights each potential exposure by its probability of occurrence and the probability of default before receiving the exposure. The discount factor ensures time-value of money is respected. The Gaussian Copula reference often extends to portfolio credit modeling where asset correlations use the Gaussian copula structure.\n\n## Assumptions\n- Exposure and default are independent (base case, no wrong-way risk)\n- Risk-neutral default probabilities are known and calibrated\n- $EPE$ is computed under the risk-neutral measure\n- Recovery rate is constant\n- Linear exposure profiles or full distribution available\n- Monte Carlo simulation provides accurate exposure estimates\n\n## Practical Use\nThis formula is the starting point for CVA calculations. In practice: Monte Carlo simulation generates exposure paths (thousands of scenarios), $EPE$ replaces expected exposure with expected positive exposure (one-sided, counting only positive MtM), portfolio CVA sums individual CVA with correlation adjustments, and wrong-way risk adjustments modify the formula for dependent exposure-default scenarios. Numerical integration or summation replaces the continuous integral for discrete simulation time steps."}
{"title": "Wrong-Way CVA", "equation": "CVA_{WW} = CVA \\times \\rho_{C,EE}", "category": "Credit Risk", "tags": ["wrong-way-cva", "correlation", "credit-risk", "counterparty-risk", "exposure-default-dependence", "cva-adjustment", "wrong-way-risk", "hedging", "regulatory", "risk-management"], "note": "## Equation Variables\nWrong-Way CVA adjusts the base CVA for the risk that exposure increases when counterparty credit deteriorates.\n\n- **$CVA_{WW}$**: Wrong-Way CVA (adjusted for dependent default)\n- **$CVA$**: Base CVA assuming independence between exposure and default\n- **$\\rho_{C,EE}$**: Correlation between counterparty credit and exposure\n- **$\\rho \\in [-1, 1]$**: Correlation coefficient\n\n## Interpretation\nWhen $\\rho > 0$, default is more likely when we are most exposed, increasing CVA. When $\\rho < 0$, default is less likely when exposed, decreasing CVA. This correlation adjustment captures the empirical observation that some counterparties' creditworthiness is linked to our exposure. For example, a derivative counterparty whose credit spreads widen when the underlying market moves against us. A correlation of 0.3 (moderately positive) increases CVA by 30%. A correlation of -0.2 (mildly negative) decreases CVA by 20%.\n\n## Assumptions\n- Correlation is constant or predictable over time\n- Linear relationship between credit and exposure\n- Joint distribution is bivariate normal or similar\n- No regime-switching or extreme dependence changes\n- Sufficient data to estimate correlation reliably\n- Stationary relationship between credit and market factors\n\n## Practical Use\nWrong-Way CVA is a regulatory requirement for sophisticated banks (Basel CVA charge). Methods include: joint simulation of market and credit factors, sensitivity analysis (stress correlation scenarios), credit exposure mapping (link market variables to credit spreads), copula-based joint default-exposure modeling, and historical backtesting of correlation estimates. CVA desks hedge wrong-way risk through diversification, CDS positions, and collateral agreements. Model risk is significant—correlation estimates are often uncertain."}
{"title": "Portfolio Credit Value at Risk", "equation": "VaR_\\alpha = \\mu_L + \\sigma_L \\cdot z_\\alpha", "category": "Credit Risk", "tags": ["credit-var", "portfolio-risk", "confidence-level", "economic-capital", "z-score", "credit-risk", "unexpected-loss", "tail-risk", "basel", "risk-management"], "note": "## Equation Variables\nPortfolio Credit VaR estimates the unexpected loss at a specified confidence level using the normal approximation.\n\n- **$VaR_\\alpha$**: Value at Risk at confidence level $\\alpha$\n- **$\\mu_L$**: Mean portfolio loss (Expected Loss)\n- **$\\sigma_L$**: Standard deviation of portfolio loss (Unexpected Loss)\n- **$z_\\alpha$**: $\\alpha$-quantile of the standard normal distribution\n- **$\\alpha$**: Confidence level (e.g., 99.9% for regulatory capital)\n\n## Interpretation\nCredit VaR answers: \"What is the maximum loss we expect to exceed only $\\alpha\\%$ of the time?\" For $\\alpha = 99.9\\%$, we expect to lose more than VaR only 0.1% of the time (approximately once every 1,000 periods). The z-score scales standard deviation to the desired confidence: $z_{99.9\\%} \\approx 3.09$. Credit VaR is much larger than Expected Loss because credit losses are highly skewed—most periods have low losses, but occasional default clusters create large tails. The normal approximation is a starting point; actual credit loss distributions have fatter tails.\n\n## Assumptions\n- Loss distribution is approximately normal (or transformation applied)\n- Mean and standard deviation are stable (or estimated for current period)\n- Portfolio composition is fixed over the horizon\n- Correlations are correctly specified\n- Large portfolio approximation (granularity adjustments for small portfolios)\n- Systematic factor model captures concentration risk\n\n## Practical Use\nCredit VaR is central to Basel capital requirements and internal risk limits. Methods to improve accuracy include: historical simulation (no distribution assumptions), Monte Carlo simulation (granular portfolio modeling), Vasicek/one-factor model (regulatory standard formula), stress testing beyond VaR (Expected Shortfall, scenarios), and granularity adjustments for concentrated portfolios. Credit VaR differs from market risk VaR in having more skewed, fat-tailed distributions and default correlation as a key driver."}
{"title": "Efficient Frontier (Two Assets)", "equation": "\\sigma_p^2 = w_1^2 \\sigma_1^2 + (1-w_1)^2 \\sigma_2^2 + 2 w_1 (1-w_1) \\rho_{12} \\sigma_1 \\sigma_2", "category": "Portfolio Theory", "tags": ["efficient-frontier", "two-assets", "correlation", "diversification", "portfolio-risk", "risk-return-tradeoff", "hyperbolic", "feasible-set"], "note": "## Equation Variables\nThe efficient frontier for two assets traces all possible portfolio combinations of two risky assets, showing how portfolio variance varies with the weight allocation between them. This two-dimensional case provides intuitive insights into diversification that extend to multi-asset portfolios.\n\n- **$\\sigma_p^2$**: The variance of the two-asset portfolio return, which varies from the variance of asset 1 (when $w_1 = 1$) to the variance of asset 2 (when $w_1 = 0$).\n- **$w_1$**: The weight allocated to asset 1, ranging from 0 to 1 for long-only portfolios, and extending beyond these bounds for portfolios allowing short sales.\n- **$\\sigma_1^2$**: The variance (squared volatility) of asset 1 returns, representing the individual risk contribution when the portfolio is fully invested in asset 1.\n- **$\\sigma_2^2$**: The variance of asset 2 returns, analogous to asset 1's variance for the fully invested-in-asset-2 case.\n- **$\\rho_{12}$**: The correlation coefficient between assets 1 and 2, ranging from -1 to +1. This parameter critically determines the shape and minimum achievable variance of the portfolio.\n- **$\\sigma_1$**: The standard deviation (volatility) of asset 1 returns.\n- **$\\sigma_2$**: The standard deviation (volatility) of asset 2 returns.\n- **$w_2 = 1 - w_1$**: The weight allocated to asset 2, determined residually from the budget constraint for fully invested portfolios.\n\n## Interpretation\nThe two-asset variance formula demonstrates the three components of portfolio risk: individual variance of asset 1 ($w_1^2 \\sigma_1^2$), individual variance of asset 2 ($(1-w_1)^2 \\sigma_2^2$), and the diversification benefit from correlation ($2w_1(1-w_1)\\rho_{12}\\sigma_1\\sigma_2$). When correlation equals +1, the portfolio variance reduces to the weighted average of variances, eliminating diversification benefits. When correlation equals -1, the two variance terms can perfectly offset, potentially achieving zero portfolio variance at the optimal hedge ratio. For realistic correlations between -1 and +1, the efficient frontier forms a hyperbolic curve connecting the two individual assets, with the minimum variance point occurring at $w_{1,MVP} = \\frac{\\sigma_2^2 - \\rho_{12}\\sigma_1\\sigma_2}{\\sigma_1^2 + \\sigma_2^2 - 2\\rho_{12}\\sigma_1\\sigma_2}$.\n\n## Assumptions\n- Assets are held over the same time horizon, typically one year for standard variance calculations.\n- The correlation coefficient is constant over the investment horizon and accurately estimated from historical data.\n- Short selling constraints (if any) are explicitly accounted for by limiting $w_1$ to [0,1] bounds.\n\n## Practical Use\nThe two-asset efficient frontier provides fundamental intuition for portfolio construction: it demonstrates why diversification works (correlation < 1), shows how portfolio risk depends on both weights and correlations, identifies the minimum variance allocation, and reveals how expected returns shift the efficient frontier. This framework extends to multi-asset portfolios where the efficient frontier becomes a curve in risk-return space, and optimal portfolios lie along this curve depending on investor risk preferences."}
{"title": "Capital Market Line", "equation": "E[R_p] = r_f + \\frac{E[R_M] - r_f}{\\sigma_M} \\cdot \\sigma_p", "category": "Portfolio Theory", "tags": ["capital-market-line", "cml", "efficient-portfolios", "risk-return-tradeoff", "market-portfolio", "sharpe-ratio", "cal", "capital-allocation"], "note": "## Equation Variables\nThe Capital Market Line (CML) describes the linear relationship between expected return and standard deviation for all efficient portfolios when a risk-free asset exists. It represents the equilibrium risk-return trade-off available to investors in a complete market with risk-free borrowing and lending.\n\n- **$E[R_p]$**: The expected return of an efficient portfolio lying on the CML, which must be fully invested in the market portfolio and the risk-free asset with no idiosyncratic risk.\n- **$r_f$**: The risk-free rate, representing the return available on a default-free, liquidity premium-free investment. This serves as the intercept of the CML and the baseline for all risky investments.\n- **$E[R_M]$**: The expected return of the market portfolio, which in equilibrium contains all assets weighted by their market capitalizations.\n- **$\\sigma_M$**: The standard deviation of the market portfolio returns, representing the systematic risk of the overall market.\n- **$\\frac{E[R_M] - r_f]}{\\sigma_M}$**: The slope of the CML, which equals the market portfolio's Sharpe ratio. This represents the risk premium per unit of total market risk.\n- **$\\sigma_p$**: The standard deviation of the efficient portfolio, which must be fully diversified with no idiosyncratic risk component.\n\n## Interpretation\nThe Capital Market Line states that efficient portfolios earn expected returns equal to the risk-free rate plus the market risk premium scaled by the portfolio's total risk. The linear relationship emerges because efficient portfolios differ only in their allocation between the risk-free asset and the market portfolio, both of which have a perfectly linear risk-return trade-off. Portfolios not on the CML contain idiosyncratic risk that is not compensated in equilibrium, as rational investors can eliminate such risk through diversification. The slope of the CML represents the market price of risk—the additional return investors demand for bearing one unit of systematic risk. In equilibrium, the market portfolio itself lies on the CML, and its composition is determined by aggregate investor preferences and wealth.\n\n## Assumptions\n- All investors have homogeneous expectations and access to the same investment opportunities, leading to identical efficient frontiers.\n- Unlimited borrowing and lending at the risk-free rate is available to all investors, enabling any desired risk level through risk-free asset allocation.\n- Markets are in equilibrium, meaning all risky assets are held and their prices reflect fundamental values.\n\n## Practical Use\nThe CML provides theoretical foundations for practical applications: it defines the benchmark for evaluating portfolio performance (efficient portfolios should lie on the CML), it enables calculation of required returns for any efficient portfolio given its volatility, it demonstrates the benefits of diversification (eliminating idiosyncratic risk), and it validates whether active managers add value by achieving returns above the CML for their risk level. While real markets violate some CML assumptions, the framework remains a cornerstone of modern finance theory."}
{"title": "CAPM Expected Return", "equation": "E[R_i] = r_f + \\beta_i (E[R_M] - r_f)", "category": "Portfolio Theory", "tags": ["capm", "expected-return", "beta-systematic-risk", "asset-pricing", "market-risk-premium", "capital-cost", "discount-rate", "equilibrium"], "note": "## Equation Variables\nThe Capital Asset Pricing Model (CAPM) provides the theoretical expected return for any asset based on its systematic risk as measured by beta. This single-factor model revolutionized asset pricing by showing that only systematic (non-diversifiable) risk is priced in equilibrium.\n\n- **$E[R_i]$**: The expected return required by investors for holding asset $i$, which should compensate for the time value of money (risk-free rate) and the asset's systematic risk contribution.\n- **$r_f$**: The risk-free rate, representing the return on a default-free investment that serves as the baseline compensation for delaying consumption.\n- **$\\beta_i$**: The beta of asset $i$, measuring the sensitivity of the asset's returns to market returns. Beta represents the asset's systematic risk that cannot be eliminated through diversification.\n- **$E[R_M]$**: The expected return of the market portfolio, which represents the aggregate return on all risky assets in the economy weighted by market capitalization.\n- **$E[R_M] - r_f$**: The market risk premium (MRP), representing the additional return investors demand for bearing the average level of market risk above the risk-free rate.\n\n## Interpretation\nThe CAPM equation decomposes any asset's expected return into two components: the risk-free rate $r_f$ compensates for the time value of money, while $\\beta_i (E[R_M] - r_f)$ compensates for systematic risk exposure. An asset with $\\beta_i = 1$ has the same systematic risk as the market and should earn the market return. An asset with $\\beta_i > 1$ (aggressive) earns more than the market risk premium when the market rises but loses more when the market falls. Conversely, $\\beta_i < 1$ (defensive) provides lower upside but more downside protection. The CAPM implies that idiosyncratic (firm-specific) risk is not priced because rational investors can diversify it away at no cost, making only beta the relevant risk measure for expected return determination.\n\n## Assumptions\n- All investors are mean-variance optimizers with homogeneous expectations regarding expected returns, variances, and correlations.\n- Unlimited risk-free borrowing and lending is available at the same rate.\n- No taxes, transaction costs, or other market frictions exist.\n- All assets are perfectly divisible and marketable.\n\n## Practical Use\nThe CAPM has extensive practical applications: estimating cost of equity capital for corporate finance decisions, setting discount rates for valuation, evaluating portfolio performance by comparing actual returns to CAPM-predicted returns, explaining cross-sectional variation in average returns across assets, and determining required returns for capital budgeting. Despite empirical challenges, the CAPM remains foundational and extensions like Fama-French three-factor models build upon its core insights about systematic risk pricing."}
{"title": "Beta Definition", "equation": "\\beta_i = \\frac{\\text{Cov}(R_i, R_M)}{\\text{Var}(R_M)} = \\frac{\\sigma_{iM}}{\\sigma_M^2} = \\rho_{iM} \\frac{\\sigma_i}{\\sigma_M}", "category": "Portfolio Theory", "tags": ["beta", "systematic-risk", "covariance", "correlation", "market-sensitivity", "volatility-ratio", "risk-decomposition", "regression-beta"], "note": "## Equation Variables\nBeta measures the sensitivity of an asset's returns to market returns, quantifying the asset's systematic risk exposure. This regression-based measure is fundamental to CAPM and forms the basis for risk-adjusted performance evaluation.\n\n- **$\\beta_i$**: The beta of asset $i$, a dimensionless number representing the expected change in asset returns for a 1% change in market returns. Beta is unit-free because it is a ratio of covariances.\n- **$\\text{Cov}(R_i, R_M)$**: The covariance between asset $i$ returns and market returns, measuring their co-movement regardless of individual volatilities.\n- **$\\text{Var}(R_M)$**: The variance of market returns, representing total market risk that cannot be diversified away.\n- **$\\sigma_{iM}$**: The covariance between asset $i$ and the market, sometimes denoted $\\text{Cov}(R_i, R_M)$.\n- **$\\sigma_M^2$**: The variance of market returns, which normalizes the covariance to produce a sensitivity measure.\n- **$\\rho_{iM}$**: The correlation coefficient between asset $i$ and the market, bounded between -1 and +1.\n- **$\\sigma_i$**: The standard deviation of asset $i$ returns, measuring individual asset volatility.\n- **$\\sigma_M$**: The standard deviation of market returns, representing market-wide volatility.\n\n## Interpretation\nBeta measures how much systematic risk an asset contributes to a diversified portfolio. A beta of 1 indicates the asset moves with the market (same systematic risk), while beta of 1.5 means the asset amplifies market movements (50% more sensitive). Beta is calculated as the slope coefficient in the regression $R_i - r_f = \\alpha_i + \\beta_i (R_M - r_f) + \\varepsilon_i$, where $\\beta_i = \\frac{\\text{Cov}(R_i - r_f, R_M - r_f)}{\\text{Var}(R_M - r_f)}$. This regression framework also provides the residual variance (idiosyncratic risk) that cannot be explained by market movements. Beta is not fixed over time; it tends to regress toward 1 over long horizons and varies with business cycle phases, leverage changes, and operational dynamics.\n\n## Assumptions\n- The market proxy used is a true representation of the market portfolio, not a limited subset that could bias beta estimates.\n- The regression relationship is linear and stable over the estimation period.\n- Returns are measured over consistent intervals (typically daily or monthly) and annualized appropriately.\n\n## Practical Use\nBeta has numerous practical applications: portfolio construction uses beta to target desired market exposure, risk management uses beta to estimate portfolio sensitivity to market movements, performance evaluation adjusts returns for systematic risk exposure, capital budgeting uses beta to estimate discount rates for projects, and cost of equity calculation applies beta in CAPM to determine required returns. Betas are typically estimated from historical data using rolling windows (2-5 years) and adjusted for reliability based on estimation error and residual volatility."}
{"title": "Jensen's Alpha", "equation": "\\alpha_i = E[R_i] - \\left[r_f + \\beta_i (E[R_M] - r_f)\\right]", "category": "Portfolio Theory", "tags": ["jensens-alpha", "alpha-performance", "benchmark-return", "active-return", "performance-attribution", "skill-measurement", "risk-adjusted-return"], "note": "## Equation Variables\nJensen's alpha measures the risk-adjusted excess return of an asset or portfolio relative to its CAPM-predicted return. This metric separates skill-based returns from those attributable to systematic risk exposure, providing a fundamental measure of portfolio manager performance.\n\n- **$\\alpha_i$**: Jensen's alpha, representing the portion of return not explained by systematic risk exposure. Positive alpha indicates outperformance relative to the risk-adjusted benchmark.\n- **$E[R_i]$**: The expected return of asset $i$, typically measured as the realized average return over a performance evaluation period.\n- **$r_f$**: The risk-free rate applicable during the evaluation period, representing the baseline return available without bearing any risk.\n- **$\\beta_i$**: The beta of asset $i$, measuring its systematic risk exposure to the market portfolio.\n- **$E[R_M]$**: The expected return of the market portfolio, which along with $r_f$ determines the market risk premium.\n- **$E[R_M] - r_f$**: The market risk premium, representing the compensation investors require for bearing systematic market risk.\n\n## Interpretation\nJensen's alpha answers the question: \"Did this asset/portfolio earn more than it should have given its systematic risk exposure?\" The CAPM-predicted return $r_f + \\beta_i (E[R_M] - r_f)$ represents the return required to compensate for the asset's market risk. Any excess return above this level ($\\alpha_i > 0$) indicates value added through security selection, market timing, or other active management skills. Conversely, negative alpha indicates underperformance relative to the risk-adjusted benchmark. In the context of the regression $R_i - r_f = \\alpha_i + \\beta_i (R_M - r_f) + \\varepsilon_i$, alpha is the intercept term, representing the average return when the market excess return is zero. Alpha is often called the \"true\" return because it strips out the systematic risk component.\n\n## Assumptions\n- The market portfolio proxy used in beta estimation is appropriate and sufficiently diversified.\n- The CAPM is the correct pricing model, implying no other risk factors are priced.\n- Returns are measured over sufficiently long horizons to distinguish skill from luck.\n\n## Practical Use\nJensen's alpha is widely used in performance evaluation: mutual fund performance attribution compares fund alphas to assess manager skill, portfolio performance measurement evaluates whether active strategies generate positive risk-adjusted returns, benchmark selection validates whether funds are appropriately compared to their beta-matched benchmarks, and backtesting of trading strategies assesses risk-adjusted profitability. While alpha is intuitive, critics note its sensitivity to the market proxy and the possibility that apparent alpha may simply reflect exposure to omitted risk factors (as in Fama-French models)."}
{"title": "Tracking Error", "equation": "\\text{TE} = \\sigma(R_p - R_b) = \\sqrt{\\text{Var}(R_p - R_b)}", "category": "Portfolio Theory", "tags": ["tracking-error", "active-risk", "volatility-difference", "benchmark-risk", "performance-monitoring", "active-management", "risk-budgeting"], "note": "## Equation Variables\nTracking error measures the volatility of a portfolio's returns relative to its benchmark, quantifying the uncertainty or variability in active returns. This metric is essential for understanding how much a portfolio deviates from its benchmark and the consistency of that deviation.\n\n- **$\\text{TE}$**: The tracking error, representing the standard deviation of the difference between portfolio and benchmark returns. It is expressed in the same units as returns (percentage points).\n- **$R_p$**: The return of the portfolio over a specified period (typically daily or monthly).\n- **$R_b$**: The return of the benchmark index over the same period.\n- **$R_p - R_b$**: The active return or tracking difference for a single period.\n- **$\\sigma(R_p - R_b)$**: The standard deviation (square root of variance) of active returns over the measurement period.\n- **$\\text{Var}(R_p - R_b)$**: The variance of active returns, measuring the squared dispersion around the mean active return.\n\n## Interpretation\nTracking error answers: \"How much does this portfolio's performance vary from its benchmark?\" A tracking error of 2% means the portfolio typically deviates from the benchmark by about 2 percentage points in either direction. Low tracking error (near zero) indicates a passive index hugger, while high tracking error signals active management with significant deviation from the benchmark. The tracking error can be decomposed into two sources: portfolio weights different from the benchmark (intentional active bets) and returns different from expectations (unexpected performance). Unlike total risk (standard deviation of absolute returns), tracking error measures only benchmark-relative risk, making it ideal for evaluating active managers who are explicitly trying to outperform a benchmark.\n\n## Assumptions\n- The benchmark is investable and appropriate for the portfolio's strategy and constraints.\n- Returns are measured over consistent intervals with proper handling of cash flows and dividends.\n- The tracking error estimate uses sufficient historical data (typically 2-3 years of monthly observations) for statistical reliability.\n\n## Practical Use\nTracking error has numerous applications: risk budgeting allocates active risk across strategies or managers, performance monitoring detects style drift or unintended deviations, active share calculation uses tracking error components, capacity analysis estimates how much active risk is sustainable, and regulatory compliance monitors risk limits for benchmark-relative strategies. Different strategies target different tracking error levels: enhanced index strategies typically target TE of 1-3%, active equity strategies may target TE of 3-8%, while high-conviction strategies can exceed 10%."}
{"title": "Appraisal Ratio", "equation": "\\text{Appraisal} = \\frac{\\alpha}{\\omega}", "category": "Portfolio Theory", "tags": ["appraisal-ratio", "jensens-alpha", "residual-risk", "idiosyncratic-risk", "treynor-alternative", "selectivity", "active-performance"], "note": "## Equation Variables\nThe Appraisal ratio measures risk-adjusted alpha per unit of residual (idiosyncratic) risk, providing a measure of security selection skill that complements the Treynor ratio's focus on systematic risk.\n\n- **$\\text{Appraisal}$**: The Appraisal ratio, representing alpha (risk-adjusted outperformance) per unit of residual risk. Higher values indicate better security selection ability.\n- **$\\alpha$**: Jensen's alpha, representing the portion of return not explained by systematic risk exposure. This is the \"true\" active return after adjusting for market risk.\n- **$\\omega$**: The residual risk (sometimes denoted $\\sigma_\\varepsilon$), representing the standard deviation of the error term in the CAPM regression. This measures idiosyncratic or diversifiable risk.\n\n## Interpretation\nThe Appraisal ratio answers: \"How much risk-adjusted excess return does this portfolio generate per unit of idiosyncratic risk undertaken?\" Unlike the Treynor ratio which divides by beta (systematic risk), the Appraisal ratio divides by residual risk, making it sensitive to security selection decisions that affect idiosyncratic rather than systematic risk. A higher Appraisal ratio indicates the portfolio's alpha comes from good stock selection rather than exposure to systematic risk factors. This metric is particularly useful for evaluating concentrated portfolios, equity managers, or situations where idiosyncratic risk is significant and investors care about both the level and efficiency of active returns.\n\n## Assumptions\n- The CAPM regression model is correctly specified with no omitted risk factors.\n- Residuals are homoskedastic and serially uncorrelated.\n- The alpha estimate is statistically significant and not simply noise.\n\n## Practical Use\nThe Appraisal ratio has specialized applications: concentrated portfolio evaluation assesses security selection skill for portfolios with high idiosyncratic risk, performance attribution separates stock selection from market allocation effects, manager style analysis evaluates whether performance comes from selection or market exposure, and backtesting validates whether historical alpha persists. While less commonly used than Sharpe or Information ratios, the Appraisal ratio provides valuable insight for portfolios where residual risk is material."}
{"title": "Portfolio Value at Risk", "equation": "\\text{VaR}_p = \\mathbf{w}' \\text{VaR}", "category": "Portfolio Theory", "tags": ["value-at-risk", "portfolio-risk,var-aggregation,linear-risk,loss-measure,quantile-risk,tail-risk,regulatory-risk", "coherent-risk"], "note": "## Equation Variables\nValue at Risk (VaR) measures the maximum loss not exceeded with a given confidence level over a specified time horizon. For linear portfolios, portfolio VaR can be computed as the weighted sum of individual asset VaRs.\n\n- **$\\text{VaR}_p$**: The Value at Risk of the portfolio at the specified confidence level, representing the loss threshold that is exceeded with probability $1-\\alpha$.\n- **$\\mathbf{w}$**: The vector of portfolio weights, representing the allocation across assets or risk factors.\n- **$\\text{VaR}$**: The vector of individual asset or factor VaRs, each representing the standalone risk of that component.\n- **$\\alpha$**: The confidence level (typically 95%, 99%, or 99.9%), determining the quantile of the loss distribution.\n- **$n$**: The number of components (assets or risk factors) in the portfolio.\n\n## Interpretation\nPortfolio VaR answers: \"What is the maximum loss I can expect with X% confidence over the next period?\" For a 95% VaR of $1M, the portfolio loses more than $1M only 5% of the time. The linear aggregation formula holds exactly for normally distributed returns and approximately for other elliptical distributions. For non-linear portfolios (options, convex securities), VaR aggregation requires full portfolio revaluation or Monte Carlo simulation. VaR became a regulatory standard following the Basel accords and remains the most widely used risk measure, though it has been criticized for not being coherent (failing subadditivity) and for incentivizing risk concentration just below the VaR threshold.\n\n## Assumptions\n- Returns are jointly normally distributed, or at least elliptical, for the linear aggregation formula to hold exactly.\n- VaR is estimated at a single quantile; tail losses beyond VaR are not captured.\n- Volatilities and correlations are stable over the time horizon matching the VaR measurement period.\n\n## Practical Use\nVaR has ubiquitous applications: it is the regulatory standard for bank capital requirements (Basel VaR), it is used for market risk limits and position sizing, it supports risk reporting to senior management and boards, it enables backtesting of risk model performance, and it informs trading decisions by quantifying potential losses. Despite criticisms, VaR remains the dominant risk measure in financial institutions and will likely continue to be used as a complement to more coherent measures like Expected Shortfall."}
{"title": "Portfolio Expected Shortfall", "equation": "\\text{ES}_p = \\mathbf{w}' \\text{ES}", "category": "Portfolio Theory", "tags": ["expected-shortfall,conditional-var,tail-risk,coherent-risk,avar,portfolio-risk,loss-measure,avg-var"], "note": "## Equation Variables\nExpected Shortfall (ES), also known as Conditional VaR or Average VaR, measures the expected loss given that the loss exceeds the VaR threshold. It addresses VaR's limitation of ignoring tail losses beyond the quantile threshold.\n\n- **$\\text{ES}_p$**: The Expected Shortfall of the portfolio, representing the average loss in the worst $\\alpha$% of scenarios. This is the expected value of losses exceeding VaR.\n- **$\\mathbf{w}$**: The vector of portfolio weights across assets or risk factors.\n- **$\\text{ES}$**: The vector of individual component Expected Shortfalls, each representing tail risk contribution.\n- **$\\alpha$**: The confidence level (typically 95% or 97.5%), determining the tail portion over which losses are averaged.\n- **$\\text{VaR}_{\\alpha}$**: The Value at Risk at level $\\alpha$, representing the loss threshold.\n\n## Interpretation\nExpected Shortfall answers: \"If I experience a loss worse than VaR, what is my expected loss?\" Unlike VaR which gives a single threshold, ES provides the average loss in the tail, making it more sensitive to extreme events. For normally distributed returns, ES is greater than VaR by a factor that depends on the distribution: $\\text{ES}_{\\alpha} = \\sigma_p \\cdot \\frac{\\phi(z_\\alpha)}{1-\\alpha}$ where $z_\\alpha$ is the standard normal quantile. ES is a coherent risk measure, satisfying subadditivity (portfolio risk is less than or equal to the sum of component risks), convexity, and other desirable properties that VaR lacks. This mathematical coherence makes ES preferable for portfolio optimization and regulatory capital.\n\n## Assumptions\n- The loss distribution has sufficient historical data to estimate tail behavior reliably.\n- The aggregation formula holds exactly for elliptical distributions (normal, t-distribution) and approximately for others.\n- Extreme losses beyond the historical record are captured through modeling (e.g., EVT).\n\n## Practical Use\nExpected Shortfall has growing applications: it is being adopted as the regulatory market risk measure (FRTB), it improves portfolio optimization by being convex, it provides better incentives than VaR by penalizing tail risk, it is used for risk budgeting in the tail, and it informs stress testing by quantifying average losses in extreme scenarios. Despite computational complexity for non-linear portfolios, ES's superior properties make it increasingly preferred over VaR for sophisticated risk management applications."}
{"title": "Geometric Brownian Motion", "equation": "dS_t = \\mu S_t dt + \\sigma S_t dW_t", "category": "Stochastic Processes", "tags": ["geometric-brownian-motion", "stochastic-differential-equations", "diffusion-processes", "ito-processes", "lognormal-distribution", "martingale-properties", "risk-neutral-measure", "black-scholes-foundation", "monte-carlo-simulation", "continuous-time-processes", "financial-modeling", "asset-price-dynamics"], "note": "## Equation Variables\nThe Geometric Brownian Motion (GBM) SDE describes the canonical model for asset price dynamics in continuous time. This foundational equation appears throughout derivatives pricing, risk management, and quantitative finance.\n\n- **$S_t$**: Asset price at time $t$, strictly positive for $S_0 > 0$\n- **$\\mu$**: Drift coefficient representing the expected instantaneous return\n- **$\\sigma$**: Volatility coefficient representing the standard deviation of returns\n- **$dW_t$**: Increment of standard Brownian motion (Wiener process)\n- **$dt$**: Infinitesimal time interval\n- **$t$**: Time variable\n\n## Interpretation\nThe GBM equation states that the instantaneous return $dS_t/S_t$ follows a normal distribution with mean $\\mu dt$ and variance $\\sigma^2 dt$. This implies that log-returns are normally distributed: $\\ln(S_T/S_t) \\sim N((\\mu - \\sigma^2/2)(T-t), \\sigma^2(T-t))$. The multiplicative nature of the equation ensures that asset prices remain positive, which is economically necessary for stock prices, indices, and other non-dividend-paying assets.\n\nThe model captures the essential empirical observation that percentage changes in asset prices over short horizons are approximately normally distributed. While this assumption is violated in practice for longer horizons (fat tails, skewness), GBM remains the baseline model for derivatives pricing due to its analytical tractability.\n\n## Assumptions\n- The market is efficient and arbitrage-free\n- Asset returns follow a log-normal distribution\n- Volatility $\\sigma$ is constant over time\n- The drift $\\mu$ is constant\n- Sample paths are continuous but nowhere differentiable\n- Brownian motion has independent, stationary increments\n- Quadratic variation equals time: $[W]_t = t$\n\n## Practical Use\nGBM serves as the foundation for the Black-Scholes option pricing formula, the most widely used derivatives pricing framework in financial markets. It enables analytical solutions for European options, provides benchmarks for model calibration, and serves as the baseline for Monte Carlo simulation of asset price paths. The log-normal distribution implies that expected returns under the physical measure differ from those under the risk-neutral measure by the convexity adjustment $\\sigma^2/2$."}
{"title": "GBM Solution Log-Normal", "equation": "S_T = S_0 \\exp\\left(\\left(\\mu - \\frac{\\sigma^2}{2}\\right)T + \\sigma W_T\\right)", "category": "Stochastic Processes", "tags": ["gbm-solution", "lognormal-distribution", "closed-form-solution", "exponential-function", "ito-integral", "terminal-price-distribution", "monte-carlo-simulation", "expected-returns", "convexity-adjustment", "asset-price-dynamics", "risk-neutral-pricing", "black-scholes-foundations"], "note": "## Equation Variables\nThe closed-form solution to the Geometric Brownian Motion SDE reveals the log-normal distribution of asset prices and provides the foundation for option pricing and Monte Carlo simulation.\n\n- **$S_T$**: Terminal asset price at time $T$\n- **$S_0$**: Initial asset price at time 0\n- **$\\exp$**: Exponential function $e^x$\n- **$\\mu$**: Drift coefficient (expected return under physical measure)\n- **$\\sigma$**: Volatility coefficient\n- **$T$**: Time to maturity\n- **$W_T$**: Brownian motion at time $T$, with $W_T \\sim N(0, T)$\n\n## Interpretation\nThe solution demonstrates that asset prices follow a log-normal distribution under GBM dynamics. The drift term is adjusted by subtracting $\\sigma^2/2$ to account for Itô's lemma: since $E[\\exp(\\sigma W_T)] = \\exp(0.5\\sigma^2 T)$, we must subtract $0.5\\sigma^2 T$ from the exponent to achieve the correct drift $\\mu T$ under the physical measure.\n\nThe terminal distribution is $S_T \\sim \\text{LogNormal}(\\ln S_0 + (\\mu - \\sigma^2/2)T, \\sigma^2 T)$. The expected value is $E[S_T] = S_0 \\exp(\\mu T)$, and the variance is $\\text{Var}(S_T) = S_0^2 \\exp(2\\mu T + \\sigma^2 T)(\\exp(\\sigma^2 T) - 1)$.\n\n## Assumptions\n- Identical to GBM assumptions\n- Brownian motion is Gaussian with mean zero\n- The stochastic integral is well-defined (Itô integral)\n- Parameters are constant over the horizon\n- No jumps or discontinuities in the price process\n\n## Practical Use\nThis closed-form solution enables direct simulation of terminal asset prices for Monte Carlo pricing without discretizing the SDE. It underlies the derivation of the Black-Scholes formula, provides the distribution needed for computing expected payoffs, and serves as the baseline for understanding how volatility and drift affect the distribution of terminal prices. The solution also enables analytical computation of Greeks and model risk metrics."}
{"title": "Itô's Lemma", "equation": "df(t, S_t) = \\left( \\frac{\\partial f}{\\partial t} + \\mu S_t \\frac{\\partial f}{\\partial S} + \\frac{1}{2} \\sigma^2 S_t^2 \\frac{\\partial^2 f}{\\partial S^2} \\right) dt + \\sigma S_t \\frac{\\partial f}{\\partial S} dW_t", "category": "Stochastic Processes", "tags": ["itos-lemma", "stochastic-calculus", "ito-integral", "chain-rule", "partial-differential-equations", "markov-process", "dynamic-hedging", "replication", "option-greeks", "black-scholes-pde", "convexity-adjustment", "second-order-terms", "diffusion-processes"], "note": "## Equation Variables\nItô's Lemma is the fundamental chain rule of stochastic calculus, enabling the differentiation of functions of stochastic processes and connecting stochastic differential equations to partial differential equations.\n\n- **$f(t, S_t)$**: Twice differentiable function of time and state variable\n- **$\\partial f / \\partial t$**: Partial derivative with respect to time\n- **$\\partial f / \\partial S$**: First partial derivative with respect to state (Delta)\n- **$\\partial^2 f / \\partial S^2$**: Second partial derivative with respect to state (Gamma)\n- **$\\mu$**: Drift coefficient of the underlying process\n- **$\\sigma$**: Volatility coefficient of the underlying process\n- **$S_t$**: State variable (typically asset price)\n- **$dW_t$**: Brownian increment\n\n## Interpretation\nUnlike ordinary calculus, stochastic differentials contain an additional second-order term $0.5\\sigma^2 S^2 f_{SS}$ due to the non-differentiability of Brownian motion. This term captures the convexity adjustment required when differentiating non-linear functions of noisy processes. Without this term, the Itô integral would not be a martingale, and the fundamental theorem of asset pricing would not hold.\n\nThe lemma transforms functions of Itô processes: if $dS_t = \\mu_t dt + \\sigma_t dW_t$, then for $f(t, S_t)$, we have the stochastic differential shown above. The presence of the $dt$ term in the drift and the $dW_t$ term in the diffusion reflects the structure of the underlying process.\n\n## Assumptions\n- $S_t$ follows an Itô process: $dS_t = \\mu_t dt + \\sigma_t dW_t$\n- $f(t, x)$ is $C^1$ in $t$ and $C^2$ in $x$\n- $\\mu_t$ and $\\sigma_t$ satisfy Lipschitz and growth conditions\n- The filtration satisfies the usual conditions\n- Regularity conditions for Itô's formula applicability\n\n## Practical Use\nItô's Lemma derives the Black-Scholes partial differential equation by requiring a hedged portfolio to be a martingale under the risk-neutral measure. It computes option Greeks (Delta, Gamma) and their dynamics, prices path-dependent options by tracking the evolution of auxiliary variables, and serves as the foundation for developing new pricing models including local volatility, stochastic volatility, and jump-diffusion models. The lemma is the bridge connecting stochastic differential equations to PDE representations via the Feynman-Kac formula."}
{"title": "Ornstein-Uhlenbeck Process", "equation": "dr_t = a(b - r_t) dt + \\sigma dW_t", "category": "Stochastic Processes", "tags": ["ornstein-uhlenbeck", "mean-reversion", "interest-rate-modeling", "vasicek-model", "continuous-time-ar1", "short-rate-models", "affine-term-structure", "stochastic-differential-equations", "mean-reversion-speed", "long-term-mean", "gaussian-processes", "random-processes"], "note": "## Equation Variables\nThe Ornstein-Uhlenbeck (OU) process is the continuous-time analogue of the discrete-time AR(1) process and serves as the foundation for mean-reverting interest rate and volatility modeling.\n\n- **$r_t$**: Short rate (or mean-reverting quantity) at time $t$\n- **$a$**: Speed of mean reversion ($a > 0$)\n- **$b$**: Long-term mean level (steady-state mean)\n- **$\\sigma$**: Volatility coefficient\n- **$dW_t$**: Brownian motion increment\n- **$dt$**: Infinitesimal time interval\n\n## Interpretation\nThe OU process exhibits mean-reverting behavior: the term $a(b - r_t)$ pulls the process toward the long-term mean $b$ at speed $a$. When $r_t > b$, the drift is negative; when $r_t < b$, the drift is positive. This behavior models short-term interest rates, which tend to revert to some long-run equilibrium level over time.\n\nUnlike Geometric Brownian Motion, the OU process is Gaussian and can take negative values. This is appropriate for modeling short rates that may be near zero or negative in modern interest rate environments. The stationary distribution is normal with mean $b$ and variance $\\sigma^2/(2a)$.\n\n## Assumptions\n- Mean reversion speed $a > 0$ for stationarity\n- Long-term mean $b$ is constant\n- Volatility $\\sigma > 0$\n- Brownian motion has independent increments\n- Under the physical measure P for simulation\n- Parameters constant or deterministic functions of time\n\n## Practical Use\nThe OU process forms the basis of the Vasicek interest rate model, a foundational affine term structure model. It enables analytical pricing of zero-coupon bonds and interest rate derivatives. The process also models mean-reverting commodity prices, stochastic volatility in the Hull-White extension, and credit spreads in reduced-form credit models. The Gaussian nature simplifies simulation and calibration."}
{"title": "Mean-Reverting Process Solution", "equation": "r_t = r_0 e^{-at} + b(1 - e^{-at}) + \\sigma e^{-at} \\int_0^t e^{as} dW_s", "category": "Stochastic Processes", "tags": ["mean-reverting-solution", "ou-process-solution", "closed-form-solution", "stochastic-integral", "exponential-function", "variance-calculation", "terminal-distribution", "mean-reversion-dynamics", "gaussian-distribution", "monte-carlo-simulation", "term-structure-models", "statistical-properties"], "note": "## Equation Variables\nThe closed-form solution to the Ornstein-Uhlenbeck process provides explicit expressions for the mean, variance, and distribution of the mean-reverting process.\n\n- **$r_t$**: Rate at time $t$\n- **$r_0$**: Initial rate at time 0\n- **$a$**: Mean reversion speed\n- **$b$**: Long-term mean level\n- **$\\sigma$**: Volatility coefficient\n- **$e$**: Base of natural logarithm\n- **$\\int_0^t$**: Stochastic integral from 0 to $t$\n- **$dW_s$**: Brownian increment at time $s$\n\n## Interpretation\nThe solution decomposes $r_t$ into three components: (1) the initial value decaying exponentially as $r_0 e^{-at}$, (2) the long-term mean being pulled in over time as $b(1 - e^{-at})$, and (3) a stochastic integral representing random fluctuations around the deterministic path.\n\nThe stochastic integral $\\int_0^t e^{as} dW_s$ is Gaussian with mean zero and variance $\\frac{\\sigma^2}{2a}(e^{2at} - 1)$. Thus $r_t$ is normally distributed with:\n\n$$E[r_t] = r_0 e^{-at} + b(1 - e^{-at})$$\n$$\\text{Var}[r_t] = \\frac{\\sigma^2}{2a}(1 - e^{-2at})$$\n\nAs $t \\to \\infty$, the distribution converges to $N(b, \\sigma^2/(2a))$, the stationary distribution.\n\n## Assumptions\n- Same as OU process assumptions\n- Stochastic integral is well-defined (Itô integral)\n- Parameters constant for analytical tractability\n- Brownian motion increments are Gaussian\n\n## Practical Use\nThis solution enables efficient Monte Carlo simulation of interest rate paths without Euler discretization. It provides the analytical framework for calibrating the Hull-White model to the initial yield curve, computing bond prices as expectations of discounted payoffs, and understanding the distribution of rates at future dates. The explicit variance formula aids in risk management and scenario analysis."}
{"title": "Cox-Ingersoll-Ross Model", "equation": "dr_t = \\kappa(\\theta - r_t) dt + \\sigma \\sqrt{r_t} dW_t", "category": "Stochastic Processes", "tags": ["cox-ingersoll-ross", "square-root-diffusion", "interest-rate-modeling", "positive-rates", "feller-condition", "affine-term-structure", "short-rate-models", "state-dependent-volatility", "mean-reversion", "credit-risk-modeling", "stochastic-intensity", "non-central-chi-squared"], "note": "## Equation Variables\nThe Cox-Ingersoll-Ross (CIR) model extends the Vasicek framework by making volatility proportional to the square root of the rate, ensuring positivity and providing realistic volatility behavior.\n\n- **$r_t$**: Short rate at time $t$\n- **$\\kappa$ (kappa)**: Speed of mean reversion ($\\kappa > 0$)\n- **$\\theta$ (theta)**: Long-term mean level\n- **$\\sigma$**: Volatility coefficient\n- **$\\sqrt{r_t}$**: Square root of the rate (volatility)\n- **$dW_t$**: Brownian increment\n\n## Interpretation\nThe CIR model addresses the key limitation of Vasicek: the ability to generate negative rates. The volatility term $\\sigma \\sqrt{r_t} dW_t$ shrinks as $r_t \\to 0$, preventing the rate from crossing below zero. The process stays strictly positive (with probability 1) when the Feller condition $2\\kappa\\theta \\geq \\sigma^2$ holds.\n\nWhen rates are low, volatility is low; when rates are high, volatility is high. This captures the empirical observation that volatile periods correspond to higher interest rate levels. The drift $\\kappa(\\theta - r_t)$ is identical to Vasicek, pulling rates toward the long-term mean $\\theta$.\n\n## Assumptions\n- Mean reversion speed $\\kappa > 0$\n- Long-term mean $\\theta > 0$\n- Volatility $\\sigma > 0$\n- Feller condition: $2\\kappa\\theta \\geq \\sigma^2$\n- Risk-neutral measure for pricing\n- Parameters deterministic functions of time\n\n## Practical Use\nThe CIR model is an affine term structure model, meaning zero-coupon bond prices have the form $P(t, T) = A(t, T) e^{-B(t, T) r_t}$. This enables analytical pricing of interest rate derivatives including caps, floors, and swaptions. The model also serves as the foundation for stochastic intensity modeling in credit risk (CIR intensity for default times). The non-central chi-squared distribution of $r_t$ provides tractable density for computing barrier option prices and default probabilities."}
{"title": "Heston Stochastic Volatility", "equation": "dS_t = \\mu S_t dt + \\sqrt{v_t} S_t dW_1, \\quad dv_t = \\kappa(\\theta - v_t) dt + \\xi \\sqrt{v_t} dW_2, \\quad dW_1 dW_2 = \\rho dt", "category": "Stochastic Processes", "tags": ["heston-model", "stochastic-volatility", "leverage-effect", "volatility-smile", "correlated-brownian-motions", "characteristic-function", "feller-condition", "volatility-clustering", "smile-modeling", "option-pricing", "fourier-methods", "variance-process"], "note": "## Equation Variables\nThe Heston model is the most widely used stochastic volatility model, capturing the empirically observed correlation between asset returns and volatility changes (the leverage effect).\n\n- **$S_t$**: Asset price at time $t$\n- **$v_t$**: Instantaneous variance (volatility squared)\n- **$\\mu$**: Drift of the asset price\n- **$\\sqrt{v_t}$**: Standard deviation of returns\n- **$\\kappa$**: Mean reversion speed of variance\n- **$\\theta$**: Long-run mean of variance\n- **$\\xi$ (xi)**: Volatility of variance (vol-of-vol)\n- **$dW_1, dW_2$**: Correlated Brownian motions\n- **$\\rho$**: Correlation between $W_1$ and $W_2$ ($-1 \\leq \\rho \\leq 0$)\n\n## Interpretation\nHeston separates the modeling of price and volatility. The variance $v_t$ follows a CIR process (ensuring positivity), while the asset return $dS_t/S_t$ depends on the current variance through $\\sqrt{v_t}$. The correlation $\\rho$ captures the leverage effect: when prices fall, volatility typically rises, so $\\rho < 0$.\n\nThis model explains volatility clustering (high volatility periods persist) and generates the implied volatility smile/skew observed in options markets. The closed-form characteristic function enables efficient Fourier-based option pricing, making the model computationally tractable for calibration.\n\n## Assumptions\n- Variance stays positive (Feller condition: $2\\kappa\\theta \\geq \\xi^2$)\n- Brownian motions are correlated with constant $\\rho$\n- Parameters satisfy regularity conditions\n- Risk-neutral drift for variance under pricing measure\n- Variance and price adapted to the same filtration\n\n## Practical Use\nHeston is the workhorse model for equity option pricing, particularly for capturing the SPX implied volatility surface. It prices vanilla options via Fourier transform (Carr-Madan, Lewis-Lipton methods), enables smile-consistent exotic option pricing, and provides realistic dynamics for hedging volatility exposure. The model extends to joint SPX-VIX modeling and serves as the foundation for stochastic volatility models in foreign exchange."}
{"title": "Martingale Property", "equation": "\\mathbb{E}^{\\mathbb{Q}}[V_T \\mid \\mathcal{F}_t] = V_t", "category": "Stochastic Processes", "tags": ["martingale-property", "risk-neutral-measure", "conditional-expectation", "filtration", "no-arbitrage", "ftap", "fundamental-theorem", "self-financing-portfolio", "discounted-prices", "stochastic-processes", "information-set", "markov-property"], "note": "## Equation Variables\nThe martingale property is the mathematical expression of the no-arbitrage principle in continuous time, stating that properly discounted asset prices have zero expected growth under the risk-neutral measure.\n\n- **$\\mathbb{E}^{\\mathbb{Q}}$**: Expectation under risk-neutral measure $\\mathbb{Q}$\n- **$V_T$**: Value at terminal time $T$\n- **$V_t$**: Value at current time $t$\n- **$\\mathcal{F}_t$**: Filtration (information up to time $t$)\n- **$|$**: Conditional on given information\n\n## Interpretation\nThe martingale property states that the conditional expectation of the future value, given all available information, equals the current value. This implies that you cannot expect to profit from trading based on available information, which is the mathematical definition of no arbitrage.\n\nFor the discounted stock price $S_t / B_t$ (where $B_t = e^{\\int_0^t r_s ds}$ is the bank account), this property holds under $\\mathbb{Q}$. Similarly, any self-financing portfolio replicating a derivative must be a $\\mathbb{Q}$-martingale when discounted. This is the foundation of risk-neutral pricing.\n\n## Assumptions\n- $\\mathbb{Q}$ is an equivalent martingale measure\n- Filtration $\\mathcal{F}_t$ represents available market information\n- Markets are arbitrage-free (Fundamental Theorem of Asset Pricing)\n- Trading strategy is admissible\n- Discounting uses the risk-free rate\n\n## Practical Use\nThe martingale property enables risk-neutral valuation: option prices are expectations of discounted payoffs. It verifies the absence of arbitrage in market models, constructs replicating portfolios for derivatives, provides the theoretical foundation for hedging strategies, and serves as the consistency condition for any valid pricing model. When the martingale property fails, arbitrage opportunities exist."}
{"title": "Radon-Nikodym Derivative", "equation": "\\frac{d\\mathbb{Q}}{d\\mathbb{P}} = \\exp\\left(-\\int_0^t \\theta_s dW_s^\\mathbb{P} - \\frac{1}{2} \\int_0^t \\theta_s^2 ds\\right)", "category": "Stochastic Processes", "tags": ["radon-nikodym-derivative", "measure-change", "girsanov-theorem", "market-price-of-risk", "sharpe-ratio", "novikov-condition", "equivalent-measures", "risk-neutral-construction", "density-process", "stochastic-exponential", "change-of-measure", "physical-to-risk-neutral"], "note": "## Equation Variables\nThe Radon-Nikodym derivative defines the density process for transforming probability measures, enabling the transition from physical (real-world) to risk-neutral pricing measures.\n\n- **$d\\mathbb{Q}/d\\mathbb{P}$**: Radon-Nikodym derivative (likelihood ratio)\n- **$\\theta_s$**: Market price of risk (Sharpe ratio)\n- **$dW_s^\\mathbb{P}$**: Brownian increment under physical measure $\\mathbb{P}$\n- **$\\int_0^t$**: Stochastic integral from 0 to $t$\n- **$\\exp$**: Exponential ensuring positivity\n- **$\\mathbb{P}$**: Physical (real-world) probability measure\n- **$\\mathbb{Q}$**: Risk-neutral probability measure\n\n## Interpretation\nThe RN derivative $Z_t = d\\mathbb{Q}/d\\mathbb{P}|_t$ is a martingale under $\\mathbb{P}$ that defines how to transform expectations between measures. The exponential form (stochastic exponential or Doléans-Dade exponential) ensures $Z_t > 0$ and $E^\\mathbb{P}[Z_t] = 1$, making $\\mathbb{Q}$ a valid probability measure.\n\nNovikov's condition $E^\\mathbb{P}[\\exp(0.5 \\int_0^T \\theta_s^2 ds)] < \\infty$ guarantees that the stochastic exponential is a true martingale. The process transforms the drift of all Itô processes: under $\\mathbb{Q}$, the drift changes from $\\mu$ to $r$ (risk-free rate).\n\n## Assumptions\n- $\\theta_s$ is adapted to the filtration\n- Novikov's condition holds (or Kazamaki's condition)\n- Girsanov's theorem applicability conditions\n- $\\mathbb{Q}$ and $\\mathbb{P}$ are equivalent measures\n- Parameters satisfy regularity conditions\n\n## Practical Use\nThe RN derivative constructs the risk-neutral measure from the physical measure, enabling risk-neutral pricing. It is used in change of numeraire techniques, forward measure construction, volatility derivatives pricing, and multi-factor model calibration. The market price of risk $\\theta$ captures the compensation investors require for bearing risk."}
{"title": "Girsanov Theorem Drift Change", "equation": "dW_t^\\mathbb{Q} = dW_t^\\mathbb{P} + \\theta dt", "category": "Stochastic Processes", "tags": ["girsanov-theorem", "drift-transformation", "measure-change-brownian-motion", "martingale-transformation", "risk-neutral-drift", "brownian-motion-shift", "stochastic-processes", "stochastic-calculus", "equivalent-martingale-measure", "sharpe-ratio", "market-price-of-risk", "forward-measure"], "note": "## Equation Variables\nGirsanov's Theorem provides the mechanism for transforming Brownian motion under a change of measure, showing that Brownian motion remains Brownian motion but with shifted drift.\n\n- **$dW_t^\\mathbb{Q}$**: Brownian increment under risk-neutral measure $\\mathbb{Q}$\n- **$dW_t^\\mathbb{P}$**: Brownian increment under physical measure $\\mathbb{P}$\n- **$\\theta$**: Market price of risk (constant for simplicity)\n- **$dt$**: Time differential\n- **$\\mathbb{P}$**: Physical measure\n- **$\\mathbb{Q}$**: Risk-neutral measure\n\n## Interpretation\nUnder a change of measure defined by the Radon-Nikodym derivative, a Brownian motion remains a Brownian motion, but its drift changes. Under the new measure $\\mathbb{Q}$, the Brownian increment has the form $dW_t^\\mathbb{Q} = dW_t^\\mathbb{P} + \\theta dt$. This means $W_t^\\mathbb{Q} = W_t^\\mathbb{P} + \\int_0^t \\theta_s ds$, so the $\\mathbb{Q}$-Brownian motion has drift $\\theta$ under the $\\mathbb{P}$-measure.\n\nFor an Itô process $dS_t = \\mu dt + \\sigma dW_t^\\mathbb{P}$, substituting $dW_t^\\mathbb{P} = dW_t^\\mathbb{Q} - \\theta dt$ gives the risk-neutral dynamics $dS_t = (\\mu - \\sigma\\theta) dt + \\sigma dW_t^\\mathbb{Q}$. The market price of risk $\\theta = (\\mu - r)/\\sigma$ ensures the drift becomes $r$.\n\n## Assumptions\n- $Z_t = d\\mathbb{Q}/d\\mathbb{P}|_t$ is a martingale under $\\mathbb{P}$\n- Novikov's condition for measure change validity\n- $\\theta$ is deterministic or adapted\n- Brownian motion is the only source of randomness\n\n## Practical Use\nGirsanov's Theorem is essential for constructing risk-neutral measures, deriving risk-neutral drift terms, building forward measures for interest rate derivatives, and performing numeraire changes. It provides the theoretical foundation for understanding why all assets earn the risk-free rate under $\\mathbb{Q}$ and how market risk is priced through $\\theta$."}
{"title": "Risk-Neutral Pricing Formula", "equation": "V_t = \\mathbb{E}^{\\mathbb{Q}}\\left[ e^{-\\int_t^T r_s ds} V_T \\mid \\mathcal{F}_t \\right]", "category": "Stochastic Processes", "tags": ["risk-neutral-pricing", "conditional-expectation", "discounted-payoff", "stochastic-discount-factor", "fundamental-theorem", "option-pricing-formula", "replication-strategy", "stochastic-rates", "terminal-payoff", "forward-measure", "backward-induction", "dynamic-programming"], "note": "## Equation Variables\nThe risk-neutral pricing formula is the cornerstone of modern derivatives pricing, expressing option values as discounted expected payoffs under the risk-neutral measure.\n\n- **$V_t$**: Derivative value at time $t$\n- **$\\mathbb{E}^{\\mathbb{Q}}$**: Risk-neutral expectation\n- **$e^{-\\int_t^T r_s ds}$**: Stochastic discount factor\n- **$r_s$**: Short rate at time $s$\n- **$V_T$**: Terminal payoff at maturity $T$\n- **$\\mathcal{F}_t$**: Information up to time $t$\n- **$T$**: Maturity date\n\n## Interpretation\nRisk-neutral pricing states that the value of any derivative is the conditional expectation of its discounted payoff under the risk-neutral measure. The discount factor $e^{-\\int_t^T r_s ds}$ accounts for the time value of money using the risk-free rate, not the asset's actual expected return.\n\nThis remarkable result implies that risk preferences (investor risk aversion) are not needed for pricing—they are embedded in the change of measure to $\\mathbb{Q}$. The market prices risk through the RN derivative, not through discounting. For European options, $V_T$ is the payoff function (e.g., $(S_T - K)^+$ for calls).\n\n## Assumptions\n- $\\mathbb{Q}$ is an equivalent martingale measure\n- Markets are arbitrage-free\n- Complete markets (unique $\\mathbb{Q}$) or incomplete (range of prices)\n- Short rate $r_s$ is adapted and integrable\n- Payoff $V_T$ is $\\mathcal{F}_T$-measurable\n\n## Practical Use\nThis formula derives the Black-Scholes closed form, prices all European-style derivatives, provides the foundation for numerical methods (Monte Carlo, PDE, tree methods), and serves as the consistency condition for model validation. Under stochastic rates, the formula extends to forward measures, simplifying the expectation by changing numeraire."}
{"title": "GARCH(1,1) Conditional Variance", "equation": "\\sigma_t^2 = \\omega + \\alpha \\epsilon_{t-1}^2 + \\beta \\sigma_{t-1}^2", "category": "Volatility Models", "tags": ["garch", "conditional-variance", "volatility-clustering", "arch-effects", "forecasting", "time-series", "heteroskedasticity", "mean-reversion"], "note": "## Equation Variables\nGARCH(1,1) is the foundational model for capturing time-varying volatility in financial returns. The equation specifies how the conditional variance at time $t$ depends on past observations and past variance.\n\n- **$\\sigma_{t}^{2}$**: Conditional variance at time $t$, representing $\\mathbb{E}[r_t^2 \\mid \\mathcal{F}_{t-1}]$, the expected squared return given all available information.\n- **$\\omega$**: Constant term ($\\omega > 0$), representing the long-run variance level or baseline volatility floor.\n- **$\\alpha$**: ARCH coefficient ($\\alpha \\ge 0$), measuring the contribution of yesterday's squared shock to today's variance.\n- **$\\beta$**: GARCH coefficient ($\\beta \\ge 0$), measuring the persistence of past variance into the current period.\n- **$\\epsilon_{t-1}^{2}$**: Squared residual (shock) at time $t-1$, calculated as $\\epsilon_{t-1} = r_{t-1} - \\mu_{t-1}$.\n\n## Interpretation\nThe GARCH(1,1) model captures the empirical observation that volatility clusters in financial markets—large changes tend to be followed by large changes, and small by small. Today's conditional variance is a weighted average of the long-run level $\\omega$, the recent shock magnitude $\\alpha \\epsilon_{t-1}^2$, and yesterday's variance $\\beta \\sigma_{t-1}^2$.\n\nThe sum $\\alpha + \\beta$ represents **volatility persistence**. Values close to 1 indicate that shocks have long-lasting effects on volatility (volatility takes a long time to revert to its mean), while lower values imply faster mean reversion. This parameter is critical for risk management and forecasting.\n\n## Assumptions\n- Returns $r_t$ are serially uncorrelated when conditioned on $\\mathcal{F}_{t-1}$: $\\mathbb{E}[r_t \\mid \\mathcal{F}_{t-1}] = \\mu_t$.\n- The conditional variance follows the GARCH dynamics specified above.\n- The conditional distribution of innovations can be normal, Student's $t$ (for fat tails), or GED.\n- Parameters must satisfy $\\omega > 0$, $\\alpha \\ge 0$, $\\beta \\ge 0$, and $\\alpha + \\beta < 1$ for stationarity.\n\n## Practical Use\nGARCH(1,1) is the workhorse model for volatility forecasting in financial econometrics. It is widely used for:\n\n1. **Risk Management**: Generating volatility forecasts for VaR calculations and expected shortfall.\n2. **Option Pricing**: When combined with risk-neutral valuation (e.g., Duan's risk-neutral GARCH).\n3. **Portfolio Optimization**: Dynamic volatility estimates for time-varying covariance matrices.\n4. **Market Timing**: Using volatility forecasts to adjust trading strategies.\n\nExtensions include EGARCH (log-variance for asymmetry), GJR-GARCH (leverage effects), and Realized GARCH (incorporating intraday data)."}
{"title": "GARCH(1,1) Unconditional Variance", "equation": "\\sigma_{\\infty}^2 = \\frac{\\omega}{1 - \\alpha - \\beta}", "category": "Volatility Models", "tags": ["garch", "long-run-variance", "stationarity", "unconditional-variance", "ergodic", "steady-state", "mean-reversion-level"], "note": "## Equation Variables\nThe unconditional (long-run, or steady-state) variance represents the variance to which the GARCH(1,1) process reverts over infinite time. It is the variance of the marginal distribution of returns.\n\n- **$\\sigma_{\\infty}^{2}$**: Unconditional variance, also denoted $\\sigma^2$ or $\\bar{\\sigma}^2$, representing $\\lim_{t \\to \\infty} \\mathbb{E}[\\sigma_t^2]$.\n- **$\\omega$**: GARCH constant term from the conditional variance equation.\n- **$\\alpha$**: ARCH coefficient from the conditional variance equation.\n- **$\\beta$**: GARCH coefficient from the conditional variance equation.\n\n## Interpretation\nUnder stationarity assumptions ($\\alpha + \\beta < 1$), the GARCH(1,1) process is mean-reverting to the unconditional variance level $\\sigma_{\\infty}^2$. This represents the long-run average volatility that the process converges to as $t \\to \\infty$.\n\nThe formula shows that $\\sigma_{\\infty}^2$ is a weighted average of $\\omega$ with weights that depend on $\\alpha$ and $\\beta$. As $\\alpha + \\beta$ approaches 1 (the boundary of stationarity), the denominator approaches 0, causing $\\sigma_{\\infty}^2$ to become very large. This reflects the intuitive idea that highly persistent volatility processes have high long-run variance levels.\n\nIn practice, this unconditional variance can be interpreted as the \"normal\" level of volatility around which the market fluctuates. It serves as a reference point for assessing whether current volatility is above or below its typical level.\n\n## Assumptions\n- The GARCH(1,1) process is covariance-stationary, requiring $\\alpha + \\beta < 1$.\n- The unconditional variance exists and is finite (guaranteed by the stationarity condition).\n- The process is ergodic, so time averages converge to ensemble averages.\n\n## Practical Use\nThe unconditional variance has several important applications:\n\n1. **Model Validation**: The estimated $\\omega$, $\\alpha$, and $\\beta$ should produce a reasonable $\\sigma_{\\infty}^2$ that matches sample variance.\n2. **Initial Values**: In MLE estimation, $\\sigma_{\\infty}^2$ often serves as an initial guess for the variance state.\n3. **Economic Interpretation**: The ratio $\\sigma_t^2 / \\sigma_{\\infty}^2$ indicates how far current volatility is from its long-run level.\n4. **Calibration Targets**: When fitting GARCH models, practitioners often target the sample variance as $\\sigma_{\\infty}^2$."}
{"title": "GARCH(1,1) Volatility Persistence", "equation": "\\lambda = \\alpha + \\beta", "category": "Volatility Models", "tags": ["garch", "persistence", "half-life", "volatility-decay", "long-memory", "mean-reversion-speed", "conditional-variance"], "note": "## Equation Variables\nThe persistence parameter $\\lambda$ (lambda) measures how long volatility shocks persist in the GARCH(1,1) framework. It is the sum of the ARCH and GARCH coefficients.\n\n- **$\\lambda$**: Volatility persistence, a scalar between 0 and 1 (for stationary processes).\n- **$\\alpha$**: ARCH coefficient, capturing the impact of recent squared shocks.\n- **$\\beta$**: GARCH coefficient, capturing the persistence of past variance.\n\n## Interpretation\nThe persistence parameter $\\lambda = \\alpha + \\beta$ is arguably the most important summary statistic of a GARCH(1,1) model. It answers the question: \"If volatility increases today, how much of that increase remains in future periods?\"\n\n- **$\\lambda \\approx 0$**: Volatility is nearly i.i.d.; shocks dissipate immediately.\n- **$\\lambda \\approx 0.5$**: Moderate persistence; shocks have noticeable but finite effects.\n- **$\\lambda \\approx 0.99$**: High persistence; volatility shocks persist for long periods (common in equity markets).\n\nThe **volatility half-life** can be computed as $h_{1/2} = \\ln(0.5) / \\ln(\\lambda)$, representing the time required for a volatility shock to decay by half. For $\\lambda = 0.99$, this is approximately 69 days. For $\\lambda = 0.95$, it's about 13.5 days.\n\nValues of $\\lambda \\ge 1$ indicate non-stationarity (explosive volatility), which is typically rejected by data but may occur during crisis periods.\n\n## Assumptions\n- The GARCH(1,1) process is properly specified and estimated.\n- For meaningful interpretation, $\\lambda < 1$ (stationary process).\n- The persistence is estimated with sufficient precision.\n\n## Practical Use\nVolatility persistence is crucial for:\n\n1. **Risk Assessment**: High persistence implies that high-volatility regimes persist, requiring longer memory in risk models.\n2. **Forecasting Horizon**: The forecast horizon at which volatility reverts to the mean depends on persistence.\n3. **Model Comparison**: Persistence helps distinguish across assets—cryptocurrencies often show higher persistence than currencies.\n4. **Trading Strategies**: Mean-reversion strategies work better for assets with low persistence.\n5. **Stress Testing**: The persistence parameter determines how long stress conditions might last."}
{"title": "Risk-Neutral GARCH Adjustment", "equation": "\\mu - \\lambda \\nu = r - \\frac{1}{2} \\sigma^2", "category": "Volatility Models", "tags": ["risk-neutral", "garch", "option-pricing", "local-risk-neutral-measure", "duan", "volatility-drift", "drift-adjustment"], "note": "## Equation Variables\nThe risk-neutral GARCH adjustment relates physical-world drift to risk-neutral drift, essential for option pricing under GARCH models. It derives from Duan's (1999) local risk-neutral measure.\n\n- **$\\mu$**: Physical-world drift (expected return under the real-world measure $\\mathbb{P}$).\n- **$\\lambda$**: Market price of variance risk, defined as the coefficient relating physical and risk-neutral variance dynamics.\n- **$\\nu$**: Variance risk premium parameter.\n- **$r$**: Risk-free interest rate (continuously compounded).\n- **$\\sigma^2$**: Conditional variance under the physical measure.\n\n## Interpretation\nIn continuous-time derivatives pricing, the drift under the risk-neutral measure $\\mathbb{Q}$ differs from the physical drift. For GARCH models, this adjustment captures the compensation investors require for bearing volatility risk.\n\nThe equation states that the risk-neutral drift $r - \\frac{1}{2}\\sigma^2$ equals the physical drift $\\mu$ minus the risk premium $\\lambda \\nu$. For the standard case where $\\lambda \\nu = \\mu - (r - \\frac{1}{2}\\sigma^2)$, the physical drift translates to the familiar Black-Scholes drift under $\\mathbb{Q}$.\n\nThe **variance risk premium** $\\nu$ measures the difference between implied and physical variance. Typically, $\\nu > 0$, meaning implied variance exceeds expected physical variance (investors pay a premium for protection).\n\n## Assumptions\n- The GARCH model follows specific dynamics under both measures.\n- The market price of variance risk $\\lambda$ is constant or follows a specified form.\n- The underlying asset follows a lognormal distribution under the risk-neutral measure.\n- Interest rate $r$ is constant or deterministic.\n\n## Practical Use\nThe risk-neutral GARCH adjustment enables:\n\n1. **Option Pricing**: GARCH option pricing formulas require simulation under the risk-neutral measure.\n2. **Volatility Forecasting**: Risk-neutral dynamics differ from physical dynamics; both are important.\n3. **Variance Swap Valuation**: The fair variance swap strike equals the risk-neutral expected variance.\n4. **Model Calibration**: Fitting GARCH models to option prices requires the risk-neutral adjustment.\n5. **Risk Premium Estimation**: Comparing physical and risk-neutral volatilities reveals market risk appetite."}
{"title": "EWMA (RiskMetrics) Conditional Variance", "equation": "\\sigma_t^2 = \\lambda \\sigma_{t-1}^2 + (1 - \\lambda) \\epsilon_{t-1}^2", "category": "Volatility Models", "tags": ["ewma", "riskmetrics", "exponential-weighting", "conditional-variance", "decay-factor", "jpmorgan", "volatile-memory"], "note": "## Equation Variables\nThe Exponentially Weighted Moving Average (EWMA) model is the RiskMetrics approach to volatility estimation. It gives more weight to recent observations while allowing older observations to decay exponentially.\n\n- **$\\sigma_t^2$**: Conditional variance estimate at time $t$.\n- **$\\lambda$**: Decay factor (lambda), typically between 0 and 1; RiskMetrics uses $\\lambda = 0.94$.\n- **$\\sigma_{t-1}^2$**: Previous period's variance estimate.\n- **$\\epsilon_{t-1}^2$**: Squared residual (return minus mean) at time $t-1$.\n\n## Interpretation\nEWMA differs from GARCH in that it has no long-run variance term $\\omega$ and no ARCH term $\\alpha$ separate from $\\beta$. The model can be rewritten as:\n\n$$\\sigma_t^2 = (1 - \\lambda) \\sum_{j=0}^{\\infty} \\lambda^j \\epsilon_{t-1-j}^2$$\n\nThis shows that the current variance is a weighted sum of all past squared residuals, with weights decaying geometrically at rate $\\lambda$.\n\nThe decay factor $\\lambda$ controls how quickly old information is forgotten:\n- **High $\\lambda$ (e.g., 0.99)**: Long memory, slow decay.\n- **Low $\\lambda$ (e.g., 0.80)**: Short memory, fast decay.\n\nRiskMetrics chose $\\lambda = 0.94$ for daily data based on empirical fit to financial time series. The effective half-life of information is $\\ln(0.5) / \\ln(\\lambda)$, approximately 11 days for $\\lambda = 0.94$.\n\n## Assumptions\n- Returns are serially uncorrelated (or returns minus a constant mean are used).\n- The decay factor $\\lambda$ is specified or estimated from data.\n- The model is used for short-term volatility forecasting.\n\n## Practical Use\nEWMA is widely used for:\n\n1. **Risk Management**: Basel framework allows EWMA for VaR calculations.\n2. **Correlation Estimation**: The same EWMA framework applies to correlations (RiskMetrics approach).\n3. **Computational Efficiency**: Simple recursive update, no numerical optimization required.\n4. **Stress Testing**: Easy to compute volatility under different scenarios.\n5. **Limitations**: Does not capture asymmetric volatility responses to positive/negative returns (no leverage effect)."}
{"title": "Realized Variance (Sum of Squared Returns)", "equation": "RV = \\sum_{i=1}^{M} r_{t+i/M}^2", "category": "Volatility Models", "tags": ["realized-variance", "intraday-returns", "quadratic-variation", "high-frequency", "sum-squared-returns", "ito-semimartingale", "microstructure"], "note": "## Equation Variables\nRealized Variance (RV) is the sum of squared intraday returns, providing a consistent estimator of integrated variance for an observable price process.\n\n- **$RV$**: Realized variance, typically annualized by multiplying by the number of trading periods.\n- **$M$**: Number of intraday intervals (e.g., $M = 78$ for 5-minute returns in a 6.5-hour trading day).\n- **$r_{t+i/M}$**: Log return from time $t + (i-1)/M$ to $t + i/M$, computed as $\\ln(P_{t+i/M}) - \\ln(P_{t+(i-1)/M})$.\n\n## Interpretation\nUnder the assumption that the price process is an Itô semimartingale:\n\n$$P_T = P_0 + \\int_0^T \\mu_s ds + \\int_0^T \\sigma_s dW_s$$\n\nRealized variance converges in probability to the **integrated variance**:\n\n$$RV \\xrightarrow{p} \\int_t^{t+1} \\sigma_s^2 ds \\equiv IV_t$$\n\nThis is the total variance accumulated over the measurement period. For daily RV, this represents the daily variance of the underlying price process, excluding jumps.\n\nThe number of intraday observations $M$ involves a bias-variance trade-off:\n- **Too few observations**: High estimation variance.\n- **Too many observations**: Microstructure noise dominates (bid-ask bounce, discrete prices).\n\nOptimal sampling typically uses 5-30 minute intervals for liquid equities.\n\n## Assumptions\n- Prices follow a continuous-path Itô semimartingale (no jumps).\n- Returns are correctly measured (no market microstructure effects).\n- The sampling frequency is appropriate for the asset's liquidity.\n- No asynchronous trading or stale prices.\n\n## Practical Use\nRealized variance revolutionized empirical finance:\n\n1. **Volatility Forecasting**: RV provides a more efficient volatility estimate than daily returns.\n2. **Model-Free Volatility**: No distributional assumptions needed; directly observable.\n3. **GARCH Fitting**: RV can replace squared daily returns in GARCH estimation.\n4. **Volatility Trading**: Realized variance swaps pay based on actual RV vs. a fixed strike.\n5. **Model Validation**: Comparing RV to model-implied variance tests model specification."}
{"title": "Realized Volatility", "equation": "\\sigma_{realized} = \\sqrt{252 \\times RV}", "category": "Volatility Models", "tags": ["realized-volatility", "annualized-volatility", "standard-deviation", "sqrt-rule", "trading-days", "intraday-volatility"], "note": "## Equation Variables\nRealized volatility is the square root of annualized realized variance, converting the quadratic variation measure to a standard deviation-like scale comparable to option prices and traditional volatility estimates.\n\n- **$\\sigma_{realized}$**: Annualized realized volatility, typically expressed in percentage points.\n- **$RV$**: Realized variance, computed as $\\sum_{i=1}^{M} r_{t+i/M}^2$ (not annualized).\n- **$252$**: Approximate number of trading days per year (used for annualization).\n\n## Interpretation\nRealized variance $RV$ measures the variance over a single day (or other measurement period). To express this on an annualized basis comparable to implied volatilities and historical volatilities, we scale by the number of trading periods:\n\n$$\\sigma_{annual}^2 = 252 \\times \\sigma_{daily}^2 \\implies \\sigma_{annual} = \\sqrt{252} \\times \\sigma_{daily}$$\n\nFor example, if daily RV is 0.0001 (1% daily variance), then:\n\n$$\\sigma_{realized} = \\sqrt{252 \\times 0.0001} = \\sqrt{0.0252} \\approx 0.159 \\approx 15.9\\%$$\n\nThe factor 252 reflects the convention of using trading days rather than calendar days. Some practitioners use 260 or 365, but 252 is standard in derivatives markets.\n\nRealized volatility is preferred to historical volatility because it uses intraday data, providing 50-100 times more information than daily return-based estimates.\n\n## Assumptions\n- RV is computed from sufficiently many intraday observations.\n- The price process follows an Itô semimartingale with continuous paths.\n- 252 trading days is an appropriate annualization factor for the asset.\n- Returns are computed from prices without microstructure bias.\n\n## Practical Use\nRealized volatility is fundamental for:\n\n1. **Volatility Comparison**: Comparing model-implied vol, historical vol, and realized vol.\n2. **Volatility Forecasting**: ARFIMA and HAR models use lagged realized vol for prediction.\n3. **Trading**: Volatility trading strategies use realized vol as the payoff metric.\n4. **Model Calibration**: GARCH and SV models can be calibrated to realized vol measures.\n5. **Risk Assessment**: Current realized vol indicates today's risk level better than historical vol."}
{"title": "Parkinson Volatility (High-Low Range)", "equation": "\\sigma_p = \\sqrt{\\frac{1}{4 \\ln 2} \\ln^2\\left(\\frac{H}{L}\\right)}", "category": "Volatility Models", "tags": ["parkinson-volatility", "high-low-range", "range-based-volatility", "daily-volatility", "extreme-values", "brownian-motion"], "note": "## Equation Variables\nThe Parkinson (1980) estimator uses the high-low range of the trading day to estimate volatility. It captures more information than close-to-close returns by utilizing the entire price range.\n\n- **$\\sigma_p$**: Parkinson volatility estimate (annualized or not, depending on scaling).\n- **$H$**: Highest price observed during the trading day.\n- **$L$**: Lowest price observed during the trading day.\n- **$\\ln 2 \\approx 0.693$**: Natural logarithm of 2, a constant from the derivation.\n\n## Interpretation\nUnder geometric Brownian motion with constant variance, the expected value of the high-low range is:\n\n$$\\mathbb{E}\\left[\\ln^2\\left(\\frac{H}{L}\\right)\\right] = 4 \\ln 2 \\cdot \\sigma^2 \\Delta t$$\n\nThus, the volatility estimator is:\n\n$$\\hat{\\sigma} = \\sqrt{\\frac{1}{4 \\ln 2} \\ln^2\\left(\\frac{H}{L}\\right)}$$\n\nThe factor $1/(4 \\ln 2) \\approx 0.3607$ adjusts for the fact that the range underestimates variance for short horizons. For daily data, Parkinson vol is approximately 2.5 times more efficient than close-to-close volatility.\n\nThe estimator works because, for a Brownian motion, the maximum and minimum jointly contain more information about variance than a single endpoint observation.\n\n## Assumptions\n- The price process follows geometric Brownian motion (lognormal prices, constant variance).\n- The high and low are observed within the same day without price jumps.\n- Trading is continuous throughout the day.\n- The sampling period is short (intraday or daily), making drift negligible.\n\n## Practical Use\nParkinson volatility has several advantages:\n\n1. **Efficiency**: 2-5 times more efficient than close-to-close volatility for short horizons.\n2. **Jump Robustness**: Less affected by price jumps at the close (uses range, not close).\n3. **Data Availability**: High and low are commonly reported (OHLC data).\n4. **Limitations**: Underestimates volatility when there are jumps or drift is significant.\n5. **Extensions**: The estimator can be improved by incorporating open and close prices (Garman-Klass)."}
{"title": "Garman-Klass Volatility", "equation": "\\sigma_{gk} = 0.511 \\left[ \\ln^2\\left(\\frac{H}{L}\\right) + (2 \\ln 2 - 1) \\ln^2\\left(\\frac{C}{O}\\right) \\right]^{1/2}", "category": "Volatility Models", "tags": ["garman-klass", "range-based-volatility", "ohlc-data", "open-high-low-close", "intraday-volatility", "efficient-estimator"], "note": "## Equation Variables\nThe Garman-Klass (1980) estimator extends the Parkinson range-based estimator by incorporating open and close prices, achieving higher efficiency while using only OHLC data.\n\n- **$\\sigma_{gk}$**: Garman-Klass volatility estimate (not yet annualized).\n- **$H$**: Daily high price.\n- **$L$**: Daily low price.\n- **$C$**: Daily close price.\n- **$O$**: Daily open price.\n- **$0.511 \\approx \\frac{1}{2\\sqrt{\\pi \\ln 2}}$**: Scaling constant for optimal efficiency under Brownian motion.\n- **$2 \\ln 2 - 1 \\approx 0.386$**: Constant from the derivation.\n\n## Interpretation\nThe Garman-Klass estimator combines two sources of information:\n\n1. **Range component**: $\\ln^2(H/L)$, capturing the high-low range (as in Parkinson).\n2. **Open-close component**: $(2 \\ln 2 - 1) \\ln^2(C/O)$, capturing the close-to-open movement.\n\nThe constant $0.511$ provides asymptotic efficiency of 98% relative to the variance of the true price process (compared to 40-50% for close-to-close). This means Garman-Klass uses the OHLC information nearly as efficiently as intraday data.\n\nThe formula can be expressed more compactly as:\n\n$$\\sigma_{gk}^2 = 0.261 \\left[ \\ln^2\\left(\\frac{H}{L}\\right) + 0.099 \\ln^2\\left(\\frac{C}{O}\\right) \\right]$$\n\n## Assumptions\n- Prices follow geometric Brownian motion (lognormal, no jumps).\n- The open and close prices are for the same day (not overnight returns).\n- The price process is continuous within the day.\n- Drift is negligible over the sampling period.\n\n## Practical Use\nGarman-Klass is widely used because:\n\n1. **Efficiency**: Uses OHLC data (widely available) with near-optimal efficiency.\n2. **Jump Robustness**: Better than close-to-close for intraday jumps, but still affected by large jumps.\n3. **No Intraday Data Required**: Doesn't need tick-by-tick data like realized variance.\n4. **Comparison**: Should be close to realized variance if markets are efficient.\n5. **Limitations**: Underestimates volatility when there are significant price jumps."}
{"title": "Rogers-Satchell Volatility", "equation": "\\sigma_{rs} = \\sqrt{\\frac{1}{2} \\ln^2\\left(\\frac{H}{O}\\right) - (2 \\ln 2 - 1) \\ln^2\\left(\\frac{C}{O}\\right) + \\frac{1}{2} \\ln^2\\left(\\frac{H}{C}\\right) + (2 \\ln 2 - 1) \\ln^2\\left(\\frac{C}{L}\\right) - \\frac{1}{2} \\ln^2\\left(\\frac{L}{O}\\right) + (2 \\ln 2 - 1) \\ln^2\\left(\\frac{L}{H}\\right)}", "category": "Volatility Models", "tags": ["rogers-satchell", "range-based-volatility", "jumps", "estimator-consistency", "drift-robust", "unbiased-estimator"], "note": "## Equation Variables\nThe Rogers-Satchell (1991) estimator is a range-based volatility estimator that remains unbiased even when the underlying price process has drift (non-zero expected return).\n\n- **$\\sigma_{rs}$**: Rogers-Satchell volatility estimate.\n- **$H, L, O, C$**: Daily high, low, open, and close prices respectively.\n- **$\\ln$**: Natural logarithm.\n\nThe full expression can be simplified using the notation $h = \\ln H$, $l = \\ln L$, $o = \\ln O$, $c = \\ln C$:\n\n$$\\sigma_{rs}^2 = \\frac{1}{2}(h - o)^2 - (2\\ln 2 - 1)(c - o)^2 + \\frac{1}{2}(h - c)^2 + (2\\ln 2 - 1)(c - l)^2 - \\frac{1}{2}(l - o)^2 + (2\\ln 2 - 1)(l - h)^2$$\n\n## Interpretation\nUnlike Parkinson and Garman-Klass, the Rogers-Satchell estimator is **unbiased** even when the price process has drift. This is crucial because financial assets typically have non-zero expected returns, violating the zero-drift assumption used in deriving those estimators.\n\nThe estimator can be written more compactly as:\n\n$$\\sigma_{rs}^2 = \\frac{1}{T} \\sum_{t=1}^{T} \\left( U_t \\cdot (H_t - O_t) - D_t \\cdot (O_t - L_t) \\right)$$\n\nwhere $U_t$ and $D_t$ are up-range and down-range indicators.\n\nThe formula systematically accounts for all six possible sign combinations of open, high, low, and close prices.\n\n## Assumptions\n- The price process is an Itô semimartingale (can have drift and stochastic volatility).\n- Jumps are absent or small relative to continuous price movement.\n- The measurement period is short enough that volatility is approximately constant.\n\n## Practical Use\nRogers-Satchell is important for:\n\n1. **Drift-Robust Estimation**: Works correctly even when prices have significant drift.\n2. **Component Analysis**: Forms the basis of the Yang-Zhang estimator.\n3. **Jump Detection**: The difference between RS and other estimators indicates jump activity.\n4. **Limitations**: Still assumes no large jumps; overestimates vol when jumps occur.\n5. **Research**: Used in studies comparing different volatility estimation methods."}
{"title": "Yang-Zhang Volatility", "equation": "\\sigma_{yz} = \\sqrt{\\sigma_o^2 + k \\cdot \\sigma_c^2 + k \\cdot \\sigma_{rs}^2} \\quad \\text{where} \\quad k = \\frac{0.34}{1.34 + \\frac{N}{N-1}}", "category": "Volatility Models", "tags": ["yang-zhang", "combined-estimator", "open-close-volatility", "range-volatility", "optimal-weighting", "drift-robust"], "note": "## Equation Variables\nThe Yang-Zhang (2000) estimator combines open-close volatility, close volatility, and Rogers-Satchell range volatility with optimal weights, achieving the lowest possible variance among OHLC estimators.\n\n- **$\\sigma_{yz}$**: Yang-Zhang volatility estimate (not yet annualized).\n- **$\\sigma_o^2$**: Open volatility, $\\frac{1}{N-1} \\sum_{t=1}^{N} (\\ln(O_t/O_{t-1}) - \\overline{\\ln(O_t/O_{t-1})})^2$.\n- **$\\sigma_c^2$**: Close volatility, $\\frac{1}{N-1} \\sum_{t=1}^{N} (\\ln(C_t/C_{t-1}) - \\overline{\\ln(C_t/C_{t-1})})^2$.\n- **$\\sigma_{rs}^2$**: Rogers-Satchell variance for each day, averaged.\n- **$k$**: Weighting factor depending on the number of observations $N$.\n- **$N$**: Total number of days in the sample.\n\n## Interpretation\nThe Yang-Zhang estimator combines three orthogonal components:\n\n1. **$\\sigma_o^2$**: Volatility from open-to-previous-close returns.\n2. **$\\sigma_c^2$**: Volatility from close-to-previous-close returns.\n3. **$\\sigma_{rs}^2$**: Intraday range-based volatility (drift-robust).\n\nThe weight $k$ optimally combines these components. For large $N$, $k \\approx 0.34 / 2.34 \\approx 0.145$. The formula becomes:\n\n$$\\sigma_{yz} \\approx \\sqrt{\\sigma_o^2 + 0.145 \\sigma_c^2 + 0.145 \\sigma_{rs}^2}$$\n\nYang and Zhang proved that this estimator has the minimum variance among all OHCL estimators and is consistent even in the presence of drift.\n\n## Assumptions\n- The underlying price process is an Itô semimartingale.\n- The sample size $N$ is large enough for the asymptotic weights to apply.\n- Prices are correctly measured (no microstructure effects).\n\n## Practical Use\nYang-Zhang is considered the best OHLC-based volatility estimator:\n\n1. **Optimal Efficiency**: Has the lowest variance among range-based estimators.\n2. **Drift-Robust**: Works correctly for assets with significant drift.\n3. **Jump-Robust**: More robust than pure close-to-close estimates.\n4. **Standard**: Often used as the benchmark for comparing other estimators.\n5. **Implementation**: Requires daily OHL C data and some computational effort."}
{"title": "VIX Formula (Black-Scholes Implied Variance)", "equation": "\\sigma^2 = \\frac{2}{T} \\sum_{i} \\frac{\\Delta K_i}{K_i^2} e^{rT} Q(K_i) - \\frac{1}{T} \\left( \\frac{F}{K^*} - 1 \\right)^2", "category": "Volatility Models", "tags": ["vix", "cboe-volatility-index", "implied-variance", "option-pricing", "risk-neutral-expectation", "variance-swap"], "note": "## Equation Variables\nThe VIX formula computes the model-free implied variance from a cross-section of out-of-the-money option prices. It represents the expected variance under the risk-neutral measure, consistent with a variance swap payoff.\n\n- **$\\sigma^2$**: Model-free implied variance (annualized).\n- **$T$**: Time to expiration of the options (in years).\n- **$\\Delta K_i$**: Strike price interval (difference between adjacent strikes).\n- **$K_i$**: Strike price of the $i$-th option.\n- **$r$**: Risk-free interest rate.\n- **$Q(K_i)$**: Midpoint of the bid-ask quote for the out-of-the-money call or put at strike $K_i$.\n- **$F$**: Forward index level, derived from call-put parity.\n- **$K^*$**: First strike at or below the forward price (the \"at-the-money\" reference strike).\n\n## Interpretation\nThe VIX formula derives from the variance swap replication strategy. The first term represents the present value of expected squared returns (the \"upside\" and \"downside\" variances), while the second term adjusts for the convexity of log-returns around the forward price.\n\nThe summation includes both calls and puts, with the convention:\n- For $K < K^*$: Use put prices (out-of-the-money puts).\n- For $K > K^*$: Use call prices (out-of-the-money calls).\n\nThe factor $2/T$ annualizes the variance from the measurement period to 1 year. VIX is then $\\sqrt{\\sigma^2} \\times 100$, so a VIX of 20 corresponds to 20% annualized volatility.\n\n## Assumptions\n- Options are European-style and can be exercised only at expiration.\n- No arbitrage holds (put-call parity is satisfied).\n- The forward price $F$ is correctly inferred from the term structure.\n- Bid-ask spreads are reasonable (wide spreads indicate illiquidity).\n- The entire range of strikes captures the full distribution of returns.\n\n## Practical Use\nVIX and the model-free implied variance are:\n\n1. **Market Fear Gauge**: VIX rising indicates increased uncertainty and risk aversion.\n2. **Risk-Neutral Distribution**: The option prices encode the market's aggregate expectation.\n3. **Variance Swap Pricing**: The formula gives the fair variance swap strike.\n4. **Volatility Trading**: VIX futures and options allow trading on volatility directly.\n5. **Tail Risk Hedging**: High VIX indicates demand for crash protection."}
{"title": "Implied Volatility as Variance Swap", "equation": "\\sigma_{IV}^2 = \\frac{2}{T} \\sum_i \\frac{e^{rT} \\Delta K_i}{K_i^2} \\left[ Q(K_i) - Q(K_i + \\Delta K_i) \\right]", "category": "Volatility Models", "tags": ["implied-volatility", "variance-swap", "continuous-summation", "model-free-implied-volatility", "replication", "quadratic-variation"], "note": "## Equation Variables\nThis formula expresses model-free implied variance as the limit of a Riemann sum approximating the continuous integral of option prices. It provides an alternative, often more stable, implementation of the VIX formula.\n\n- **$\\sigma_{IV}^2$**: Model-free implied variance (annualized).\n- **$T$**: Time to expiration in years.\n- **$\\Delta K_i$**: Strike price increment between adjacent options.\n- **$K_i$**: Strike price of the $i$-th option.\n- **$e^{rT}$**: Discount factor (present value factor for risk-free rate).\n- **$Q(K_i)$**: Option quote (bid-ask midpoint) at strike $K_i$.\n- **The difference**: $Q(K_i) - Q(K_i + \\Delta K_i)$ represents the contribution of the price density at strike $K_i$.\n\n## Interpretation\nThis formula is mathematically equivalent to the VIX formula but written as a forward difference. As $\\Delta K_i \\to 0$, the sum converges to the continuous integral:\n\n$$\\sigma_{IV}^2 = \\frac{2e^{rT}}{T} \\int_{0}^{\\infty} \\frac{Q(K)}{K^2} dK$$\n\nThe difference $Q(K_i) - Q(K_i + \\Delta K_i)$ is proportional to the risk-neutral density at strike $K_i$, weighted by $1/K^2$. This reflects the continuous replication of a variance swap payoff.\n\nThe formula can be derived from the identity:\n\n$$\\int_0^F \\frac{P(K)}{K^2} dK + \\int_F^{\\infty} \\frac{C(K)}{K^2} dK = \\frac{1}{F} \\left[ \\frac{F}{K^*} - 1 \\right]^2 + \\frac{2}{T} \\int_0^{\\infty} \\frac{Q(K)}{K^2} dK$$\n\n## Assumptions\n- Options exist for a continuum of strikes (approximated by discrete strikes).\n- The risk-neutral density has bounded support (or tail behavior is properly handled).\n- Option prices are arbitrage-free and represent the true market.\n- The discretization error from finite $\\Delta K$ is acceptable.\n\n## Practical Use\nThis formulation is useful for:\n\n1. **Numerical Implementation**: Forward differences can be more stable than centered differences.\n2. **Interpolation**: Easier to handle when strikes are unevenly spaced.\n3. **Tail Handling**: Explicit treatment of extreme strikes (far OTM puts/calls).\n4. **Research**: Understanding the relationship between option prices and the risk-neutral density.\n5. **Calibration**: Used in extracting the implied volatility surface."}
{"title": "Volatility Smile (Quadratic Parametrization)", "equation": "\\sigma(K) = a + b \\ln\\left(\\frac{K}{F}\\right) + c \\ln^2\\left(\\frac{K}{F}\\right)", "category": "Volatility Models", "tags": ["volatility-smile", "smile-parametrization", "strike-dependence", "implied-volatility-surface", "forward-moneyness", "skew", "curvature"], "note": "## Equation Variables\nThe quadratic volatility smile model captures the empirical observation that implied volatility varies with strike price, typically showing higher vol for deep out-of-the-money puts and (to a lesser extent) deep out-of-the-money calls.\n\n- **$\\sigma(K)$**: Implied volatility as a function of strike price $K$.\n- **$a$**: ATM (at-the-money) volatility level, $\\sigma(F)$ where $F$ is the forward price.\n- **$b$**: Skew coefficient, measuring the linear term (volatility slope with respect to log-moneyness).\n- **$c$**: Curvature coefficient, measuring the quadratic term (smile convexity).\n- **$K$**: Strike price.\n- **$F$**: Forward price of the underlying asset.\n- **$\\ln(K/F)$**: Log-moneyness, negative for puts (K < F), positive for calls (K > F).\n\n## Interpretation\nThe quadratic model captures three key features of the implied volatility surface:\n\n1. **Level ($a$)**: The ATM volatility, often the most liquid and reference point.\n2. **Skew ($b$)**: The slope of volatility with respect to log-moneyness. Typically $b < 0$ for equity indices (downside puts have higher vol than upside calls).\n3. **Curvature ($c$)**: The smile shape, often positive for pronounced smile patterns.\n\nThe **forward moneyness** $\\ln(K/F)$ is preferred to simple moneyness $K/F$ because:\n- It is symmetric around the forward price.\n- It accounts for the forward curve term structure.\n- It is consistent with the log-normal assumption underlying Black-Scholes.\n\nThe skew is often expressed as \"vol per delta\" or \"25-delta skew,\" the slope at specific delta levels.\n\n## Assumptions\n- The smile can be approximated by a quadratic function in log-moneyness.\n- The forward price $F$ is known (or can be inferred from futures/forward curve).\n- The smile is time-invariant or varies predictably with maturity.\n\n## Practical Use\nQuadratic smile models are used for:\n\n1. **Option Pricing**: Interpolating/extrapolating vol at strikes without liquid quotes.\n2. **Risk Management**: Computing Greeks for portfolios with non-ATM options.\n3. **Arbitrage Detection**: Identifying violations of no-arbitrage conditions.\n4. **Model Comparison**: Comparing smile parameters across assets and time.\n5. **Limitations**: Can produce arbitrageable regions; may not capture wing behavior well."}
{"title": "SABR Model Dynamics", "equation": "dF = \\sigma F^{\\beta} dW_1, \\quad d\\sigma = \\nu \\sigma dW_2, \\quad dW_1 dW_2 = \\rho dt", "category": "Volatility Models", "tags": ["sabr", "stochastic-volatility", "volatility-dynamics", "hedge-ratio", "implied-volatility", "local-volatility", "correlation"], "note": "## Equation Variables\nThe SABR (Stochastic-Alpha-Beta-Rho) model describes the joint dynamics of the forward price $F$ and volatility $\\sigma$ under risk-neutral measure $\\mathbb{Q}$. It has become the industry standard for smile interpolation.\n\n- **$F$**: Forward price of the underlying (or spot price if $F = S_0 e^{rT}$).\n- **$\\sigma$**: instantaneous volatility (not the same as implied vol).\n- **$\\alpha$**: Initial volatility parameter ($\\alpha > 0$), often called \"vol-of-vol.\"\n- **$\\beta$**: CEV exponent ($0 \\le \\beta \\le 1$), controlling the shape of volatility vs. underlying.\n- **$\\rho$**: Correlation between forward and volatility innovations ($-1 < \\rho < 0$ typically).\n- **$\\nu$**: Volatility of volatility ($\\nu > 0$), controlling the rate of volatility changes.\n- **$dW_1, dW_2$**: Standard Brownian motions with correlation $\\rho$.\n\n## Interpretation\nThe SABR model extends the Black-Scholes log-normal dynamics:\n\n- **$\\beta = 1$**: Log-normal dynamics (Black-Scholes), $dF/F = \\sigma dW_1$.\n- **$\\beta = 0$**: Normal dynamics (Bachelier), $dF = \\sigma dW_1$.\n- **$0 < \\beta < 1$**: CEV dynamics, intermediate behavior.\n\nThe correlation $\\rho$ captures the **leverage effect**: when $\\rho < 0$ (typical for equity indices), volatility increases when prices fall. This generates the volatility skew.\n\nThe parameters have intuitive interpretations:\n- $\\alpha$: Overall volatility level.\n- $\\beta$: How volatility scales with the underlying price.\n- $\\rho$: Asymmetry of the smile.\n- $\\nu$: Width of the smile (convexity in log-moneyness).\n\n## Assumptions\n- The model is specified under the risk-neutral measure.\n- Parameters are constant (or follow deterministic functions of time).\n- No jumps in either $F$ or $\\sigma$.\n- The correlation $\\rho$ is bounded away from $\\pm 1$.\n\n## Practical Use\nSABR is the industry standard for:\n\n1. **Smile Interpolation**: Fitting the entire smile from ATM vol, skew, and curvature.\n2. **Delta Hedging**: Computing option sensitivities across strikes.\n3. **Product Pricing**: Used for caps, swaptions, and other interest rate derivatives.\n4. **Risk Management**: Managing smile risk across portfolios.\n5. **Extensions**: Time-dependent parameters, stochastic rates, jump SABR."}
{"title": "SABR Approximation (Hagan et al.)", "equation": "\\sigma_{BS}(F,K) = \\frac{\\alpha}{(F K)^{(1-\\beta)/2} \\left[1 + \\left(\\frac{(1-\\beta)^2}{24} \\alpha^2 + \\frac{\\rho \\beta \\nu \\alpha}{4} + \\frac{2-3\\rho^2}{24} \\nu^2\\right) T \\right]} \\cdot \\frac{z}{x(z)}", "category": "Volatility Models", "tags": ["sabr-approximation", "hagan-formula", "implied-volatility", "normal-approximation", "-smile-fitting", "stochastic-volatility"], "note": "## Equation Variables\nThe Hagan et al. (2002) SABR approximation provides an explicit formula for Black-Scholes implied volatility as a function of strike and forward, avoiding costly Monte Carlo simulation.\n\n- **$\\sigma_{BS}(F,K)$**: Black-Scholes implied volatility for strike $K$, forward $F$.\n- **$\\alpha$**: SABR volatility of volatility parameter.\n- **$\\beta$**: SABR CEV exponent.\n- **$\\rho$**: Correlation between forward and volatility.\n- **$\\nu$**: SABR volatility of volatility.\n- **$T$**: Time to expiration.\n- **$z$**: Dimensionless variable, $z = \\frac{\\nu}{\\alpha} (F K)^{(1-\\beta)/2} \\ln(F/K)$.\n- **$x(z)$**: Function mapping $z$ to log-normal equivalent, $x(z) = \\ln\\left( \\frac{\\sqrt{1 - 2\\rho z + z^2} + z - \\rho}{1 - \\rho} \\right)$.\n\n## Interpretation\nThe SABR approximation has three components:\n\n1. **Base term**: $\\frac{\\alpha}{(F K)^{(1-\\beta)/2}} \\frac{z}{x(z)}$, the leading-order approximation.\n2. **Convexity adjustment**: The term in brackets corrects for $\\beta \\neq 1$, correlation, and vol-of-vol.\n3. **The function $z/x(z)$**: Ensures the correct limit as $K \\to F$ (ATM) and handles far OTM strikes.\n\nFor ATM options ($K \\approx F$):\n\n$$\\sigma_{ATM} \\approx \\frac{\\alpha}{F^{1-\\beta}} \\left[ 1 + \\left( \\frac{(1-\\beta)^2}{24} \\frac{\\alpha^2}{F^{2(1-\\beta)}} + \\frac{\\rho \\beta \\nu \\alpha}{4 F^{1-\\beta}} + \\frac{2 - 3\\rho^2}{24} \\nu^2 \\right) T \\right]$$\n\nThis shows how ATM vol drifts over time due to the convexity adjustment.\n\n## Assumptions\n- Parameters are constant over the option's lifetime.\n- The expansion is accurate for moderate $\\nu \\sqrt{T}$.\n- Extreme strikes (very low or very high) may require correction terms.\n- The correlation $\\rho$ is not too close to $\\pm 1$.\n\n## Practical Use\nThe SABR approximation is essential because:\n\n1. **Speed**: Analytical formula instead of numerical integration.\n2. **Calibration**: Easy to fit to market smiles.\n3. **Interpolation**: Smooth vol surface across strikes and maturities.\n4. **Greeks**: Can be differentiated for risk sensitivities.\n5. **Limitations**: Needs correction terms for very long tenors or extreme vol-of-vol."}
{"title": "Forward Variance Dynamics", "equation": "d\\xi_t = \\xi_t \\left( \\nu_1 dW_t^1 + \\nu_2 dW_t^2 \\right)", "category": "Volatility Models", "tags": ["forward-variance", "variance-process", "martingale", "heath-jarrow-morton", "volatility-modeling", "variance-curve"], "note": "## Equation Variables\nThe forward variance process $\\xi_t$ describes the instantaneous variance at future times. The HJM-type dynamics ensure no-arbitrage and provide a flexible framework for volatility modeling.\n\n- **$\\xi_t$**: Forward variance at time $t$, defined as $\\xi_t = \\sigma_t^2$ (instantaneous variance).\n- **$\\nu_1, \\nu_2$**: Volatility loadings determining how forward variance responds to Brownian motions.\n- **$dW_t^1, dW_t^2$**: Standard Brownian motions under the risk-neutral measure.\n- **$t$**: Time (current time in the dynamics).\n\n## Interpretation\nForward variance is defined as $\\xi_t(u) = \\mathbb{E}[\\sigma_u^2 \\mid \\mathcal{F}_t]$ for $u \\ge t$. The dynamics specify how this expected future variance evolves:\n\n$$d\\xi_t(u) = \\xi_t(u) \\left( \\eta_1(u) dW_t^1 + \\eta_2(u) dW_t^2 \\right)$$\n\nThe drift is zero under the risk-neutral measure (martingale property). The structure:\n\n- **$\\nu_1$**: Controls the correlation between spot and variance (affects skew).\n- **$\\nu_2$**: Controls independent variance fluctuations (affects term structure).\n\nThis framework subsumes many popular models:\n- **Heston**: $\\nu_1 = -\\rho \\sqrt{\\xi_t}$, $\\nu_2 = \\sqrt{1-\\rho^2} \\sqrt{\\xi_t}$.\n- **GARCH**: Forward variance is deterministic under the physical measure.\n- **SABR**: Forward variance follows a log-normal process.\n\n## Assumptions\n- The forward variance curve is well-defined and arbitrage-free.\n- Brownian motions are defined under the risk-neutral measure.\n- The model is specified in a Markovian framework (typically).\n- Volatility loadings are deterministic functions of time.\n\n## Practical Use\nForward variance modeling is fundamental for:\n\n1. **Volatility Derivatives**: Pricing variance swaps, volatility swaps, and options on variance.\n2. **Term Structure**: Capturing how vol changes across expiries.\n3. **Model Arbitrage**: Ensuring no-arbitrage conditions are satisfied.\n4. **Calibration**: Fitting the entire volatility surface consistently.\n5. **Research**: Basis for advanced models like the 3/2 model, 4/2 model, and GJR models."}
{"title": "Term Structure of Volatility", "equation": "\\sigma^2(T) = \\frac{1}{T} \\int_0^T \\sigma_u^2 du", "category": "Volatility Models", "tags": ["term-structure", "average-volatility", "variance-curve", "forward-variance", "time-average", "volatility-extrapolation"], "note": "## Equation Variables\nThe term structure of volatility relates the average (integrated) variance over a period to the instantaneous variance dynamics. It provides the link between short-term and long-term volatility behavior.\n\n- **$\\sigma^2(T)$**: Average (integrated) variance from time 0 to $T$.\n- **$T$**: Time horizon (typically in years).\n- **$\\sigma_u^2$**: Instantaneous variance at time $u$.\n- **$\\int_0^T$**: Time integral accumulating variance over the period.\n\n## Interpretation\nThe term structure equation states that variance accumulated over time $T$ equals the time-average of instantaneous variance:\n\n$$\\sigma^2(T) = \\frac{1}{T} \\int_0^T \\sigma_u^2 du$$\n\nThis is the definition of **average variance** over the period. For comparison:\n- **Instantaneous variance**: $\\sigma_t^2$ at a specific point in time.\n- **Realized variance**: $\\sum r_i^2$ from observations over the period.\n- **Integrated variance**: $\\int_0^T \\sigma_u^2 du$, the theoretical limit of realized variance.\n\nThe term structure captures how volatility varies across different investment horizons:\n- **Upward sloping**: Volatility expected to increase over time.\n- **Downward sloping**: Volatility expected to decrease (mean reversion).\n- **Flat**: Constant volatility assumption (Black-Scholes).\n\n## Assumptions\n- The instantaneous variance process $\\sigma_t^2$ is well-defined.\n- Integration captures the full variance accumulation (no jumps).\n- The horizon $T$ is defined consistently across assets.\n- The variance process is integrable over the period.\n\n## Practical Use\nThe term structure of volatility is crucial for:\n\n1. **Option Pricing**: Longer-dated options should embed the term structure.\n2. **Volatility Trading**: VIX and variance swaps target specific term structure points.\n3. **Portfolio Construction**: Allocating across horizons based on expected vol.\n4. **Risk Management**: VaR and stress testing require vol at different horizons.\n5. **Model Calibration**: Matching the full volatility surface, not just ATM vol."}
{"title": "FX Forward Price", "equation": "F = S_0 \\frac{1 + r_{d} T}{1 + r_{f} T} = S_0 e^{(r_{d} - r_{f})T}", "category": "FX Derivatives", "tags": ["fx-forward", "covered-interest-parity", "forward-rate", "currency", "interest-rate-differential", "no-arbitrage", "synthetic-forward", "forward-premium"], "note": "## Equation Variables\nThe FX forward price represents the agreed-upon exchange rate for delivery of one currency for another at a future date, determined by no-arbitrage principles.\n\n- **$F$**: Forward exchange rate (units of domestic currency per unit of foreign currency at time $T$).\n- **$S_{0}$**: Spot exchange rate (current rate).\n- **$r_{d}$**: Domestic risk-free rate (continuously compounded or discrete).\n- **$r_{f}$**: Foreign risk-free rate (continuously compounded or discrete).\n- **$T$**: Time to delivery in years.\n\n## Interpretation\nCovered interest parity states that the forward rate must equal the spot rate adjusted for the interest rate differential between the two currencies. If $r_d > r_f$, the domestic currency trades at a forward discount; if $r_d < r_f$, it trades at a forward premium. This relationship eliminates arbitrage: a trader cannot earn excess returns by borrowing in one currency, converting at spot, investing in another, and hedging FX risk with a forward. The discrete and continuous formulations are equivalent when properly applied.\n\n## Assumptions\n- No transaction costs, bid-ask spreads, or capital controls exist.\n- Borrowing and lending occur at the same risk-free rate.\n- Perfect collateralization enables OIS discounting.\n- Continuous or discrete compounding is consistently applied.\n\n## Practical Use\nFX forwards are extensively used for hedging FX exposure in international trade and investments. Multinational corporations use them to lock in exchange rates for future receivables or payables. The forward points ($F - S_0$) reflect the cost of carry, which includes the interest rate differential. Deviations from CIP indicate funding pressures or credit risk; the cross-currency basis emerged significantly post-2008."}
{"title": "Covered Interest Rate Parity", "equation": "F = S_0 e^{(r_{d} - r_{f})T}", "category": "FX Derivatives", "tags": ["covered-interest-parity", "cip", "no-arbitrage", "interest-rate-parity", "forward-rate", "currency-arbitrage", "funding-costs", "cross-currency-basis"], "note": "## Equation Variables\nCovered Interest Rate Parity is the fundamental no-arbitrage condition linking spot and forward exchange rates.\n\n- **$F$**: Forward exchange rate (units of domestic per foreign currency).\n- **$S_{0}$**: Spot exchange rate.\n- **$r_{d}$**: Domestic risk-free rate (continuously compounded).\n- **$r_{f}$**: Foreign risk-free rate (continuously compounded).\n- **$T$**: Time to maturity.\n\n## Interpretation\nCIP states that the forward rate exactly offsets the interest rate differential between two currencies. When CIP holds, there is no arbitrage: borrowing domestic currency, buying foreign at spot, investing abroad, and selling forward yields zero profit. CIP is one of the most robust no-arbitrage relationships in financial economics, involving transactions in liquid markets. Post-2008, CIP deviations (cross-currency basis) emerged as important indicators of funding stress.\n\n## Assumptions\n- Perfect capital mobility without restrictions.\n- Zero transaction costs and perfect market liquidity.\n- Identical borrowing and lending rates (no credit spread).\n- Continuous compounding convention.\n\n## Practical Use\nCIP serves as the foundation for pricing all FX forward contracts. Traders use it to detect arbitrage when forward rates deviate from theory. The basis (deviation from CIP) indicates cross-currency funding conditions. Central banks monitor CIP deviations as a measure of market stress and financial fragmentation."}
{"title": "Uncovered Interest Rate Parity", "equation": "E[S_T] = S_0 e^{(r_{d} - r_{f})T}", "category": "FX Derivatives", "tags": ["uncovered-interest-parity", "uip", "exchange-rate-expectations", "interest-rate-differential", "currency-valuation", "rational-expectations", "forward-premium-puzzle", "macroeconomics"], "note": "## Equation Variables\nUncovered Interest Rate Parity extends covered parity to expectations about future spot rates.\n\n- **$E[S_T]$**: Expected future spot rate at time $T$.\n- **$S_{0}$**: Current spot exchange rate.\n- **$r_{d}$**: Domestic risk-free rate.\n- **$r_{f}$**: Foreign risk-free rate.\n- **$T$**: Time horizon.\n\n## Interpretation\nUIP states that expected spot rate changes offset the interest rate differential. If domestic rates exceed foreign rates ($r_d > r_f$), UIP predicts domestic currency depreciation by that differential. Unlike CIP, UIP is a behavioral hypothesis about expectation formation. Empirically, UIP performs poorly in short horizons—the \"forward premium puzzle\" shows higher-yielding currencies tend to appreciate, not depreciate.\n\n## Assumptions\n- Markets are efficient with all information incorporated.\n- No risk premium exists (or is constant).\n- Expectations are rational and unbiased.\n- The relationship holds in expectation, not point-in-time.\n\n## Practical Use\nUIP is used in macroeconomic models to explain exchange rate dynamics and as a benchmark for currency valuation. Central banks use UIP-based frameworks to assess over/undervaluation. Forecasting models use deviations from UIP to signal potential moves, though predictive power is limited by empirical failures."}
{"title": "Garman-Kohlhagen Call Price", "equation": "C = S_0 e^{-r_{f}T} N(d_1) - K e^{-r_{d}T} N(d_2)", "category": "FX Derivatives", "tags": ["garman-kohlhagen", "fx-options", "black-scholes-extension", "currency-options", "european-options", "two-interest-rates", "option-pricing", "implied-volatility"], "note": "## Equation Variables\nThe Garman-Kohlhagen model extends Black-Scholes to price currency options with two distinct interest rates.\n\n- **$C$**: Price of a European call option on FX rate.\n- **$S_{0}$**: Spot exchange rate (foreign per domestic).\n- **$K$**: Strike price.\n- **$r_{d}$**: Domestic risk-free rate.\n- **$r_{f}$**: Foreign risk-free rate.\n- **$T$**: Time to expiration.\n- **$N(x)$**: Cumulative standard normal distribution.\n- **$d_1, d_2$**: Intermediate calculations.\n\n## Interpretation\nGK treats the foreign currency as an asset paying continuous dividend yield $r_f$, while domestic rate represents financing cost. The call has two components: discounted expected payoff if ITM (first term) and PV of strike (second term). Foreign rate reduces growth of underlying value from domestic investor perspective. The model assumes lognormal exchange rate dynamics.\n\n## Assumptions\n- Exchange rate follows geometric Brownian motion with constant volatility.\n- Risk-free rates are constant throughout option life.\n- Markets are efficient with no transaction costs.\n- European exercise only.\n- No dividends on foreign currency.\n\n## Practical Use\nGK is the industry-standard model for European currency options. Banks, corporates, and institutions use it for FX hedging. The model forms the basis for FX option pricing systems and is calibrated to volatility surfaces for complex structures. Traders use GK to evaluate fair values and calculate Greeks."}
{"title": "Garman-Kohlhagen d1 d2 Parameters", "equation": "d_1 = \\frac{\\ln(S_0/K) + (r_{d} - r_{f} + \\sigma^2/2)T}{\\sigma \\sqrt{T}}, \\quad d_2 = d_1 - \\sigma \\sqrt{T}", "category": "FX Derivatives", "tags": ["garman-kohlhagen", "d1-d2", "black-scholes", "option-pricing", "currency-options", "log-moneyness", "volatility-adjustment", "probability-weighting"], "note": "## Equation Variables\nThese parameters determine option pricing and Greeks in the Garman-Kohlhagen framework.\n\n- **$S_{0}$**: Current spot exchange rate.\n- **$K$**: Strike price.\n- **$r_{d}$**: Domestic risk-free rate.\n- **$r_{f}$**: Foreign risk-free rate.\n- **$\\sigma$**: Annualized volatility of exchange rate.\n- **$T$**: Time to expiration.\n- **$\\ln$**: Natural logarithm.\n\n## Interpretation\n$d_1$ and $d_2$ are standardized distance measures determining probability-weighted payoff. The term $(r_d - r_f)$ captures the interest rate differential affecting forward rate and moneyness. The $\\sigma^2/2$ term adjusts for expected growth under risk-neutral measure. $\\ln(S_0/K)$ measures log-moneyness; $\\sigma\\sqrt{T}$ standardizes by uncertainty over remaining life. $d_2$ is the critical exercise threshold.\n\n## Assumptions\n- Lognormal distribution of exchange rates under risk-neutral measure.\n- Constant volatility (implied volatility from market prices).\n- Known, constant interest rates.\n- Geometric Brownian motion dynamics.\n\n## Practical Use\n$d_1$ and $d_2$ are essential for all GK pricing and Greeks. $d_1$ determines Delta directly, while $d_2$ affects probability weighting. Understanding these parameters helps traders interpret how volatility, time decay, and moneyness affect option values."}
{"title": "FX Delta Garman-Kohlhagen", "equation": "\\Delta_{call} = e^{-r_{f}T} N(d_1), \\quad \\Delta_{put} = e^{-r_{f}T} (N(d_1) - 1)", "category": "FX Derivatives", "tags": ["fx-delta", "greeks", "hedge-ratio", "garman-kohlhagen", "currency-options", "delta-hedging", "spot-sensitivity", "option-delta"], "note": "## Equation Variables\nDelta measures option price sensitivity to spot rate changes under Garman-Kohlhagen.\n\n- **$\\Delta$**: Option Delta (first derivative of price w.r.t. spot).\n- **$N(d_1)$**: Standard normal cumulative distribution at $d_1$.\n- **$r_{f}$**: Foreign risk-free rate.\n- **$T$**: Time to expiration.\n\n## Interpretation\nDelta ranges from 0 (deep OTM) to $e^{-r_f T}$ (deep ITM) for calls, and $-e^{-r_f T}$ to 0 for puts. Unlike equity options where max delta is 1.0, FX options have max $<1.0$ due to $e^{-r_f T}$ discount. Delta represents hedge ratio: units of foreign currency needed per option for neutrality. Market conventions differ from equities: FX traders quote delta by forward moneyness.\n\n## Assumptions\n- Garman-Kohlhagen model assumptions apply.\n- Delta calculated under current spot and volatility.\n- Static parameters between rebalancing.\n\n## Practical Use\nDelta is the most important Greek for FX option traders and risk managers. Used for hedging (delta-neutral strategies), position sizing, and directional exposure assessment. 25-delta risk reversals and butterflies are constructed using deltas at specific moneyness levels."}
{"title": "Currency Swaption Valuation", "equation": "V = P_{d}(0,T) [s N(d_1) - K N(d_2)]", "category": "FX Derivatives", "tags": ["currency-swaption", "swaption", "cross-currency-swap", "option-on-swap", "black-model-extension", "currency-option", "swap-option", "hedging-flexibility"], "note": "## Equation Variables\nA currency swaption gives the right to enter a cross-currency swap at a predetermined rate.\n\n- **$V$**: Value of the currency swaption.\n- **$P_{d}(0,T)$**: Domestic discount factor to maturity $T$.\n- **$s$**: Current spot exchange rate.\n- **$K$**: Strike rate of the swaption.\n- **$N(d_1), N(d_2)$**: Standard normal cumulative distributions.\n- **$d_1, d_2$**: Standard swaption parameters.\n\n## Interpretation\nThis represents a receiver swaption (right to receive foreign currency, pay domestic), valued as a call on the exchange rate. Payoff at expiration is $\\max(s - K, 0)$, the benefit of exchanging at favorable rates. Extends Black model to currency options where underlying is the exchange rate itself, not an interest rate.\n\n## Assumptions\n- European exercise only.\n- Constant volatility of exchange rates.\n- Deterministic interest rate curves for discounting.\n- No counterparty risk or credit spreads.\n\n## Practical Use\nCurrency swaptions hedge foreign currency debt service and international project financing. Provide flexibility that forwards cannot. Investment banks use them in structured products. Pricing requires volatility surfaces for exchange rates."}
{"title": "Basis Swap Present Value", "equation": "V = \\sum (L_1 - L_2 + basis) \\delta_i P_{d}(t_i) + N (P_{d}(T) - 1)", "category": "FX Derivatives", "tags": ["basis-swap", "present-value", "cross-currency", "interest-rate-swap", "pv-calculation", "swap-valuation", "notional-exchange", "floating-legs"], "note": "## Equation Variables\nA basis swap exchanges floating interest payments between currencies with a basis spread adjustment.\n\n- **$V$**: Present value of the basis swap.\n- **$L_1, L_2$**: Floating leg rates of each currency.\n- **$basis$**: Cross-currency basis spread.\n- **$\\delta_i$**: Day count fraction for period $i$.\n- **$P_{d}(t_i)$**: Domestic discount factor.\n- **$N$**: Notional amount.\n- **$T$**: Final maturity.\n\n## Interpretation\nPV discounts each net payment to valuation date. The spread adjustment reflects relative funding value of one currency versus another. Positive basis means receiver of foreign currency pays extra for scarcity. The formula shows value depends on rate spread, basis, and discount factors. Allows transforming currency composition while managing basis exposure.\n\n## Assumptions\n- No collateral postings affecting discount rates.\n- Deterministic interest rate curves.\n- Perfect collateralization with overnight rates.\n\n## Practical Use\nBasis swaps manage cross-currency funding positions for multinational banks and corporations. Investors use them to express views on relative currency funding. Valuation requires bootstrapping discount curves and incorporating basis spreads. Basis swap spreads quote the relative funding cost across currencies."}
{"title": "FX Vega", "equation": "Vega = S_0 \\sqrt{T} e^{-r_{f}T} N'(d_1)", "category": "FX Derivatives", "tags": ["fx-vega", "volatility-sensitivity", "greeks", "implied-volatility", "vega-trading", "option-sensitivity", "volatility-risk", "gamma-vega"], "note": "## Equation Variables\nVega measures option price sensitivity to changes in implied volatility.\n\n- **$Vega$**: Price change per 1% change in volatility.\n- **$S_{0}$**: Current spot exchange rate.\n- **$T$**: Time to expiration.\n- **$r_{f}$**: Foreign risk-free rate.\n- **$N'(d_1)$**: Standard normal PDF at $d_1$.\n\n## Interpretation\nVega is highest for ATM options and decreases for ITM/OTM options. Proportional to $\\sqrt{T}$, so longer-dated options are more volatility-sensitive. Foreign rate adjustment $e^{-r_f T}$ reflects present value. Long vega profits from volatility increases; short vega benefits from decreases. Time-dependent: vega concentrates in longer-dated options initially, decays as expiration approaches.\n\n## Assumptions\n- Only volatility changes (other parameters constant).\n- Parallel vol surface shifts across strikes.\n- No jump risk or stochastic volatility.\n\n## Practical Use\nTraders use vega for volatility exposure management. Volatility surfaces are calibrated across strikes/maturities. Delta-hedged strategies described by vega exposure (e.g., \"long 50,000 vega\"). Risk profiles are time-dependent with vega concentrated in longer-dated options."}
{"title": "Quanto Forward Price", "equation": "F_q = S_0 e^{(r_{d} - r_{f} - \\rho \\sigma_S \\sigma_q)T}", "category": "FX Derivatives", "tags": ["quanto", "forward-adjustment", "correlation-risk", "cross-asset", "composite-derivative", "currency-conversion", "payoff-adjustment", "correlation-drag"], "note": "## Equation Variables\nA quanto adjusts the standard forward for correlation between exchange rate and underlying asset.\n\n- **$F_q$**: Quanto-adjusted forward price.\n- **$S_{0}$**: Current spot exchange rate.\n- **$r_{d}, r_{f}$**: Domestic and foreign risk-free rates.\n- **$\\rho$**: Correlation between spot rate and underlying variable.\n- **$\\sigma_S$**: Volatility of spot exchange rate.\n- **$\\sigma_q$**: Volatility of foreign underlying.\n- **$T$**: Time to maturity.\n\n## Interpretation\nThe correlation adjustment $\\rho \\sigma_S \\sigma_q$ represents covariance drag from stochastic exchange rate. Positive correlation reduces forward (favorable asset performance coincides with stronger currency, reducing domestic payoff). Negative correlation increases forward (favorable performance with currency depreciation increases domestic value).\n\n## Assumptions\n- Constant correlations over option life.\n- Joint lognormal distribution of asset returns and exchange rates.\n- No stochastic volatility or jumps.\n\n## Practical Use\nQuantos provide emerging market exposure without currency risk (e.g., Nikkei quanto swap). Examples include commodity quanto options. Correlation is crucial and often hedged with correlation swaps. Pricing requires sophisticated models incorporating correlation risk."}
{"title": "Composite Exchange Option", "equation": "V = S_0 e^{-r_{f}T} N(d_1) - K e^{-r_{d}T} N(d_2) - S_0^* e^{-r_{f}^* T} N(e_1) + K e^{-r_{d}^* T} N(e_2)", "category": "FX Derivatives", "tags": ["composite-option", "currency-pair-option", "exchange-option", "cross-currency", "option-composition", "currency-choice", "optionality", "multi-currency"], "note": "## Equation Variables\nA composite exchange option gives the right to exchange one currency pair for another at a fixed rate.\n\n- **$V$**: Value of composite exchange option.\n- **$S_0, S_0^*$**: Spot rates of two currency pairs.\n- **$K$**: Strike rate.\n- **$r_d, r_d^*$**: Domestic rates for each pair.\n- **$r_f, r_f^*$**: Foreign rates for each pair.\n- **$d_1, d_2, e_1, e_2$**: Normal parameters for each option.\n\n## Interpretation\nEquivalent to holding a call on one currency and a put on another, with strike adjustment. Value is the difference between receiving currency A at favorable rate versus currency B. Captures optionality of switching between currency pairs based on relative performance.\n\n## Assumptions\n- Two independent currency pairs follow lognormal diffusion.\n- No correlation effects between pairs.\n- European exercise only.\n\n## Practical Use\nUsed in cross-currency hedging and structured products offering currency flexibility. Relevant for institutions managing multi-currency exposures who want optionality in allocations. Pricing requires volatilities for both pairs and their correlation."}
{"title": "FX Risk Reversal", "equation": "RR = \\Delta_{call} - \\Delta_{put}", "category": "FX Derivatives", "tags": ["fx-risk-reversal", "volatility-skew", "directional-bias", "implied-volatility-surface", "market-sentiment", "smile-skew", "25-delta", "10-delta"], "note": "## Equation Variables\nRisk reversal captures the difference between out-of-the-money call and put implied volatilities.\n\n- **$RR$**: Risk reversal value (volatility points).\n- **$\\Delta_{call}$**: Delta of OTM call (e.g., 25-delta).\n- **$\\Delta_{put}$**: Delta of OTM put (e.g., 25-delta).\n\n## Interpretation\nPositive RR means calls have higher IV than puts: market expects upward moves or demands call protection. Negative RR indicates opposite skew. Risk reversal reflects directional expectations and supply/demand for option protection. Strongly positive EUR/USD RR suggests euro appreciation expectations.\n\n## Assumptions\n- Consistent delta conventions.\n- Volatility surface is arbitrage-free.\n- Quotes represent market consensus.\n\n## Practical Use\nTraded directly in FX options markets for trading, hedging, and analysis. Traders position based on mispricing relative to expectations. Input for volatility surface construction. Monitored as market sentiment indicator across currency pairs."}
{"title": "FX Butterfly Spread", "equation": "BF = (\\Delta_{call} + \\Delta_{put} - 2 \\Delta_{atm}) / 2", "category": "FX Derivatives", "tags": ["fx-butterfly", "volatility-smile", "curvature", "tail-risk", "volatility-surface", "smile-curvature", "butterfly-spread", "distribution-skewness"], "note": "## Equation Variables\nButterfly measures the curvature of implied volatility across strikes.\n\n- **$BF$**: Butterfly spread value (volatility points).\n- **$\\Delta_{call}$**: Delta of OTM call option.\n- **$\\Delta_{put}$**: Delta of OTM put option.\n- **$\\Delta_{atm}$**: Delta of ATM option (50-delta).\n\n## Interpretation\nBF represents average OTM volatility minus ATM volatility, normalized by distance from ATM. Positive BF indicates OTM options have higher IV than ATM: volatility \"smile\" or \"smirk.\" Captures extra premium for tail risk protection. Related to distribution skewness: positive BF means fatter tails than lognormal.\n\n## Assumptions\n- Smooth, arbitrage-free volatility surface.\n- Consistent delta conventions.\n- Quotes represent market prices for the spread.\n\n## Practical Use\nTraded as volatility products by traders with views on surface shape. Input for volatility surface construction and exotic pricing. Monitors tail risk pricing across currency pairs."}
{"title": "FX Strangle", "equation": "ST = \\Delta_{call,out} + \\Delta_{put,out}", "category": "FX Derivatives", "tags": ["fx-strangle", "out-of-money-options", "volatility-strategy", "tail-risk-hedging", "strangle-spread", "directional-neutral", "volatility-trading", "25-delta-strangle"], "note": "## Equation Variables\nStrangle combines OTM call and put at the same delta level.\n\n- **$ST$**: Strangle value (volatility points).\n- **$\\Delta_{call,out}$**: Delta of OTM call.\n- **$\\Delta_{put,out}$**: Delta of OTM put.\n\n## Interpretation\nStrangle measures overall OTM volatility level, capturing cost of protection against large bidirectional moves. Directionally neutral at initiation. High strangle values indicate expensive tail protection. Cheaper than straddles but requires larger moves to profit. Captures market uncertainty and tail risk pricing.\n\n## Assumptions\n- Symmetric delta levels for wings.\n- Volatility surface is arbitrage-free.\n- Quotes reflect current market prices.\n\n## Practical Use\nUsed in volatility trading when large moves expected but direction is uncertain. Cost-efficient alternative to straddles. Monitored as uncertainty indicator and tail risk measure. In portfolio hedging, strangles may be preferred for cost efficiency."}
{"title": "Forward Premium", "equation": "FP = \\frac{F - S_0}{S_0} = (r_{d} - r_{f}) T", "category": "FX Derivatives", "tags": ["forward-premium", "forward-discount", "interest-rate-differential", "carry-trade", "forward-points", "currency-return", "hedging-cost", "forward-rate-bias"], "note": "## Equation Variables\nForward premium measures the percentage deviation of forward from spot rate.\n\n- **$FP$**: Forward premium (decimal or percentage).\n- **$F$**: Forward exchange rate.\n- **$S_{0}$**: Spot exchange rate.\n- **$r_{d}$**: Domestic risk-free rate.\n- **$r_{f}$**: Foreign risk-free rate.\n- **$T$**: Time to delivery.\n\n## Interpretation\nPositive FP means domestic currency trades at forward premium (forward > spot), occurring when $r_d > r_f$. Approximately equals interest rate differential times time. Often confused with expected appreciation; related only through UIP. Empirically, high-premium currencies tend to depreciate (forward premium puzzle).\n\n## Assumptions\n- Covered interest parity holds.\n- Interest rates are known and constant.\n- Compounding consistently applied.\n\n## Practical Use\nCalculated by traders to assess hedging costs over time. Used in international investment performance attribution. Forward points quoted in basis points (e.g., \"100 points forward premium\"). Helps corporations evaluate hedging strategies and timing decisions."}
{"title": "FX Duration", "equation": "D_{FX} = - \\frac{1}{F} \\frac{\\partial F}{\\partial r_{d}}", "category": "FX Derivatives", "tags": ["fx-duration", "interest-rate-sensitivity", "duration-analysis", "forward-sensitivity", "rate-risk", "interest-rate-exposure", "duration-hedging", "key-rate-duration"], "note": "## Equation Variables\nFX duration measures sensitivity of forward rate to interest rate changes.\n\n- **$D_{FX}$**: FX duration.\n- **$F$**: Forward exchange rate.\n- **$r_{d}$**: Domestic risk-free rate.\n\n## Interpretation\nDuration shows proportional forward rate change per unit interest rate change. Negative sign indicates rate increase causes forward decrease (domestic appreciation). For standard forward, duration equals time to maturity $T$, reflecting compounding effect. Longer-dated forwards have higher duration, more sensitive to rate changes.\n\n## Assumptions\n- Foreign rate remains constant.\n- Rate changes are parallel shifts.\n- No convexity adjustment.\n\n## Practical Use\nUsed in asset-liability management for multi-currency exposures. Quantifies sensitivity of forwards to rate movements and informs hedging. Duration-based hedging more efficient than notional matching for long-dated derivatives. Portfolio managers use FX duration to manage interest rate component of currency returns."}
{"title": "Local Currency Pricing Measure", "equation": "V_{local} = E^{Q^{local}} \\left[ e^{-\\int r_{f} ds} V_T \\right]", "category": "FX Derivatives", "tags": ["pricing-measure", "foreign-numeraire", "risk-neutral-measure", "martingale-measure", "currency-pricing", "expectation-pricing", "discount-factor", "measure-change"], "note": "## Equation Variables\nThis defines pricing under the foreign currency measure for derivatives.\n\n- **$V_{local}$**: Value in local currency measure.\n- **$E^{Q^{local}}$**: Expectation under local measure.\n- **$\\int r_{f} ds$**: Integral of foreign rate over time.\n- **$e^{-\\int r_{f} ds}$**: Stochastic discount factor (foreign money market).\n- **$V_T$**: Payoff at terminal time.\n\n## Interpretation\nForeign currency pays continuous dividend yield $r_f$, analogous to equity dividends. Expectation under foreign money market numeraire changes exchange rate drift. From domestic perspective, holding foreign currency foregoes $r_d$ but earns $r_f$, creating cost of carry $(r_d - r_f)$. This justifies Garman-Kohlhagen and extends to path-dependent options.\n\n## Assumptions\n- Foreign rate is stochastic but adapted.\n- Markets are complete under chosen measure.\n- Discount factor uses appropriate money market account.\n\n## Practical Use\nFundamental to all currency derivative pricing. Justifies Garman-Kohlhagen and extends to barrier, Asian, and lookback options. Path-dependent option pricing by transforming expectation under appropriate measure. Connects to quanto pricing and cross-currency structures with multiple measures."}
{"title": "Futures Price (Cost of Carry)", "equation": "F = S_0 e^{(r + u - y)T}", "category": "Commodity Derivatives", "tags": ["futures", "cost-of-carry", "convenience-yield", "storage-cost", "forward-curve", "contango", "backwardation", "no-arbitrage", "spot-price", "pricing"], "note": "## Equation Variables\nThe futures price for a commodity reflects the spot price adjusted for the cost of carry, which includes financing costs, storage, and the convenience yield from holding the physical commodity.\n\n- **$F$**: Futures price for delivery at time $T$.\n- **$S_{0}$**: Current spot price of the commodity.\n- **$r$**: Risk-free interest rate (cost of financing).\n- **$u$**: Storage cost as a proportion of spot price per unit time.\n- **$y$**: Convenience yield (benefit from physically holding the commodity).\n- **$T$**: Time to delivery in years.\n\n## Interpretation\nThe cost-of-carry model generalizes the covered interest parity to commodities. The futures price exceeds the spot price when the cost of carry ($r + u$) exceeds the convenience yield ($y$), creating contango. When $y > r + u$, the futures price is below spot (backwardation), reflecting the premium for immediate access to the commodity. For energy commodities with limited storage, this relationship is dynamic and can shift rapidly based on inventory levels and supply disruptions. The exponential form reflects continuous compounding conventions common in derivatives pricing.\n\n## Assumptions\n- Perfect correlation between spot and futures price movements\n- No transaction costs, bid-ask spreads, or delivery frictions\n- Ability to store the commodity and borrow at known rates\n- Constant convenience yield (may be state-dependent in practice)\n- No credit risk or counterparty default considerations\n- Continuous trading and instantaneous arbitrage execution\n\n## Practical Use\nCost-of-carry models are fundamental for futures valuation, calendar spread pricing, and identifying arbitrage opportunities. Traders use deviations from this relationship to construct trading strategies. In practice, convenience yield varies with inventory levels, seasonal demand patterns, and market conditions. The model underpins the theory of optimal storage (Hotelling's rule) and explains the shape of the forward curve across different maturities. Energy traders particularly focus on the cost-of-carry relationship for crude oil, natural gas, and refined products."}
{"title": "Futures Price with Discrete Storage Costs", "equation": "F = (S_0 + U)e^{rT} - V", "category": "Commodity Derivatives", "tags": ["futures", "storage-cost", "discrete-carry", "convenience-yield", "forward-curve", "no-arbitrage", "cash-and-carry", "arbitrage-pricing"], "note": "## Equation Variables\nThis formulation of futures pricing accounts for explicit storage costs and convenience benefits over discrete time periods, providing a more practical framework for commodities with substantial storage requirements.\n\n- **$F$**: Futures price for delivery at time $T$.\n- **$S_{0}$**: Current spot price of the commodity.\n- **$U$**: Present value of total storage costs over the holding period.\n- **$V$**: Present value of convenience benefits or scrap value.\n- **$r$**: Risk-free interest rate.\n- **$T$**: Time to delivery in years.\n\n## Interpretation\nThis model extends the continuous-time cost-of-carry formula to handle explicit storage costs and benefits. The futures price equals the future value of the spot price plus storage costs, minus any convenience benefits or residual value. For physical traders, storage costs ($U$) include warehousing, insurance, and handling fees, while convenience yield ($V$) represents the economic benefit of having physical inventory available. The relationship is fundamental to cash-and-carry arbitrage, where traders buy spot, store, and deliver against futures contracts. The arbitrage bounds established by this model define trading opportunities and price relationships across the forward curve.\n\n## Assumptions\n- Storage costs are known and deterministic\n- Convenience benefits can be quantified and valued\n- No restrictions on physical storage capacity\n- Perfect hedge ratio between spot and futures positions\n- Continuous monitoring and rebalancing capability\n- No quality degradation or spoilage during storage\n\n## Practical Use\nThis formulation is particularly valuable for commodities with significant storage infrastructure requirements, such as crude oil, refined products, and agricultural goods. Trading desks use it to evaluate the economics of physical storage (contango plays) and to identify mispriced futures contracts. The model informs decisions about tank farms, pipeline capacity, and inventory management. For agricultural commodities, it incorporates storage seasonability and helps determine optimal release strategies from strategic petroleum reserves or grain elevators."}
{"title": "Implicit Convenience Yield Calculation", "equation": "y = r + u - \\frac{1}{T} \\ln\\left(\\frac{F}{S_0}\\right)", "category": "Commodity Derivatives", "tags": ["convenience-yield", "implied-yield", "futures", "spot-price", "inventory-premium", "backwardation", "contango", "market-structure", "arbitrage"], "note": "## Equation Variables\nThe implicit convenience yield is derived from observed market prices, providing insight into the market's assessment of the value of holding physical commodity inventory.\n\n- **$y$**: Implicit convenience yield (annualized continuous rate).\n- **$r$**: Risk-free interest rate.\n- **$u$**: Storage cost as proportion of spot price.\n- **$F$**: Observed futures price.\n- **$S_{0}$**: Current spot price.\n- **$T$**: Time to futures delivery.\n\n## Interpretation\nThe convenience yield captures the economic benefit of physically possessing a commodity, including supply security, production flexibility, and processing optionality. High convenience yields indicate strong immediate demand for physical access relative to future availability, often occurring during supply disruptions or inventory drawdowns. The formula rearranges the cost-of-carry relationship to solve for the implied yield given observed market prices. When futures trade at a discount to spot ($F < S_0$), the implied convenience yield exceeds the sum of financing and storage costs, signaling backwardation. This metric is closely monitored by market participants as a leading indicator of supply-demand tightness and inventory levels.\n\n## Assumptions\n- Observed futures and spot prices reflect market equilibrium\n- Storage costs are known and constant over the period\n- No market frictions or transaction costs\n- Interest rates are constant or appropriately term-structured\n- Futures prices are for standard delivery specifications\n\n## Practical Use\nConvenience yield estimation is critical for physical traders, risk managers, and quantitative analysts. It serves as an input for inventory optimization models, production planning, and storage valuation. Trading strategies often involve taking positions based on expected changes in convenience yield, such as buying physical inventory when implied yields suggest undervaluation. Energy companies use implied convenience yields to evaluate the economics of holding inventory versus selling forward. The metric also helps identify structural market regime changes, such as the transition from contango to backwardation during supply crises."}
{"title": "Calendar Spread Value", "equation": "V_{spread} = (F_1 - F_2) = e^{-rT_2} \\left(S_0 e^{-y_1 T_1} - S_0 e^{-y_2 T_2}\\right)", "category": "Commodity Derivatives", "tags": ["calendar-spread", "spread-trading", "time-spread", "futures", "seasonality", "roll-yield", "forward-curve", "inter-temporal-arbitrage"], "note": "## Equation Variables\nCalendar spreads (also called time spreads or horizontal spreads) capture the price difference between futures contracts with different delivery dates, reflecting the cost of carry across time.\n\n- **$V_{spread}$**: Value of the calendar spread (long near-month, short far-month).\n- **$F_1$**: Futures price for near-term delivery at $T_1$.\n- **$F_2$**: Futures price for far-term delivery at $T_2$.\n- **$S_0$**: Current spot price.\n- **$y_1$**: Convenience yield applicable to near-term period.\n- **$y_2$**: Convenience yield applicable to far-term period.\n- **$r$**: Risk-free interest rate.\n- **$T_1, T_2$**: Times to delivery for the two contracts ($T_1 < T_2$).\n\n## Interpretation\nCalendar spreads isolate the time value component of futures pricing by offsetting spot price exposure. The spread value reflects the differential cost of carry between two time periods, incorporating potential changes in convenience yield, storage costs, and interest rates. In energy markets, calendar spreads often exhibit seasonal patterns reflecting storage requirements, demand cycles, and production constraints. A narrowing calendar spread (bullish spread) may indicate improving supply-demand conditions for near-term delivery, while widening spreads suggest near-term supply stress. The spread captures market expectations about future convenience yields and inventory trajectories.\n\n## Assumptions\n- Constant interest rate across both periods\n- Convenience yields may differ by period but are deterministic\n- No delivery option value or quality specifications\n- Perfect correlation between spot prices at both maturities\n- Sufficient liquidity for both contract months\n\n## Practical Use\nCalendar spreads are among the most liquid and widely traded energy derivatives, offering lower margin requirements and reduced directional exposure compared to outright futures positions. Traders use calendar spreads to express views on the term structure of commodity prices without taking spot risk. Seasonal trading strategies involve rolling calendar spreads to capture the seasonal storage arbitrage. Energy producers use calendar spreads to hedge production timing uncertainty, while consumers hedge future procurement costs. The spread's sensitivity to inventory data and supply disruptions makes it a key indicator for market structure analysis."}
{"title": "Futures Forward Spread Pricing", "equation": "Spread = F_1 - F_2", "category": "Commodity Derivatives", "tags": ["forward-spread", "spread-trading", "futures-curve", "inter-commodity-spread", "basis-trading", "seasonality", "price-relationship", "trading-strategy"], "note": "## Equation Variables\nThe forward spread represents the pure price differential between two futures contracts, serving as the fundamental building block for spread trading strategies in commodity markets.\n\n- **$Spread$**: Price difference between two futures contracts.\n- **$F_1$**: Price of the first futures contract (typically the lead month).\n- **$F_2$**: Price of the second futures contract (typically the following month).\n\n## Interpretation\nThe forward spread captures the market's assessment of the cost of carry between two delivery periods. Unlike calendar spreads based on the same underlying commodity, inter-commodity spreads compare related but distinct commodities (such as crude oil vs. gasoline). The spread filters out common price movements driven by macroeconomic factors, isolating the relative value between the two instruments. In contango markets, the spread is typically positive (near-month cheaper than far-month), while in backwardation, the spread may be negative or small. The spread's evolution over time provides insight into changing market structure, storage economics, and supply-demand dynamics.\n\n## Assumptions\n- Both contracts share the same underlying delivery specifications\n- Sufficient liquidity for accurate price observation\n- No delivery option value differential between contracts\n- Normal market conditions without extreme dislocations\n\n## Practical Use\nSpread trading is fundamental to commodity markets, offering reduced volatility and directional risk while maintaining exposure to relative value opportunities. Traders distinguish between intra-commodity spreads (same commodity, different maturities) and inter-commodity spreads (related commodities). The spread's historical relationship provides mean-reversion trading signals, while fundamental analysis identifies structural changes in the spread relationship. Energy traders closely monitor crack spread, spark spread, and other processing spreads that capture refining and generation margins. Spread orders constitute a significant portion of exchange volume, particularly in crude oil and natural gas markets."}
{"title": "Spread Option Pricing (Kirk's Approximation)", "equation": "V \\approx C(F_1, K^*, \\sigma_{spread}) \\quad \\text{where} \\quad K^* = K e^{-(r + u_2)T_2}", "category": "Commodity Derivatives", "tags": ["spread-option", "kirk-approximation", "options-pricing", "correlation-adjustment", "margin-spread", "exchange-option", "compound-option"], "note": "## Equation Variables\nKirk's approximation provides a computationally efficient method for pricing spread options on two futures contracts, adjusting for the correlation between underlying assets.\n\n- **$V$**: Value of the spread option.\n- **$C$**: Standard Black's call option pricing function.\n- **$F_1$**: Futures price of the first underlying.\n- **$K^*$**: Adjusted strike price incorporating carry costs.\n- **$K$**: Original strike price (spread level).\n- **$F_2$**: Futures price of the second underlying.\n- **$r$**: Risk-free interest rate.\n- **$u_2$**: Storage cost for the second underlying.\n- **$T$**: Time to option expiration.\n- **$\\sigma_{spread}$**: Effective volatility of the spread.\n\n## Interpretation\nSpread options provide the right to realize a positive difference between two commodity prices, offering exposure to relative value movements while limiting downside risk. Kirk's approximation extends Black's model to the spread context by adjusting the strike and volatility to account for the correlation between the two underlying futures. The approximation works well when the correlation between assets is not extreme and when the at-the-money assumption holds approximately. The effective spread volatility combines the individual volatilities and correlation: $\\sigma_{spread} = \\sqrt{\\sigma_1^2 + \\sigma_2^2 - 2\\rho\\sigma_1\\sigma_2}$. This formulation allows traders to price options on crack spreads, spark spreads, and other processing margins common in energy markets.\n\n## Assumptions\n- Log-normal distribution of underlying futures prices\n- Constant correlation between the two underlying prices\n- No early exercise (European-style option)\n- Known and constant volatilities\n- No dividends or convenience yields (or included in futures pricing)\n\n## Practical Use\nSpread options are extensively used in energy markets to hedge processing margins, storage economics, and time value differences. Refiners use crack spread options to protect refining margins against crude oil and product price movements. Power generators purchase spark spread options to hedge the margin between electricity and natural gas prices. The Kirk approximation provides quick pricing for market-making and risk management purposes, though more complex models (such as multidimensional trees or Monte Carlo simulation) may be used for exact pricing of long-dated or highly correlated spreads. Trading desks use spread options to express views on the relative strength of different energy markets."}
{"title": "Black's Spread Option Model", "equation": "V = e^{-rT} \\left[ F_1 N(d_1) - F_2 N(d_2) \\right]", "category": "Commodity Derivatives", "tags": ["black-model", "spread-option", "futures-options", "bivariate-lognormal", "exchange-option", "margining-option", "energy-derivatives"], "note": "## Equation Variables\nBlack's spread option model extends the standard Black option pricing framework to options on the spread between two futures contracts, providing a closed-form solution for exchange options.\n\n- **$V$**: Present value of the spread option.\n- **$F_1$**: Futures price of the first underlying (long position).\n- **$F_2$**: Futures price of the second underlying (short position).\n- **$r$**: Risk-free interest rate.\n- **$T$**: Time to option expiration.\n- **$K$**: Strike price (triggering spread level).\n- **$N(d_1), N(d_2)$**: Standard normal cumulative distribution functions.\n- **$d_1 = \\frac{\\ln(F_1/F_2) + \\frac{1}{2}\\sigma^2 T}{\\sigma\\sqrt{T}}$**\n- **$d_2 = d_1 - \\sigma\\sqrt{T}$**\n- **$\\sigma$**: Volatility of the spread.\n\n## Interpretation\nBlack's spread option model prices options that pay off the positive difference between two futures prices at expiration. This formulation captures the exchange option nature of spread options, where the holder chooses between receiving one asset versus another. The model assumes bivariate log-normal distribution of the underlying futures prices, which implies that the spread itself follows a distribution that can be approximated. The key insight is that the spread option's value depends on the ratio of futures prices rather than their absolute levels, analogous to currency options. The correlation between underlying assets affects the spread's volatility and thus the option value.\n\n## Assumptions\n- Futures prices follow log-normal distributions\n- Constant volatility of the spread\n- No dividends or convenience yields during option life\n- European exercise style\n- Risk-neutral valuation applies\n- Correlation between assets is constant and captured in spread volatility\n\n## Practical Use\nBlack's spread option model is fundamental for pricing energy crack spread options, spark spread options, and other processing margin derivatives. The model enables market makers to provide quotes for these complex products and allows risk managers to hedge margin exposure. Energy companies use spread options to lock in processing margins while retaining upside participation. The model's simplicity makes it suitable for real-time pricing systems and margin calculations. However, for long-dated options or extreme correlation scenarios, more sophisticated approaches like Monte Carlo simulation with stochastic convenience yields may be necessary. The spread option framework also extends to weather derivatives and multi-commodity optimization problems."}
{"title": "Crack Spread (3:2:1 Ratio)", "equation": "CrackSpread = 3P_{gasoline} - 2P_{crude} - P_{heating-oil}", "category": "Commodity Derivatives", "tags": ["crack-spread", "refining-margin", "3-2-1-spread", "refinery-optimization", "product-spread", "hydrocarbon-processing", "petroleum-refining", "margin-hedge"], "note": "## Equation Variables\nThe 3:2:1 crack spread is the most common refinery margin metric, representing the theoretical profit from processing one barrel of crude oil into three barrels of gasoline and two barrels of other products (accounting for the 2:1 output ratio).\n\n- **$CrackSpread$**: Theoretical refining margin per barrel of crude processed.\n- **$P_{gasoline}$**: Price of gasoline (often RBOB or conventional blendstock).\n- **$P_{crude}$**: Price of crude oil (often WTI or Brent).\n- **$P_{heating-oil}$**: Price of heating oil or diesel (light-heavy differential).\n- **$3$**: Gallons of gasoline produced per barrel (represents 42 gallons total output).\n- **$2$**: Weighting factor balancing gasoline and distillate output.\n\n## Interpretation\nThe crack spread captures the value added by the refining process, representing the gross margin available to convert crude oil into finished products. A positive crack spread indicates that product revenues exceed crude costs, while a negative spread signals margin compression or loss. The 3:2:1 ratio reflects typical U.S. refinery configuration optimized for gasoline production, though actual refiners may have different yield configurations. The spread is monitored daily by traders, investors, and energy analysts as a leading indicator of refinery profitability and crude oil demand strength. Seasonal patterns in the crack spread reflect demand cycles for transportation fuels and seasonal gasoline specifications.\n\n## Assumptions\n- Fixed yield assumptions (3:2:1 ratio approximates actual refinery output)\n- Product prices reflect current market values\n- No operating costs beyond crude acquisition (simplified margin)\n- Refinery can sell all products at quoted prices\n- Standardized product specifications (RBOB, ULSD)\n\n## Practical Use\nThe crack spread is the most actively traded energy spread, with exchange-traded crack spread futures available on major exchanges. Refiners use crack spread hedges to lock in margins by selling crude oil forward and buying products forward (or using crack spread futures directly). The spread's historical volatility provides risk management parameters for margin-at-risk calculations. Quantitative trading strategies exploit crack spread mean reversion and seasonal patterns. The crack spread also serves as an economic indicator, with widening spreads suggesting strong product demand or crude oversupply, while narrowing spreads indicate product oversupply or crude shortage."}
{"title": "Spark Spread", "equation": "SparkSpread = P_{power} - HHV \\times P_{gas}", "category": "Commodity Derivatives", "tags": ["spark-spread", "power-generation-margin", "heat-rate", "electricity-pricing", "gas-fired-generation", "marginal-cost", "fuel-arbitrage", "generation-hedge"], "note": "## Equation Variables\nThe spark spread represents the theoretical margin available to a natural gas-fired power plant, calculated as the difference between electricity price and the cost of fuel required to generate one unit of power.\n\n- **$SparkSpread$**: Gross margin for gas-fired generation ($/MWh).\n- **$P_{power}$**: Electricity price ($/MWh).\n- **$HHV$**: Higher heating value of natural gas (typically 1,027-1,035 BTU/scf).\n- **$P_{gas}$**: Natural gas price ($/MMBtu).\n- **$HeatRate$**: Heat rate in BTU/kWh (gas plants typically 7,000-12,000 BTU/kWh).\n\n## Interpretation\nThe spark spread captures the economic viability of gas-fired power generation, representing the margin available to cover fixed costs (capital, operations, maintenance) and provide profit. When spark spreads are positive, gas-fired generation is economically dispatched and generators earn margin; when negative, generators prefer not to run and may seek alternative arrangements. The spark spread is fundamental to electricity market economics, as gas-fired plants often set the marginal price in many power markets. The heat rate conversion ($1,000 \\text{ BTU/kWh} = 1 \\text{ MMBtu/MWh}$) allows direct comparison between fuel costs and power prices. Seasonal patterns reflect varying demand for both electricity and gas.\n\n## Assumptions\n- Constant heat rate efficiency for the generating unit\n- No start-up costs or minimum load constraints\n- Perfect market liquiditity for power and gas\n- No capacity payments or ancillary service revenue\n- Standardized BTU content for gas pricing\n\n## Practical Use\nSpark spread options and futures are among the most liquid power market derivatives, allowing generators to hedge generation margins and electricity consumers to manage procurement costs. Power plant valuations heavily depend on expected spark spreads over the asset's lifetime. The spark spread drives investment decisions in new generation capacity and retirement decisions for existing plants. In merit-order dispatch systems, the spark spread determines which generators operate and when. Trading strategies include spark spread arbitrage, spark spread correlation trading with other energy markets, and spark spread seasonal positioning based on weather and demand forecasts."}
{"title": "Clean Spark Spread", "equation": "CSS = P_{power} - (HHV \\times P_{gas}) - Costs_{emission}", "category": "Commodity Derivatives", "tags": ["clean-spark-spread", "emissions-cost", "carbon-pricing", "environmental-margin", "generation-economics", "sustainability-hedge", "compliance-cost", "green-premium"], "note": "## Equation Variables\nThe clean spark spread extends the standard spark spread to include carbon emission costs, providing a more accurate representation of the true margin available to gas-fired generation in carbon-constrained markets.\n\n- **$CSS$**: Clean spark spread ($/MWh).\n- **$P_{power}$**: Electricity price ($/MWh).\n- **$HHV$**: Higher heating value of natural gas (BTU/scf).\n- **$P_{gas}$**: Natural gas price ($/MMBtu).\n- **$Costs_{emission}$**: Carbon emission costs ($/MWh) = EmissionsRate × CarbonPrice.\n- **$EmissionsRate$**: CO2 emissions per MWh (typically 0.4-0.5 tons CO2/MWh for gas).\n- **$CarbonPrice$**: Price per ton of CO2 under cap-and-trade or carbon tax.\n\n## Interpretation\nThe clean spark spread adjusts the gross generation margin for carbon emission costs, reflecting the true economics of fossil fuel generation in markets with carbon pricing. Gas-fired generation produces approximately 0.4-0.5 tons of CO2 per MWh, so carbon prices significantly impact generation economics. The clean spark spread determines which generators are economically dispatched in carbon-constrained markets and affects investment in renewable generation. A positive clean spark spread indicates profitable operation even after accounting for carbon costs, while a negative spread may lead to reduced generation or fuel switching. The metric is increasingly important as carbon pricing mechanisms expand globally.\n\n## Assumptions\n- Known and constant carbon price (or appropriately hedged)\n- Fixed emission rate based on fuel chemistry\n- Carbon costs are fully passed through in market pricing\n- No carbon leakage or border adjustment effects\n- Standardized emissions accounting methodology\n\n## Practical Use\nClean spark spread analysis is essential for power market participants operating in carbon-constrained regions such as the European Union (EU ETS), California (Cap-and-Trade), and increasingly in other jurisdictions. Generation companies use clean spark spread hedges to lock in carbon-adjusted margins. Investment decisions in new generation capacity now require clean spark spread projections over multi-decade asset lifetimes. Carbon allowance prices directly impact clean spark spreads and thus the economics of gas versus coal and renewable generation. The clean spark spread also affects power purchase agreement negotiations and corporate renewable energy procurement strategies."}
{"title": "Schwartz One-Factor Model", "equation": "d\\ln S_t = \\kappa(\\theta - \\ln S_t)dt + \\sigma dW_t", "category": "Commodity Derivatives", "tags": ["schwartz-model", "log-normal-mean-reversion", "stochastic-spot-price", "commodity-price-model", "one-factor", "fundamental-value", "risk-premium", "forward-curve-dynamics"], "note": "## Equation Variables\nThe Schwartz one-factor model extends the Ornstein-Uhlenbeck framework to log-prices, combining mean-reversion with log-normal dynamics to capture the proportional relationship between price shocks and price levels.\n\n- **$S_t$**: Commodity spot price at time $t$.\n- **$\\kappa$**: Mean-reversion speed in log-space.\n- **$\\theta$**: Long-run mean of log-price (log of fundamental value).\n- **$\\sigma$**: Volatility of log-returns.\n- **$\\ln S_t$**: Natural logarithm of spot price.\n- **$dW_t$**: Wiener process increment.\n\n## Interpretation\nThe Schwartz model addresses a key limitation of the standard OU model: the proportional relationship between price shocks and price levels. In log-space, the model captures the observation that percentage changes are more constant than absolute changes across different price levels. The log-price follows an OU process, which implies that prices follow a log-normal distribution in levels. The model captures the long-run equilibrium where prices revert to a fundamental value determined by marginal production costs, demand elasticity, and available resources. The risk-neutral dynamics incorporate a risk premium that compensates investors for holding commodity exposure. This model is widely used for commodity derivatives pricing and serves as the foundation for more complex multi-factor extensions.\n\n## Assumptions\n- Log-prices follow mean-reverting dynamics\n- Risk-adjusted drift is known and constant\n- Volatility is constant and proportional to price level\n- No seasonal patterns or calendar effects\n- Single source of uncertainty (one-factor)\n- Complete markets for hedging\n\n## Practical Use\nThe Schwartz one-factor model enables analytical pricing of commodity forwards, futures, and European options. Calibration to market data yields implied parameters that inform risk management and trading decisions. The model's forward curve dynamics provide insight into term structure evolution and roll yield expectations. Energy trading companies use Schwartz-type models for asset valuation, portfolio optimization, and scenario analysis. The model also serves as a benchmark for comparing more complex pricing approaches. Despite its simplicity, the Schwartz model captures key features of commodity price behavior and remains widely used in both academic research and industry applications."}
{"title": "Schwartz Two-Factor Model", "equation": "dS_t = \\kappa_S (\\theta_S - \\ln S_t)dt + \\sigma_S dW_S \\quad ; \\quad d\\delta_t = \\kappa_{\\delta}(\\theta_{\\delta} - \\delta_t)dt + \\sigma_{\\delta} dW_{\\delta}", "category": "Commodity Derivatives", "tags": ["schwartz-two-factor", "stochastic-convenience-yield", "multi-factor-model", "price-dynamics", "risk-premium-structure", "forward-curve", "stochastic-volatility", "joint-dynamics"], "note": "## Equation Variables\nThe Schwartz two-factor model introduces stochastic convenience yield as a second state variable, enabling more realistic capture of the relationship between commodity prices, inventory levels, and the cost of carry.\n\n- **$S_t$**: Commodity spot price at time $t$.\n- **$\\delta_t$**: Convenience yield (or its proxy such as net investment return).\n- **$\\kappa_S$**: Mean-reversion speed of log-price.\n- **$\\theta_S$**: Long-run mean of log-price.\n- **$\\kappa_{\\delta}$**: Mean-reversion speed of convenience yield.\n- **$\\theta_{\\delta}$**: Long-run mean of convenience yield.\n- **$\\sigma_S$**: Volatility of log-price.\n- **$\\sigma_{\\delta}$**: Volatility of convenience yield.\n- **$dW_S, dW_{\\delta}$**: Correlated Wiener processes.\n- **$\\rho$**: Correlation between price and convenience yield shocks.\n\n## Interpretation\nThe two-factor Schwartz model addresses a fundamental limitation of single-factor models: the observed correlation between commodity prices and convenience yields. When inventories are low, convenience yields rise (reflecting the value of physical access) while prices may also be high (due to supply constraints), creating negative correlation between price and convenience yield innovations. The model captures this relationship through correlated state variables, improving the model's ability to match observed forward curve shapes and option volatility surfaces. The two-factor structure allows for separate dynamics of short-term price movements (influenced by convenience yield shocks) and long-term equilibrium (governed by fundamental factors). This formulation provides more realistic term structure dynamics and improves option pricing accuracy.\n\n## Assumptions\n- Convenience yield is observable or proxied (e.g., by net investment return)\n- State variables follow correlated mean-reverting dynamics\n- Volatilities are constant\n- Market is complete with respect to the two factors\n- Correlation parameter is constant over time\n- No jumps or regime changes\n\n## Practical Use\nThe two-factor Schwartz model enables more accurate pricing of path-dependent derivatives and options with longer maturities. It improves the modeling of forward curve dynamics, particularly the relationship between near-term and long-term prices. Energy trading desks use the model for valuation of storage assets, swing contracts, and other complex derivatives with optionality. The stochastic convenience yield captures the inventory effect that is crucial for commodities with storage. Calibration requires market data from both forward prices and options, providing a richer parameter set that better reflects market expectations. The model serves as a foundation for more complex multi-factor and hybrid models used by sophisticated commodity market participants."}
{"title": "Electricity Spot Price (Langevin Model)", "equation": "dS_t = -\\lambda (S_t - \\mu) dt + \\sigma dW_t", "category": "Commodity Derivatives", "tags": ["langevin-model", "electricity-spot", "mean-reverting-electricity", "price-jumps", "short-term-dynamics", "power-price-model", "mean-reversion", "demand-response"], "note": "## Equation Variables\nThe Langevin model extends the Ornstein-Uhlenbeck process to capture the unique dynamics of electricity spot prices, characterized by rapid mean-reversion, extreme spikes, and high volatility.\n\n- **$S_t$**: Electricity spot price at time $t$ ($/MWh).\n- **$\\lambda$**: Mean-reversion rate (speed of price adjustment).\n- **$\\mu$**: Long-run mean price level or fundamental value.\n- **$\\sigma$**: Instantaneous volatility parameter.\n- **$dW_t$**: Brownian motion increment.\n- **$S_t - \\mu$**: Price deviation from equilibrium.\n\n## Interpretation\nThe Langevin model (a specific form of OU process) captures electricity price dynamics characterized by rapid mean-reversion following price spikes. Unlike many commodities, electricity cannot be economically stored, resulting in prices that spike dramatically during supply-demand imbalances and then rapidly revert to normal levels. The mean-reversion rate ($\\lambda$) is typically much higher for electricity than for storable commodities, reflecting the market's rapid adjustment through supply response and demand elasticity. The model captures the empirical observation that electricity prices spend most of their time near normal levels with occasional extreme excursions. The volatility parameter ($\\sigma$) captures the magnitude of normal price variations, while the model may be extended with jump components to better capture extreme events.\n\n## Assumptions\n- Mean-reversion is instantaneous and continuous\n- Price spikes are not explicitly modeled (requires jump extension)\n- Volatility is constant and homoscedastic\n- Long-run mean is constant and known\n- No seasonal patterns in parameters (may be calendar-dependent)\n- Perfect market efficiency in price discovery\n\n## Practical Use\nThe Langevin model serves as a foundation for electricity spot price modeling in power markets. It enables pricing of standard power derivatives including forwards, options, and swaps. Risk management applications include calculating Value-at-Risk for power portfolios and stress testing extreme scenarios. The model's analytical tractability supports real-time risk assessment and margining. Extended versions incorporating seasonality, spikes (jump-diffusion), and stochastic volatility better capture observed power price dynamics. The model informs capacity expansion decisions, generator dispatch optimization, and demand response program design. Quantitative trading strategies exploit mean-reversion tendencies captured by the Langevin dynamics."}
{"title": "Gas Storage Valuation (Dynamic Programming)", "equation": "V_t(S_t) = \\max \\left\\{ \\mathbb{E}_t \\left[ e^{-r\\Delta} V_{t+\\Delta}(S_{t+\\Delta}) \\right] , S_t - C_t \\right\\}", "category": "Commodity Derivatives", "tags": ["storage-valuation", "dynamic-programming", "optimal-stopping", "real-options", "injection-withdrawal", "inventory-optimization", "binomial-lattice", "storage-arbitrage"], "note": "## Equation Variables\nGas storage valuation uses dynamic programming to determine the optimal injection and withdrawal strategy, valuing the storage asset as the maximum of the continuation value and the immediate value from selling physical inventory.\n\n- **$V_t(S_t)$**: Value of storage at time $t$ with inventory level $S_t$.\n- **$\\mathbb{E}_t$**: Conditional expectation given information at time $t$.\n- **$e^{-r\\Delta}$**: Discount factor over the decision interval.\n- **$V_{t+\\Delta}(S_{t+\\Delta})$**: Value at the next decision point.\n- **$S_t$**: Current inventory level.\n- **$C_t$**: Cost of holding inventory (storage fees, financing).\n- **$r$**: Risk-free discount rate.\n- **$\\Delta$**: Time step size.\n\n## Interpretation\nGas storage valuation exemplifies the real options approach to commodity assets, where the storage operator faces a sequential decision problem: inject gas (increase inventory), withdraw gas (decrease inventory), or hold (do nothing). The value function captures the optimal decision at each point, balancing the time value of optionality against immediate profits. The continuation value represents the expected value of maintaining flexibility, while the immediate value ($S_t - C_t$) captures the value from selling inventory now. The optimal strategy creates a trigger structure where injection occurs when prices are low relative to expected future prices, and withdrawal occurs when prices are high. The value of storage represents the difference between forward prices and spot prices in contango markets.\n\n## Assumptions\n- Perfect foresight of future price distributions\n- Known and deterministic convenience yields\n- Storage capacity and withdrawal/injection rate constraints\n- No operational constraints (outages, maintenance)\n- Continuous or discrete time with appropriate time step\n- Risk-neutral valuation applies\n\n## Practical Use\nStorage valuation is critical for energy companies, natural gas utilities, and trading firms managing storage assets. The dynamic programming framework informs trading decisions, operational planning, and asset valuations. Modern implementations use finite difference methods, Monte Carlo simulation with regression (Least Squares Monte Carlo), or tree-based methods to handle the high-dimensional state space. The valuation incorporates seasonal price patterns, weather derivatives, and correlation with other energy markets. Storage assets are often hedged using calendar spreads and options that capture the roll yield. The optionality embedded in storage is particularly valuable during periods of high price volatility and supply uncertainty."}
{"title": "Stack-and-Roll Strategy", "equation": "Roll = \\sum_{i=1}^{n} \\Delta F_i", "category": "Commodity Derivatives", "tags": ["stack-and-roll", "roll-strategy", "futures-rollover", "index-tracking", "roll-yield", "commodity-index", "rebalancing", "contango-management"], "note": "## Equation Variables\nThe stack-and-roll strategy describes a hedging or investment approach that maintains continuous futures exposure by systematically rolling expiring positions into longer-dated contracts.\n\n- **$Roll$**: Total roll cost or benefit over the holding period.\n- **$\\Delta F_i$**: Change in futures price from roll $i-1$ to roll $i$.\n- **$n$**: Number of rolls during the holding period.\n- **$F_i$**: Futures price at the time of roll $i$.\n\n## Interpretation\nThe stack-and-roll strategy is fundamental to commodity index investing and hedging programs that require continuous futures exposure. As near-dated futures contracts approach expiration, positions must be closed and rolled into longer-dated contracts to maintain exposure. The roll return (or roll yield) is the difference between the return of the rolled futures position and the underlying spot return. In contango markets, rolling forward creates negative roll yield (long positions sell low and buy high), while backwardation creates positive roll yield. The cumulative roll effect significantly impacts long-term commodity index returns and must be factored into investment decisions and hedging strategies. The strategy can be implemented with monthly, quarterly, or custom roll schedules depending on liquidity and exposure needs.\n\n## Assumptions\n- Sufficient liquidity in rolled-to contracts\n- Roll timing is predetermined or optimally selected\n- No transaction costs or bid-ask slippage\n- Perfect execution at observed prices\n- Consistent contract specifications and delivery terms\n\n## Practical Use\nStack-and-roll strategies are essential for commodity index funds, pension fund allocations, and corporate hedging programs. Commodity index providers (such as Bloomberg, S&P GSCI) publish roll schedules that define how indices manage expiration. Quantitative hedge funds develop optimized roll strategies to minimize negative roll yield in contango and maximize positive roll yield in backwardation. The strategy's effectiveness depends on the shape of the forward curve and expectations about future curve evolution. Roll analysis is incorporated into performance attribution, separating returns into spot return, roll return, and collateral return components. For physical market participants, understanding roll dynamics informs decisions about physical inventory timing and forward contracting strategies."}
{"title": "Contango/Backwardation Measure (Basis)", "equation": "Basis = F - S = (r + u - y) S T", "category": "Commodity Derivatives", "tags": ["basis", "contango", "backwardation", "forward-premium", "discount", "price-relationship", "market-structure", "storage-arbitrage", "term-structure"], "note": "## Equation Variables\nThe basis represents the difference between futures and spot prices, providing a direct measure of market structure (contango or backwardation) and the implied cost of carry.\n\n- **$Basis$**: Futures minus spot price (can be positive or negative).\n- **$F$**: Futures price for delivery at time $T$.\n- **$S$**: Current spot price.\n- **$r$**: Risk-free interest rate (financing cost).\n- **$u$**: Storage cost as proportion of spot price.\n- **$y$**: Convenience yield (benefit from physical ownership).\n- **$T$**: Time to delivery.\n\n## Interpretation\nThe basis measures the market's contango or backwardation, directly reflecting the net cost of carry. A positive basis (futures > spot) indicates contango, where the market pays for the privilege of deferred delivery to cover storage and financing costs. A negative basis (futures < spot) indicates backwardation, where the convenience yield from physical ownership exceeds carrying costs, often during supply concerns or inventory drawdowns. The basis determines the economics of cash-and-carry arbitrage: when the basis exceeds carrying costs, arbitrageurs buy spot, store, and deliver against futures, driving the basis toward equilibrium. The relationship is linear for small $T$ but requires the exponential formulation for longer horizons.\n\n## Assumptions\n- Perfect correlation between spot and futures returns\n- Known and constant carry costs and benefits\n- No transaction costs or execution risk\n- Available storage capacity and financing\n- Standardized delivery specifications\n\n## Practical Use\nThe basis is closely monitored by physical traders, arbitrageurs, and risk managers as a real-time indicator of market structure. Storage arbitrage profitability depends on the basis relative to actual carrying costs. Hedging effectiveness depends on the basis risk (imperfect correlation between spot and futures). The basis varies seasonally, reflecting inventory cycles and production patterns. In natural gas markets, basis trading (trading location differentials) is a major activity, with prices quoted for various delivery points relative to benchmark contracts. Understanding basis dynamics is essential for physical procurement, logistics optimization, and financial hedging programs."}
{"title": "Calendar Option on Futures Spread", "equation": "V = e^{-rT} \\mathbb{E} \\left[ (F_2 - F_1)^+ \\right]", "category": "Commodity Derivatives", "tags": ["calendar-option", "spread-option", "futures-spread", "exchange-option", "compound-option", "option-pricing", "contingent-claim", "future-relationship"], "note": "## Equation Variables\nA calendar option provides the right to enter into a spread position at a predetermined spread level, offering exposure to the time value of the spread between two futures contracts.\n\n- **$V$**: Present value of the calendar option.\n- **$r$**: Risk-free interest rate.\n- **$T$**: Time to option expiration.\n- **$F_2$**: Price of the far futures contract at expiration.\n- **$F_1$**: Price of the near futures contract at expiration.\n- **$K$**: Strike spread level (not shown but implied).\n- **$(x)^+$**: Payoff function = $\\max(x, 0)$.\n- **$\\mathbb{E}$**: Risk-neutral expectation.\n\n## Interpretation\nCalendar options are compound options that give the holder the right (but not obligation) to establish a spread position at a future date. The payoff depends on the spread between two futures contracts at expiration, making the option valuable when market expectations suggest significant spread widening or narrowing. The holder benefits from favorable spread movements while limiting downside risk to the option premium. Calendar options are commonly used by physical market participants to hedge timing uncertainty—for example, a producer uncertain about the optimal timing of physical sales might purchase a calendar option to lock in favorable spread levels. The option captures the optionality in choosing when to establish the spread position.\n\n## Assumptions\n- European exercise (only at expiration)\n- Known and constant volatilities\n- Correlated futures prices (captured in spread dynamics)\n- No early exercise value\n- Risk-neutral valuation applies\n- Standardized contract specifications\n\n## Practical Use\nCalendar options are traded on major energy exchanges and over-the-counter markets, providing hedging and trading tools for spread exposure. They are particularly valuable for managing timing uncertainty in production, consumption, and storage decisions. The options allow market participants to benefit from favorable spread movements while capping downside exposure. Quantitatively, calendar options require modeling the joint dynamics of the two underlying futures, often using bivariate log-normal or more complex stochastic processes. Trading strategies include spread position protection, directional spread bets with limited risk, and volatility trading on the spread. The calendar option structure also extends to other compound option strategies such as chooser options and ladder options."}
{"title": "Weather Derivative (Heating Degree Days)", "equation": "HDD = \\max \\left(0, 18 - \\frac{T_{max} + T_{min}}{2} \\right)", "category": "Commodity Derivatives", "tags": ["weather-derivative", "heating-degree-days", "cooling-degree-days", "hdd-cdd", "temperature-derivative", "catastrophe-derivative", "index-derivative", "temperature-hedging"], "note": "## Equation Variables\nWeather derivatives are financial instruments that pay based on weather measurements, with Heating Degree Days (HDD) being the most common structure for winter-related weather risk.\n\n- **$HDD$**: Daily heating degree day accumulation.\n- **$T_{max}$**: Maximum daily temperature (typically in Celsius).\n- **$T_{min}$**: Minimum daily temperature.\n- **$T_{avg}$**: Average daily temperature = $(T_{max} + T_{min})/2$.\n- **$18$**: Base temperature (varies by location and application).\n- **$\\max(0, \\cdot)$**: Floor function ensuring non-negative accumulation.\n\n## Interpretation\nHDD measures the deviation of temperature from a heating threshold, capturing the demand for space heating. Each degree below the base temperature accumulates one HDD, representing additional heating requirement. The relationship is linear: colder weather increases HDD accumulation and associated heating demand. Weather derivatives pay based on cumulative HDD or CDD over a defined period (typically monthly or seasonal), providing hedge protection for companies exposed to temperature-related revenue variability. Natural gas utilities, heating oil distributors, and retail businesses with weather-sensitive sales use HDD derivatives to hedge earnings volatility. The payout structure is typically linear or capped, with the latter protecting against extreme weather while limiting premium costs.\n\n ## Assumptions\n- Base temperature is appropriate for the location and building stock\n- Temperature data is measured at standardized locations\n- No spatial correlation issues (for portfolio purposes)\n- Linear relationship between HDD and energy demand\n- Sufficient liquidity for hedging at reasonable costs\n\n## Practical Use\nWeather derivatives were pioneered in the energy sector but now cover precipitation, wind, and other meteorological variables. The over-the-counter market allows customized structures tailored to specific exposure profiles, while exchange-traded products provide standardized hedging tools. Pricing uses historical temperature data, actuarial analysis, and weather forecast models. Catastrophe bonds extend the weather derivative concept to natural disaster risk. Corporate risk managers use weather derivatives to hedge earnings volatility from weather-sensitive operations, including retail sales, agricultural production, and construction scheduling. The market continues to develop with new indices, improved data sources, and enhanced modeling approaches."}
{"title": "Emissions Allowance Valuation", "equation": "V_{EUA} = \\mathbb{E} \\left[ e^{-rT} \\max(S_T - K, 0) \\right]", "category": "Commodity Derivatives", "tags": ["emissions-trading", "eua-carbon-price", "cap-and-trade", "carbon-derivatives", "allowance-option", "carbon-market", "emissions-hedge", "compliance-cost"], "note": "## Equation Variables\nEmissions allowance valuation applies option pricing methodology to carbon markets, where allowances represent the right to emit one ton of CO2 equivalent.\n\n- **$V_{EUA}$**: Value of EU Allowances (EU ETS) or similar emissions credits.\n- **$S_T$**: Spot price of allowances at time $T$.\n- **$K$**: Strike price or cost floor.\n- **$r$**: Risk-free discount rate.\n- **$T$**: Time to allowance delivery or compliance deadline.\n- **$\\mathbb{E}$**: Risk-neutral expectation.\n- **$\\max(S_T - K, 0)$**: Call option payoff structure.\n\n## Interpretation\nEmissions allowance prices in cap-and-trade systems reflect the marginal cost of abatement and the stringency of the emissions cap. The EU Allowance (EUA) price in the European Emissions Trading Scheme demonstrates how carbon prices have evolved from single digits to over 100 EUR/tCO2, driven by policy reforms and market reforms. Allowances function like commodities with unique supply dynamics determined by policy decisions rather than production costs. The option-like structure captures the asymmetric impact of carbon costs: installations face unlimited downside from high carbon prices but limited upside from low prices. Forward curves in carbon markets reflect expectations about future policy, economic activity, and technology costs.\n\n## Assumptions\n- Policy framework remains stable over the valuation horizon\n- Allowances are fungible across sectors and time periods\n- Perfect enforcement and monitoring\n- Market liquidity sufficient for accurate price discovery\n- Correlation with energy prices is captured in dynamics\n\n## Practical Use\nEmissions derivatives include spot allowances, forward contracts, options, and futures across multiple compliance markets (EU ETS, California, UK ETS, China national market). Industrial companies hedge compliance costs using forwards and options, while financial traders position on policy outcomes and macro trends. The interaction between carbon prices and energy markets creates cross-commodity trading opportunities, particularly between coal-to-gas switching in power generation. Carbon credit quality distinctions (forestry, renewable energy, avoidance versus removal) affect pricing and regulatory acceptance. The evolution of carbon markets toward broader coverage and higher prices makes emissions derivatives increasingly important for corporate risk management and investment decisions."}
{"title": "Coal Derivatives Pricing", "equation": "F_{coal} = S_0 e^{(r + u - y)T} \\times QC \\times CV", "category": "Commodity Derivatives", "tags": ["coal-derivatives", "thermal-coal", "coking-coal", "price-adjustment-formula", "quality-spread", "heating-value", "calorific-adjustment", "coal-index"], "note": "## Equation Variables\nCoal derivatives incorporate quality adjustments that convert between different coal specifications, reflecting the energy content and usage characteristics of various coal types.\n\n- **$F_{coal}$**: Price of specific coal contract.\n- **$S_0$**: Base index price or reference coal price.\n- **$r$**: Risk-free interest rate.\n- **$u$**: Ocean freight and shipping costs.\n- **$y$**: Time charter equivalent or convenience yield.\n- **$T$**: Time to delivery.\n- **$QC$**: Quality coefficient (ash, sulfur, moisture adjustments).\n- **$CV$**: Calorific value ratio (heating content adjustment).\n\n## Interpretation\nCoal derivatives differ from other commodity derivatives due to significant quality variation between coal types. Thermal coal (for power generation) is priced based on energy content (kcal/kg) and impurity levels (ash, sulfur), while coking coal (for steel production) commands premium prices based on caking properties and metallurgical characteristics. The quality adjustment formula converts between actual delivered coal and reference specifications, protecting against basis risk from specification differences. Physical coal contracts typically reference published indices (such as Argus/McCloskey for thermal coal, Platts for metallurgical coal) with price adjustments for delivery location, timing, and quality. The coal market has unique dynamics influenced by mine production costs, shipping constraints, and demand from emerging market power sectors.\n\n## Assumptions\n- Reference indices accurately reflect market conditions\n- Quality adjustments follow standardized formulas\n- Shipping costs are known or hedged\n- No quality disputes or sampling variability\n- Contract specifications are unambiguous\n\n## Practical Use\nCoal derivatives provide hedging tools for mining companies, power generators, and trading firms. Forward contracts and swaps dominate the over-the-counter market, while exchange-traded products provide clearing and standardization. The complexity of coal quality adjustments requires sophisticated risk management to avoid basis losses. Coal price indices serve as reference points for long-term supply contracts and investment decisions. The energy transition is reshaping coal derivatives markets, with increasing focus on emissions costs, transition risk, and potential stranded assets. Coal price forecasting incorporates mine supply costs, shipping economics, renewable competition, and policy trajectories."}
{"title": "LNG Derivatives and Destination Flexibility", "equation": "V_{LNG} = \\max \\left\\{ F_{spot}, F_{dest} - C_{shipping} - C_{regas} \\right\\}", "category": "Commodity Derivatives", "tags": ["lng-derivatives", "liquefied-natural-gas", "destination-flexibility", "shipping-options", "regasification", "spot-lng", "arbitrage-pricing", "physical-trading"], "note": "## Equation Variables\nLNG derivatives incorporate the unique flexibility of destination choice and shipping logistics that distinguish LNG from pipeline gas trading.\n\n- **$V_{LNG}$**: Value of LNG cargo or contract.\n- **$F_{spot}$**: Spot price at destination market (e.g., Asian LNG, European TTF).\n- **$F_{dest}$**: Forward price at alternative destination.\n- **$C_{shipping}$**: Shipping cost (vessel charter or spot rate).\n- **$C_{regas}$**: Regasification and terminal costs.\n- **$\\max$**: Optionality to route cargo to highest-value market.\n\n## Interpretation\nLNG derivatives are complicated by the physical constraints of liquefaction, shipping, and regasification that create significant optionality in cargo routing. Unlike pipeline gas with fixed delivery points, LNG cargoes can be redirected to markets offering the highest netback price (destination option). This flexibility is valuable during price dislocations between regional markets and has driven the development of spot LNG trading. The destination option is analogous to a multi-asset option where the holder can choose the optimal delivery point. Recent market developments include the emergence of global LNG hubs, increased liquidity in spot trading, and the development of derivatives that capture shipping optionality. The relationship between Henry Hub, TTF, JKM, and other regional gas benchmarks creates arbitrage opportunities and trading strategies.\n\n ## Assumptions\n- Sufficient shipping capacity and scheduling flexibility\n- Terminal access and regasification capacity available\n- No destination restrictions or contractual limitations\n- Known shipping costs and regasification fees\n- Complete markets for destination pricing\n\n## Practical Use\nLNG derivatives enable trading firms, utilities, and integrated energy companies to manage price risk across multiple regional markets. The development of LNG shipping as a tradable service has increased market efficiency and arbitrage opportunities. Destination flexibility options are valued using multi-factor models that capture regional price correlations and shipping cost dynamics. Portfolio optimization incorporates the optionality of cargo routing in supply chain planning. The growth of spot LNG trading has created new hedging needs addressed by over-the-counter derivatives and exchange-traded products. Understanding LNG derivatives is essential for market participants navigating the globalized gas market."}
{"title": "Commodity Index Roll Yield Optimization", "equation": "Y_{roll} = \\sum_{i=1}^{n} w_i \\left( \\frac{F_{i+1}}{F_i} - 1 \\right)", "category": "Commodity Derivatives", "tags": ["roll-yield-optimization", "commodity-index", "roll-strategy", "weighting-scheme", "contango-harvesting", "backwardation-strategy", "index-construction", "rebalancing"], "note": "## Equation Variables\nCommodity index roll yield optimization addresses the challenge of maintaining index exposure while minimizing the adverse impact of rolling futures contracts across the forward curve.\n\n- **$Y_{roll}$**: Cumulative roll yield over the rebalancing period.\n- **$w_i$**: Weight of contract $i$ in the index.\n- **$F_i$**: Futures price for contract $i$.\n- **$F_{i+1}$**: Futures price for the next contract in the roll hierarchy.\n- **$n$**: Number of contracts in the roll.\n\n## Interpretation\nThe roll yield component of commodity index returns significantly impacts long-term performance, particularly in contango markets where systematic roll losses erode spot returns. Traditional index methodologies roll contracts according to fixed schedules, but enhanced approaches seek to optimize roll timing and contract selection to reduce negative roll yield. Strategies include rolling only when contango exceeds thresholds, using longer-dated contracts to reduce roll frequency, and dynamically adjusting weights to capture favorable curve movements. The optimization problem balances roll yield improvement against tracking error and transaction costs. Research shows that optimized rolling can add 1-3% annual return in contango markets without significantly increasing risk.\n\n## Assumptions\n- Historical roll yield patterns are predictive of future behavior\n- Transaction costs are acceptable for enhanced strategies\n- Tracking error relative to benchmark is within tolerance\n- Market liquidity supports strategy implementation\n- No regime changes that invalidate historical patterns\n\n## Practical Use\nInstitutional investors and commodity trading advisors employ roll yield optimization to enhance index returns and differentiate products. The methodology requires sophisticated modeling of forward curve dynamics, transaction cost analysis, and risk budgeting. Backwardation harvesting strategies specifically target markets where positive roll yield enhances returns, while contango mitigation strategies reduce losses in markets with negative roll characteristics. The optimization is ongoing, as market structure evolves with changing storage economics, production patterns, and investor flows. Performance attribution separates roll yield from spot return and collateral yield, providing transparency for investors evaluating commodity strategies."}
{"title": "Multi-Commodity Optimization Framework", "equation": "\\max_{x} \\quad \\mu^T x - \\frac{1}{2} \\lambda x^T \\Sigma x \\quad \\text{s.t.} \\quad Ax \\leq b, \\quad Cx = d", "category": "Commodity Derivatives", "tags": ["multi-commodity-optimization", "portfolio-optimization", "mean-variance", "risk-budgeting", "constraints", "commodity-portfolio", "hedging-ratio", "variance-minimization"], "note": "## Equation Variables\nMulti-commodity optimization extends portfolio theory to commodity portfolios, incorporating the unique characteristics of commodity returns including roll yield, basis risk, and physical constraints.\n\n- **$x$**: Vector of commodity positions (futures, physical, derivatives).\n- **$\\mu$**: Expected return vector for commodity positions.\n- **$\\Sigma$**: Covariance matrix of commodity returns.\n- **$\\lambda$**: Risk aversion coefficient.\n- **$Ax \\leq b$**: Inequality constraints (e.g., concentration limits, gross exposure).\n- **$Cx = d$**: Equality constraints (e.g., beta target, sector allocation).\n\n## Interpretation\nMulti-commodity optimization provides the mathematical framework for constructing optimal commodity portfolios that balance expected returns against risk subject to trading and portfolio constraints. The objective function maximizes risk-adjusted return (mean-variance framework), while constraints capture practical limitations including concentration limits, liquidity constraints, and strategic allocation targets. Commodity portfolios require special consideration of roll yield, which can dominate spot returns over time, and basis risk from imperfect correlation between spot and futures. The covariance matrix captures not only volatility but also cross-commodity correlations, which are often high within energy complexes (crude, gasoline, heating oil) and between related commodities (natural gas, power, coal). Optimization enables systematic hedging of existing exposures and tactical positioning based on relative value views.\n\n## Assumptions\n- Expected returns are forecastable and stable\n- Covariance matrix is invertible and constant (or appropriately estimated)\n- Constraints are linear and tractable\n- Transaction costs are either negligible or incorporated separately\n- Risk measures beyond variance (VaR, CVaR) are not required\n\n## Practical Use\nMulti-commodity optimization is employed by commodity trading advisors, energy company treasury functions, and institutional investors allocating to commodities. The framework supports both strategic asset allocation (long-term target weights) and tactical trading (short-term positioning based on market views). Risk budgeting approaches decompose portfolio risk into commodity and factor contributions, enabling informed risk allocation decisions. Constraint sets commonly include gross exposure limits, sector concentration limits, liquidity-based position limits, and regulatory requirements for managed funds. The optimization is typically implemented using quadratic programming solvers, with robustness considerations for estimation error in expected returns and covariances."}
{"title": "Continuous Average Price Asian Call", "equation": "V_A = S_0 I - K e^{-rT} N(d_1^*) \\quad \\text{where} \\quad I = \\frac{1}{T} \\int_0^T S_t dt", "category": "Exotic Options", "tags": ["asian-option", "continuous-average", "time-average", "path-dependent", "geometric-brownian-motion", "call-option", "reduced-volatility", "commodity-hedging", "smooth-payoff", "analytical-approximation", "price-smoothing"], "note": "## Equation Variables\nThe continuous average price Asian option derives its value from the time-average of the underlying asset's price over the option's lifetime. This averaging mechanism creates a smoothing effect that reduces the impact of extreme price movements near expiration.\n\n- **$V_A$**: Price of the continuous Asian call option, representing the present value of the expected payoff based on average price\n- **$S_0$**: Initial spot price of the underlying asset at time zero\n- **$I$**: Time-average of the underlying price, computed as the integral $\\frac{1}{T} \\int_0^T S_t dt$ over the interval $[0, T]$\n- **$K$**: Strike price at which the average can be converted to cash at expiration\n- **$r$**: Risk-free interest rate used for discounting the expected payoff\n- **$T$**: Time to maturity, defining the observation window for averaging\n- **$N(d_1^*)$**: Modified cumulative normal distribution function adjusting for the averaging effect on the terminal distribution\n- **$d_1^*$**: Adjusted first-order term in the Black-Scholes framework that accounts for the correlation between terminal price and the time-average\n\n## Interpretation\nThe Asian option payoff takes the form $(A_T - K)^+$ where $A_T$ represents the time-average of the underlying. Unlike vanilla options that depend solely on terminal price, Asian options incorporate the entire price path, creating a fundamentally different risk profile.\n\nThe continuous average $I$ has a closed-form representation under geometric Brownian motion, though the joint distribution of $(S_T, I)$ remains analytically intractable. The modification $d_1^*$ adjusts the standard Black-Scholes $d_1$ to account for this correlation structure, reflecting how the average price evolves alongside the terminal price.\n\nThe averaging mechanism provides three key benefits: reduced sensitivity to end-of-period manipulation (critical in emerging markets), lower option premiums due to smoothed volatility, and natural hedging properties for businesses exposed to average price exposure over time.\n\n## Assumptions\n- Underlying follows geometric Brownian motion: $dS_t = \\mu S_t dt + \\sigma S_t dW_t$\n- Continuous monitoring of the underlying price without gaps\n- Risk-neutral pricing framework with constant risk-free rate\n- No dividends paid during the averaging period (can be incorporated via drift adjustment)\n- The average is arithmetic, requiring numerical integration for exact pricing\n\n## Practical Use\nContinuous average Asian options are extensively used in energy markets, particularly for crude oil, natural gas, and electricity derivatives where settlement is based on average prices over defined periods. The smoothing effect protects against price spikes caused by supply disruptions, weather events, or political instability.\n\nIn commodity markets, average-priced options align hedging instruments with physical delivery contracts that settle on monthly or quarterly average prices. This matching reduces basis risk and provides more effective corporate hedging. The reduced cost relative to vanilla options makes them attractive for budget-conscious hedging programs.\n\nThe continuous formulation provides a theoretical benchmark that can be approximated through discrete sampling with adjustment factors. Monte Carlo simulation remains the most common practical implementation, often using geometric Asian options as control variates to reduce variance."}
{"title": "Discretely Sampled Asian Option Price", "equation": "V = e^{-rT} \\mathbb{E}\\left[\\left(A - K\\right)^+\\right] \\quad \\text{where} \\quad A = \\frac{1}{n} \\sum_{i=1}^{n} S_{t_i}", "category": "Exotic Options", "tags": ["asian-option", "discrete-sampling", "arithmetic-average", "path-dependent", "expectation-pricing", "monte-carlo-simulation", "sampling-frequency", "commodity-settlement", "numerical-methods", "discretization-error"], "note": "## Equation Variables\nThe discretely sampled Asian option prices based on observations at specific time points rather than continuous monitoring, reflecting the practical reality of observable settlement prices in markets.\n\n- **$V$**: Price of the discretely sampled Asian option under risk-neutral measure\n- **$e^{-rT}$**: Risk-free discount factor converting terminal payoff to present value\n- **$\\mathbb{E}[\\cdot]$**: Risk-neutral expectation operator over all possible price paths\n- **$(A - K)^+$**: Payoff function, equal to $\\max(A - K, 0)$ for a call option\n- **$A$**: Arithmetic average computed at discrete observation times\n- **$K$**: Strike price defining the conversion level for the average\n- **$n$**: Number of sampling points in the observation period\n- **$t_i$**: Specific observation times where prices are sampled\n- **$S_{t_i}$**: Underlying price at each observation time $t_i$\n\n## Interpretation\nDiscretely sampled Asian options sample the underlying price at predetermined dates, which may be daily, weekly, monthly, or aligned with specific market conventions. The arithmetic average lacks the elegant analytical properties of the geometric average, making numerical methods essential for pricing.\n\nThe number and timing of sampling points significantly affect both the option's value and its sensitivity to discretization error. More frequent sampling increases the option's correlation with continuous averaging but introduces computational overhead and potential liquidity constraints.\n\nThe expectation formulation highlights that pricing requires integrating over the joint distribution of sampled prices, a computationally intensive task for large $n$. The path-dependent nature means that the distribution of $A$ depends not just on marginal distributions of $S_{t_i}$ but on their entire correlation structure.\n\nKey approximation approaches include the Levy approximation (matching first two moments of the average), Turnbull-Wakeman (forward-backward moment matching), and Monte Carlo simulation with variance reduction techniques.\n\n## Assumptions\n- Prices are sampled at deterministic, known times without observation gaps\n- Risk-neutral measure applies to all price paths\n- Underlying follows geometric Brownian motion or more general diffusion\n- No dividends or known income during the averaging period\n- Sampling is observable and trades occur at sampled prices\n\n## Practical Use\nDiscrete averaging aligns with actual market settlement conventions, making these options the practical standard for energy and agricultural commodity markets. NYMEX crude oil futures settle on monthly average prices, making discretely sampled Asian options natural hedging instruments.\n\nThe sampling frequency must balance computational tractability with hedging accuracy. Daily sampling (250+ points) provides close approximation to continuous averaging but may exceed practical constraints. Monthly sampling (12 points) is common for longer-dated contracts.\n\nMonte Carlo simulation remains the most flexible implementation, with variance reduction through geometric Asian control variates, importance sampling for tail scenarios, and quasi-random sequences (Sobol) for faster convergence."}
{"title": "Geometric Average Asian Closed Form", "equation": "V_{geo} = S_0 e^{-qT} N(y) - K e^{-rT} N(y - \\sigma\\sqrt{\\tau})", "category": "Exotic Options", "tags": ["geometric-average", "asian-option", "closed-form-solution", "lognormal-distribution", "analytical-pricing", "benchmark-pricing", "control-variate", "black-scholes-extension", "exact-solution", "mathematical-elegance"], "note": "## Equation Variables\nThe geometric average Asian option enjoys a rare distinction in exotic options: an exact closed-form solution derived from the mathematical property that the geometric mean of lognormal variables remains lognormal.\n\n- **$V_{geo}$**: Price of the geometric average Asian option\n- **$S_0$**: Initial spot price of the underlying asset\n- **$q$**: Continuous dividend yield or foreign interest rate (for currency applications)\n- **$K$**: Strike price at which the geometric average can be exercised\n- **$r$**: Risk-free interest rate for discounting\n- **$T$**: Time to maturity and observation window length\n- **$N(\\cdot)$**: Standard normal cumulative distribution function\n- **$y$**: Modified log-moneyness term incorporating averaging effects\n- **$\\sigma$**: Volatility of the underlying asset\n- **$\\tau$**: Time parameter representing the averaging intensity, $\\tau = T/2$ for continuous monitoring\n\nThe modified log-moneyness $y$ is computed as:\n$$y = \\frac{\\ln(S_0/K) + (r - q + \\sigma^2/2)T + \\sigma^2\\tau/2}{\\sigma\\sqrt{\\tau}}$$\n\n## Interpretation\nThe geometric average's closed-form solution emerges from the fundamental property that if $S_t$ is lognormal, then the geometric mean $\\prod S_{t_i}^{1/n}$ (or the continuous equivalent) is also lognormally distributed. This mathematical elegance has profound practical implications.\n\nThe effective parameters for the geometric average option mirror Black-Scholes but with adjusted drift and variance:\n- **Effective drift**: $\\mu_{eff} = r - q + \\sigma^2/2$ adjusted for averaging\n- **Effective variance**: $\\sigma_{eff}^2 = \\sigma^2(1 - \\tau/T)$ where $\\tau/T = 1/2$ for continuous averaging\n\nFor continuous monitoring, $\\tau = T/2$ meaning the geometric average has half the variance of the terminal price. This variance reduction directly explains why geometric Asian options are cheaper than equivalent vanilla options.\n\nThe parameter $\\tau$ varies with sampling pattern: for discrete sampling with $n$ points, $\\tau = T(n+1)/(2n)$ approaches $T/2$ as $n$ increases.\n\n## Assumptions\n- Continuous monitoring of the geometric average (or regularly spaced discrete sampling)\n- Geometric Brownian motion dynamics for the underlying asset\n- Risk-neutral pricing framework with constant parameters\n- No jumps or stochastic volatility (would destroy analytical tractability)\n- The geometric mean has exact lognormal distribution\n\n## Practical Use\nThe geometric average Asian option serves as the primary benchmark and control variate in Monte Carlo pricing of arithmetic Asian options. When computing the price of an arithmetic Asian option via simulation, pricing the corresponding geometric Asian option with known exact value provides a variance reduction mechanism that dramatically accelerates convergence.\n\nAcademically, this solution demonstrates how averaging affects option pricing and provides intuition for understanding more complex path-dependent derivatives. The formula appears in virtually every derivatives pricing textbook as an example of analytical tractability in exotic options.\n\nIn practice, traders use geometric Asian prices as quick approximations and sanity checks for more complex numerical implementations. The exact solution also enables calibration procedures that would be computationally prohibitive with pure simulation."}
{"title": "Arithmetic Average Asian Turnbull-Wakeman", "equation": "V \\approx S_0 e^{-qT} N(d_1) - K e^{-rT} N(d_2)", "category": "Exotic Options", "tags": ["turnbull-wakeman", "arithmetic-average", "asian-option", "approximation-method", "moment-matching", "analytical-approximation", "computational-efficiency", "risk-neutral-pricing,continuous-monitoring", "lognormal-approximation"], "note": "## Equation Variables\nThe Turnbull-Wakeman approximation provides a computationally efficient analytical approach to pricing arithmetic average Asian options, widely used in practice for its balance of accuracy and speed.\n\n- **$V$**: Approximate price of the arithmetic average Asian option\n- **$S_0$**: Initial spot price of the underlying asset\n- **$q$**: Continuous dividend yield on the underlying\n- **$K$**: Strike price for the arithmetic average payoff\n- **$r$**: Risk-free interest rate for discounting\n- **$T$**: Time to maturity and averaging period length\n- **$N(\\cdot)$**: Standard normal cumulative distribution function\n- **$d_1, d_2$**: Black-Scholes-style terms computed with effective parameters\n\nThe effective $d$ terms use the forward price and effective volatility:\n$$d_1 = \\frac{\\ln(S_0/K) + (r - q + \\sigma^2/2)T}{\\sigma\\sqrt{T}}, \\quad d_2 = d_1 - \\sigma\\sqrt{T}$$\n\nwhere $\\sigma$ represents the effective volatility of the arithmetic average.\n\n## Interpretation\nThe Turnbull-Wakeman approximation applies the Black-Scholes formula to the arithmetic average by approximating the distribution of the average as lognormal with matched moments. The key insight is that the first two moments (mean and variance) of the arithmetic average under GBM are analytically tractable.\n\nFor a continuous arithmetic average $A_T = \\frac{1}{T} \\int_0^T S_t dt$:\n- The mean of $A_T$ equals the forward price $F = S_0 e^{(r-q)T}$\n- The variance of $\\ln(A_T)$ is $\\sigma^2 T / 3$ for continuous averaging\n\nThis variance reduction ($\\sigma^2 T / 3$ vs. $\\sigma^2 T$ for terminal price) reflects the averaging effect and explains why arithmetic Asian options are cheaper than vanilla options.\n\nThe approximation works well when:\n- The number of sampling points is moderate (not too sparse)\n- The strike is near-the-money\n- The underlying has moderate volatility\n\nFor extreme moneyness or sparse sampling, the approximation error increases, and numerical methods become necessary.\n\n## Assumptions\n- Arithmetic average is approximated as lognormally distributed\n- First two moments match the true average distribution under GBM\n- Regular sampling schedule (approximation extends to irregular sampling)\n- Constant volatility and interest rates\n- Risk-neutral pricing framework\n\n## Practical Use\nThe Turnbull-Wakeman approximation forms the backbone of most commercial Asian option pricing models, providing near-instantaneous prices suitable for real-time trading and risk management. Its computational efficiency enables calibration procedures that would be impossible with simulation-based methods.\n\nThe approximation serves as a starting point for more sophisticated numerical methods, providing initial guesses for iterative procedures and validation benchmarks for simulation results. When simulation prices diverge significantly from Turnbull-Wakeman, this often indicates discretization issues or model misspecification.\n\nExtensions of the method handle discrete sampling, forward-start patterns, and Asian options on underlying assets with stochastic volatility or jumps."}
{"title": "Down-and-Out Barrier Call Option", "equation": "V_{do} = S N(d_1) - K e^{-rT} N(d_2) - \\left(\\frac{S}{H}\\right)^\\lambda \\left[ S N(d_3) - K e^{-rT} N(d_4) \\right]", "category": "Exotic Options", "tags": ["barrier-option", "knock-out", "down-and-out", "reflection-principle", "first-passage-time", "path-dependent", "image-method", "boundary-conditions", "continuous-monitoring", "vanilla-subtraction", "hitting-probability"], "note": "## Equation Variables\nThe down-and-out barrier option prices a call that becomes worthless if the underlying price touches or falls below a specified barrier level during the option's lifetime. The elegant solution uses the reflection principle to adjust the vanilla price.\n\n- **$V_{do}$**: Price of the down-and-out call option\n- **$S$**: Current spot price of the underlying asset\n- **$K$**: Strike price of the option\n- **$H$**: Barrier level, set below the current spot price for down-and-out options\n- **$r$**: Risk-free interest rate\n- **$T$**: Time to maturity\n- **$\\sigma$**: Volatility of the underlying\n- **$\\lambda$**: Exponent parameter defined as $\\lambda = \\frac{2r}{\\sigma^2} - 1$\n- **$N(\\cdot)$**: Standard normal cumulative distribution function\n\nThe auxiliary terms $d_1, d_2, d_3, d_4$ are computed as:\n$$d_1 = \\frac{\\ln(S/K) + (r + \\sigma^2/2)T}{\\sigma\\sqrt{T}}, \\quad d_2 = d_1 - \\sigma\\sqrt{T}$$\n$$d_3 = \\frac{\\ln(H^2/SK) + (r + \\sigma^2/2)T}{\\sigma\\sqrt{T}}, \\quad d_4 = d_3 - \\sigma\\sqrt{T}$$\n\n## Interpretation\nThe down-and-out call price equals the vanilla Black-Scholes call price minus an adjustment term that accounts for barrier hit scenarios. The reflection principle shows that the probability of hitting the barrier and the corresponding adjustment factor can be computed analytically.\n\nThe adjustment term $\\left(\\frac{S}{H}\\right)^\\lambda$ measures the barrier's proximity to spot: closer barriers create larger adjustments (higher probability of knock-out). When $\\lambda > 0$ (positive drift environments), the barrier adjustment is amplified; when $\\lambda < 0$, it is attenuated.\n\nThe terms $d_3$ and $d_4$ use the barrier-crossing condition $H^2/SK$, which reflects the image technique: the price adjustment equals the value of a vanilla option on an \"image\" asset priced at $H^2/S$.\n\nKey boundary conditions:\n- If $H \\ge S$, the option is worthless (already knocked out)\n- If $H \\to 0$, the option converges to the vanilla Black-Scholes call\n- If $H = K$, the option equals vanilla call minus a digital call\n\n## Assumptions\n- Continuous monitoring of the barrier without gaps\n- Barrier is observable but not tradeable\n- No dividends paid during the option life (can be incorporated)\n- Geometric Brownian motion dynamics for the underlying\n- European exercise (no early redemption features)\n- No rebate upon knock-out (rebate is calculated separately)\n\n## Practical Use\nDown-and-out options are widely used in structured products and hedging strategies where protection against large downward moves is desired at reduced cost. The lower premium makes them attractive for risk-averse investors who expect the underlying to remain above the barrier.\n\nCommon applications include:\n- Capital-protected notes with barrier features\n- Autocallable securities that deactivate if underlying falls\n- Hedging strategies in volatile markets where tail protection is prioritized\n\nDiscrete barrier monitoring requires adjustment using approaches by Broadie, Glasserman, and Kou, which account for the probability of barrier crossings between observation dates."}
{"title": "Up-and-In Barrier Put Option", "equation": "V_{ui} = -S N(-d_1) + K e^{-rT} N(-d_2) + \\left(\\frac{S}{H}\\right)^\\lambda \\left[ S N(-d_3) + K e^{-rT} N(-d_4) \\right]", "category": "Exotic Options", "tags": ["barrier-option", "knock-in", "up-and-in", "first-passage-time", "reflection-principle", "activation-trigger", "put-option", "barrier-parity,image-method", "continuous-monitoring", "upside-participation", "conditional-activation"], "note": "## Equation Variables\nThe up-and-in barrier put option activates only if the underlying price rises to touch a specified barrier level during the option's lifetime, providing upside participation with conditional activation.\n\n- **$V_{ui}$**: Price of the up-and-in put option\n- **$S$**: Current spot price of the underlying asset\n- **$K$**: Strike price of the option\n- **$H$**: Barrier level, set above the current spot price for up-and-in options\n- **$r$**: Risk-free interest rate\n- **$T$**: Time to maturity\n- **$\\sigma$**: Volatility of the underlying\n- **$\\lambda = \\frac{2r}{\\sigma^2} - 1$**: Exponent parameter from barrier option theory\n- **$N(-\\cdot)$**: Survival probability for upward barrier movements\n\nThe auxiliary terms mirror the down-and-out formulation with sign adjustments:\n$$d_1 = \\frac{\\ln(S/K) + (r + \\sigma^2/2)T}{\\sigma\\sqrt{T}}, \\quad d_2 = d_1 - \\sigma\\sqrt{T}$$\n$$d_3 = \\frac{\\ln(SK/H^2) + (r + \\sigma^2/2)T}{\\sigma\\sqrt{T}}, \\quad d_4 = d_3 - \\sigma\\sqrt{T}$$\n\n## Interpretation\nThe up-and-in put becomes a standard put option only if the underlying rises to touch the barrier $H$. Before barrier activation, the option has no value; after activation, it behaves like a vanilla put with remaining time to maturity.\n\nThe sign changes from the call formula reflect the put payoff structure. The negative terms $N(-d_1)$ and $N(-d_2)$ represent scenarios where the option would expire in-the-money without barrier hit.\n\nA crucial parity relationship connects all barrier option types:\n$$V_{ui} + V_{uo} = V_{vanilla} \\quad \\text{(calls)}$$\n$$V_{ui} + V_{di} = V_{put} \\quad \\text{(puts)}$$\n\nThis parity enables consistent pricing across barrier combinations: once any two are known, the others can be derived. It also simplifies hedging, as barrier option portfolios can be decomposed into vanilla options with barrier adjustments.\n\nThe $(S/H)^\\lambda$ term again captures barrier proximity, but for up-and-in options, higher barriers (farther from spot) result in lower activation probability and lower price.\n\n## Assumptions\n- Continuous monitoring of the upward barrier\n- Barrier is above the initial spot price\n- Risk-neutral pricing framework\n- Geometric Brownian motion dynamics\n- No dividends during the option life\n- European exercise features\n\n## Practical Use\nUp-and-in options are used in structured products where upside participation is desired with conditional activation based on market rally. Common in autocallable notes and barrier reverse convertibles where coupon payment or principal protection depends on price movements.\n\nThe parity relationships make up-and-in options particularly useful for:\n- Hedging barrier option book positions\n- Creating synthetic barrier features from vanilla options\n- Risk decomposition for portfolio management\n\nWhen combined with knock-out options, up-and-in options enable creation of \"window barriers\" that are only active during specific periods."}
{"title": "Barrier Option Rebate Valuation", "equation": "V_{rebate} = R \\cdot \\mathbb{E}[e^{-r\\tau}] \\quad \\text{where} \\quad \\tau = \\min(T, \\tau_{hit})", "category": "Exotic Options", "tags": ["barrier-rebate", "knock-out-payout", "first-passage-probability", "contingent-payment", "consolation-payment", "expected-discounting", "rebate-timing", "partial-barrier,rebate-structure", "hit-probability", "barrier-hit"], "note": "## Equation Variables\nBarrier option rebates provide cash payments upon barrier hit, compensating holders for the loss of option value when knock-in or knock-out conditions are triggered.\n\n- **$V_{rebate}$**: Present value of the barrier rebate\n- **$R$**: Fixed rebate amount paid upon barrier hit\n- **$\\tau$**: First-passage time to barrier, capped at maturity $T$\n- **$\\tau_{hit}$**: First time the underlying touches the barrier\n- **$r$**: Risk-free interest rate for discounting\n- **$\\mathbb{E}[\\cdot]$**: Risk-neutral expectation over first-passage time distribution\n\nFor constant rebate paid at the moment of barrier hit:\n$$V_{rebate} = R \\cdot P(\\text{hit before } T) \\cdot e^{-r \\cdot E[\\tau | \\text{hit}]}$$\n\n## Interpretation\nThe rebate value equals the discounted expected value of the contingent payment. The expectation integrates over the first-passage time distribution under the risk-neutral measure, weighting by both the probability of hitting and the timing of the hit.\n\nThe probability of hitting a barrier depends on barrier type and position:\n- **Down barrier** ($H < S$): Higher hit probability with lower barriers\n- **Up barrier** ($H > S$): Lower hit probability with higher barriers\n\nFor continuous barriers under GBM, the hit probability has closed form:\n$$P(\\text{down barrier hit}) = \\left(\\frac{S}{H}\\right)^{\\lambda-1} N(y) + \\left(\\frac{S}{H}\\right)^{\\lambda+1} N(y - 2\\lambda h/\\sqrt{T})$$\n\nwhere $y = \\frac{\\ln(S/H) + (r - q - \\sigma^2/2)T}{\\sigma\\sqrt{T}}$ and $h = \\ln(S/H)$.\n\nRebate timing affects pricing:\n- **Paid at hit**: Higher value (earlier payment)\n- **Paid at maturity**: Lower value (delayed payment)\n- **Partial rebates**: Proportional payments at specified conditions\n\n## Assumptions\n- Barrier monitoring is continuous (discrete requires adjustment)\n- Rebate amount is fixed and known at initiation\n- First-passage time follows GBM dynamics\n- Risk-neutral expectation accounts for early payment\n\n## Practical Use\nRebates are essential features in barrier options for structured products:\n- Provide consolation when barrier conditions are met\n- Reduce the cost of barrier protection\n- Enable creation of partial barrier features\n\nCommon rebate structures include:\n- Full rebate: Pays the full option premium upon knock-out\n- Partial rebate: Pays a fraction of the option value\n- Tiered rebate: Different rebates based on barrier proximity or timing\n\nRebates can also be time-varying, with higher rebates for earlier hits, creating incentives for barrier crossing at specific times."}
{"title": "Floating Strike Lookback Call", "equation": "V = S_0 N(a_1) - S_0 e^{-rT} N(a_2) - S_0 e^{-qT} N(a_3) + S_0 e^{-qT} N(a_4)", "category": "Exotic Options", "tags": ["lookback-option", "floating-strike", "minimum-price", "path-dependent", "continuous-monitoring", "optimal-timing,entry-point,maximum-payoff", "path-optimization", "replication-strategy", "currency-hedging", "dynamic-hedging"], "note": "## Equation Variables\nThe floating-strike lookback call maximizes payoff by allowing exercise at the minimum price observed during the option's life, effectively capturing the optimal entry point.\n\n- **$V$**: Price of the floating-strike lookback call\n- **$S_0$**: Initial spot price of the underlying\n- **$S_{min}$**: Minimum price of the underlying over $[0, T]$\n- **$r$**: Risk-free interest rate\n- **$q$**: Continuous dividend yield\n- **$T$**: Time to maturity\n- **$N(\\cdot)$**: Standard normal cumulative distribution function\n\nThe auxiliary terms capture the joint distribution of $(S_T, S_{min})$:\n$$a_1 = \\frac{\\ln(S_0/S_{min}) + (r - q + \\sigma^2/2)T}{\\sigma\\sqrt{T}}, \\quad a_2 = a_1 - \\sigma\\sqrt{T}$$\n$$a_3 = \\frac{\\ln(S_0/S_{min}) - (r - q + \\sigma^2/2)T}{\\sigma\\sqrt{T}}, \\quad a_4 = a_3 - \\sigma\\sqrt{T}$$\n\n## Interpretation\nThe floating-strike lookback call payoff is $\\max(S_T - S_{min}, 0)$, allowing the holder to purchase the underlying at the lowest observed price and sell at the terminal price. This creates the maximum possible payoff for a call option on a single asset.\n\nThe pricing formula uses the joint distribution of terminal price and minimum, which is known for Brownian motion. The four terms account for different scenarios of terminal price relative to the minimum.\n\nIntuitively:\n- $S_0 N(a_1)$: Present value if exercised at terminal price\n- $-S_0 e^{-rT} N(a_2)$: Adjustment for discounting and minimum effect\n- $-S_0 e^{-qT} N(a_3)$: Dividend adjustment for minimum observation\n- $+S_0 e^{-qT} N(a_4)$: Present value of dividend-adjusted payoff\n\nThe lookback call is always more expensive than the corresponding vanilla call because $S_{min} \\le S_T$ always, making $(S_T - S_{min})^+ \\ge (S_T - K)^+$ for any $K$.\n\nFor the perpetual lookback call (no maturity), the price simplifies to $V = \\frac{S_0}{1 - \\lambda}$ where $\\lambda = \\frac{2r}{\\sigma^2}$.\n\n## Assumptions\n- Continuous observation of the minimum price\n- Geometric Brownian motion dynamics\n- Risk-neutral pricing framework\n- European-style exercise (no early redemption)\n- Dividend yield $q$ affects the minimum observation value\n\n## Practical Use\nLookback options are used by investors seeking optimal timing for market entry:\n- Hedging against adverse price movements with uncertain timing\n- Capturing upside while minimizing downside through optimal entry\n- Currency markets where optimal exchange rate timing matters\n\nThe floating-strike lookback can be decomposed into a strip of forward-start options or replicated dynamically through continuous rebalancing. Semi-static hedging approaches use portfolios of European options with varying strikes."}
{"title": "Fixed Strike Lookback Put", "equation": "V = K e^{-rT} N(b_1) - K e^{-rT} e^{-qT} N(b_2) + S_0 e^{-qT} N(b_3)", "category": "Exotic Options", "tags": ["lookback-option", "fixed-strike", "maximum-price", "path-dependent", "continuous-monitoring", "upside-protection", "sale-optimization", "joint-distribution", "optimal-exercise", "commodity-hedging", "replication"], "note": "## Equation Variables\nThe fixed strike lookback put maximizes payoff by allowing exercise at the maximum price observed during the option's life, effectively capturing the optimal exit point for selling assets.\n\n- **$V$**: Price of the fixed strike lookback put\n- **$K$**: Fixed strike price of the option\n- **$S_0$**: Initial spot price of the underlying\n- **$S_{max}$**: Maximum price of the underlying over $[0, T]$\n- **$r$**: Risk-free interest rate\n- **$q$**: Continuous dividend yield\n- **$T$**: Time to maturity\n- **$N(\\cdot)$**: Standard normal cumulative distribution function\n\nThe auxiliary terms use the maximum distribution:\n$$b_1 = \\frac{\\ln(S_0/K) - (r - q - \\sigma^2/2)T}{\\sigma\\sqrt{T}}, \\quad b_2 = b_1 - \\sigma\\sqrt{T}$$\n$$b_3 = \\frac{\\ln(S_0/K) + (r - q + \\sigma^2/2)T}{\\sigma\\sqrt{T}}$$\n\n## Interpretation\nThe fixed strike lookback put payoff is $\\max(K - S_{max}, 0)$, allowing the holder to sell the underlying at the highest observed price. This creates the maximum possible put payoff by eliminating the risk of selling at suboptimal prices.\n\nThe reflection principle for the maximum of Brownian motion enables the analytical pricing formula. The three terms correspond to:\n1. Present value of strike if expired in-the-money: $K e^{-rT} N(b_1)$\n2. Adjustment for dividends and maximum effect: $-K e^{-rT} e^{-qT} N(b_2)$\n3. Present value of underlying if expired in-the-money: $S_0 e^{-qT} N(b_3)$\n\nThe fixed strike lookback is more expensive than the floating strike lookback because the payoff $K - S_{max}$ can extend beyond the range of observed prices, while $S_T - S_{min}$ is bounded by $S_T$.\n\nWhen dividends are present ($q > 0$), the holder benefits differently:\n- For calls: Dividends reduce the minimum observation value\n- For puts: Dividends reduce the maximum observation benefit\n\n## Assumptions\n- Continuous observation of the maximum price\n- Geometric Brownian motion dynamics\n- Risk-neutral pricing framework\n- European exercise features (no early redemption)\n- Dividend yield affects maximum observation value\n\n## Practical Use\nFixed strike lookback puts are used by producers and investors seeking to lock in maximum sale prices:\n- Commodity producers hedging peak price exposure\n- Asset managers protecting against upside shortfall\n- Investors wanting to capture optimal market exits\n\nThe lookback put can be decomposed into a portfolio of European puts or replicated through dynamic hedging. Semi-static approaches use option strips with varying strikes and maturities.\n\nFor perpetual lookback puts (no maturity), the price is $V = \\frac{K}{1 - \\lambda} - \\frac{S_0}{\\lambda}$ where $\\lambda = \\frac{2r}{\\sigma^2}$."}
{"title": "Compound Option Call on Call", "equation": "V = C(S^*, K_2, T_2) \\quad \\text{where} \\quad S^* = C(S_T, K_1, T_1)", "category": "Exotic Options", "tags": ["compound-option", "option-on-option", "contingent-claim", "two-stage-exercise", "leveraged-exposure", "volatility-of-volatility", "underlying-option", "exercise-decision", "hierarchical-option", "multi-stage-payoff"], "note": "## Equation Variables\nA compound option is an option on an option, giving the holder the right to acquire an underlying option at a specified price at a future date. The call on call specifically provides rights to a call option.\n\n- **$V$**: Price of the compound option (call on call)\n- **$S^*$**: Price of the underlying call option at the compound expiration date\n- **$K_2$**: Strike price of the compound option (price paid for the underlying call)\n- **$T_1$**: Time to compound option expiration (decision date)\n- **$T_2$**: Time to underlying call expiration ($T_2 > T_1$)\n- **$K_1$**: Strike price of the underlying call option\n- **$S_T$**: Price of the underlying asset at time $T_1$\n\nThe compound option payoff at $T_1$ is:\n$$V_{T_1} = \\max(C(S_{T_1}, K_1, T_2 - T_1) - K_2, 0)$$\n\n## Interpretation\nThe compound option gives the holder flexibility: at $T_1$, they observe $S_{T_1}$ and can evaluate whether exercising the compound to acquire the underlying call makes economic sense. This creates a two-layer optionality that depends on both the underlying asset and the underlying option value.\n\nThe compound option can be valued through risk-neutral expectation:\n$$V = e^{-rT_1} \\mathbb{E}[\\max(C(S_{T_1}, K_1, T_2 - T_1) - K_2, 0)^+]$$\n\nThis expectation requires integrating over the distribution of $S_{T_1}$ and computing the conditional value of the underlying call at each $S_{T_1}$. The correlation between $S_{T_1}$ and the underlying call value creates complexity.\n\nThe holder exercises the compound if:\n$$C(S_{T_1}, K_1, T_2 - T_1) > K_2$$\n\nThis condition depends on:\n- The terminal asset price $S_{T_1}$\n- Time remaining on the underlying call: $T_2 - T_1$\n- Volatility of the underlying asset\n- Interest rates and dividends\n\n## Assumptions\n- European-style exercise for both compound and underlying options\n- Known correlation between asset price and option value\n- Geometric Brownian motion for the underlying\n- Risk-neutral pricing framework\n- Strike $K_2$ is set at initiation\n\n## Practical Use\nCompound options provide sophisticated exposure to volatility of volatility:\n- Hedging options positions with uncertain timing\n- Leveraged exposure to directional moves\n- Capturing views on future option premiums\n\nCommon applications include:\n- Swaptions (options on interest rate swaps)\n- Options on credit default swap spreads\n- Contingent value rights in M&A transactions\n\nThe next equation (Geske's formula) provides the closed-form solution for call-on-call options."}
{"title": "Compound Option Geske Formula", "equation": "V = S_0 M(h_1, k_1, \\rho) - K_2 e^{-rT_2} M(h_2, k_2, \\rho) - K_1 e^{-rT_1} N(h_3)", "category": "Exotic Options", "tags": ["geske-formula", "compound-option", "bivariate-normal", "closed-form-solution", "joint-distribution", "correlation-adjustment", "option-on-option", "analytical-solution", "multi-factor-dependency", "risk-neutral-pricing", "merton-extension"], "note": "## Equation Variables\nGeske's formula provides the exact closed-form solution for compound options under Black-Scholes assumptions, requiring bivariate normal integration to capture the joint distribution of asset prices at two maturities.\n\n- **$V$**: Price of the call-on-call compound option\n- **$S_0$**: Initial spot price of the underlying asset\n- **$K_1$**: Strike price of the underlying call option\n- **$K_2$**: Strike price of the compound option\n- **$T_1$**: Time to compound option expiration\n- **$T_2$**: Time to underlying call expiration ($T_2 > T_1$)\n- **$r$**: Risk-free interest rate\n- **$q$**: Continuous dividend yield\n- **$\\sigma$**: Volatility of the underlying\n- **$\\rho = \\sqrt{T_1/T_2}$**: Correlation between $S_{T_1}$ and $S_{T_2}$\n- **$M(\\cdot, \\cdot, \\cdot)$**: Bivariate normal cumulative distribution function\n\nThe auxiliary terms are:\n$$h_1 = \\frac{\\ln(S_0/K_1) + (r - q + \\sigma^2/2)T_1}{\\sigma\\sqrt{T_1}}, \\quad h_2 = h_1 - \\sigma\\sqrt{T_1}$$\n$$h_3 = \\frac{\\ln(S_0/K_1) - (r - q - \\sigma^2/2)T_1}{\\sigma\\sqrt{T_1}}$$\n$$k_1 = \\frac{\\ln(S_0/K_2) + (r - q + \\sigma^2/2)T_2}{\\sigma\\sqrt{T_2}}, \\quad k_2 = k_1 - \\sigma\\sqrt{T_2}$$\n\n## Interpretation\nGeske (1979) derived the elegant closed-form solution by recognizing that the compound option payoff depends on the joint distribution of $(S_{T_1}, S_{T_2})$, which follows a bivariate lognormal distribution under Black-Scholes.\n\nThe three terms correspond to:\n1. **Value if both options are exercised**: $S_0 M(h_1, k_1, \\rho)$ - Present value of receiving $S_{T_2}$ if both compound and underlying are ITM\n2. **Cost of compound strike**: $-K_2 e^{-rT_2} M(h_2, k_2, \\rho)$ - Present value of paying $K_2$ if compound is exercised and underlying is ITM\n3. **Cost of underlying strike**: $-K_1 e^{-rT_1} N(h_3)$ - Present value of paying $K_1$ at $T_1$ if compound is exercised\n\nThe bivariate normal $M(h, k, \\rho)$ captures the probability that:\n- The underlying asset is above $K_1$ at $T_1$ (for compound exercise)\n- The underlying asset is above $K_2$ at $T_2$ (for underlying call value)\n\nThe correlation $\\rho = \\sqrt{T_1/T_2}$ accounts for the path dependence: knowing $S_{T_1}$ provides information about the distribution of $S_{T_2}$.\n\n## Assumptions\n- European exercise for both compound and underlying options\n- Geometric Brownian motion dynamics\n- Risk-neutral pricing framework\n- Constant volatility and interest rates\n- No dividends (can be incorporated via drift adjustment)\n\n## Practical Use\nGeske's formula enables exact pricing of compound options without numerical integration, forming the foundation for:\n- Swaption pricing (options on interest rate swaps)\n- Options on bonds (contingent coupon bonds)\n- Contingent value rights in M&A transactions\n- Credit derivatives with optionality features\n\nThe formula requires bivariate normal integration, available in standard numerical libraries. Extensions handle American-style exercise, stochastic volatility, and jump diffusion dynamics."}
{"title": "Chooser Option Price Formula", "equation": "V_{choose} = e^{-rT_c} C(S_0, K, T - T_c) + e^{-rT_p} P(S_0, K, T - T_p)", "category": "Exotic Options", "tags": ["chooser-option", "choice-right", "contingent-choice", "flexible-payoff", "call-or-put", "choice-date", "optionality", "forward-start-hybrid", "symmetric-chooser", "asymmetric-chooser", "path-dependent"], "note": "## Equation Variables\nA chooser option gives the holder the right to select, at a specified date, whether the option will become a call or a put. This flexibility creates value when the investor is uncertain about future market direction.\n\n- **$V_{choose}$**: Price of the chooser option\n- **$S_0$**: Initial spot price of the underlying asset\n- **$K$**: Strike price (typically identical for both call and put choices)\n- **$T$**: Final maturity of the option after choice\n- **$T_c$**: Time at which the choice is made\n- **$T_p$**: Time to put expiration after choice (often $T_p = T - T_c$)\n- **$C(S_0, K, \\tau)$**: Call price with maturity $\\tau = T - T_c$\n- **$P(S_0, K, \\tau)$**: Put price with maturity $\\tau = T - T_p$\n- **$e^{-rT_c}, e^{-rT_p}$**: Discount factors for payment timing\n\nFor a symmetric chooser where both call and put have the same remaining maturity:\n$$V_{choose} = e^{-rT_c} \\max(C(S_0, K, T - T_c), P(S_0, K, T - T_c))$$\n\n## Interpretation\nAt the choice date $T_c$, the holder compares the values of the potential call and put and selects the more valuable one. The initial price equals the present value of this expected payoff.\n\nThe decomposition into call and put components works because:\n1. At $T_c$, the holder receives a call worth $C(S_{T_c}, K, T - T_c)$ OR a put worth $P(S_{T_c}, K, T - T_c)$\n2. The value at $T_0$ is the risk-neutral expectation of this payoff\n3. By put-call symmetry, this simplifies to the given formula\n\nFor symmetric choosers (same remaining maturity for call and put):\n- At high spot prices, the call is more valuable\n- At low spot prices, the put is more valuable\n- Near-the-money, the put value dominates due to forward premium\n\nCommon chooser variants include:\n- **Simple chooser**: Choice at $T/2$, becomes call or put to $T$\n- **Complex chooser**: Different strikes or maturities after choice\n- **Progressive chooser**: Multiple choice dates with expanding rights\n\n## Assumptions\n- European exercise at the choice date\n- Same strike for call and put after choice\n- Geometric Brownian motion dynamics\n- Risk-neutral pricing framework\n- Known dividend yield and interest rates\n\n## Practical Use\nChooser options are used when investors face uncertainty about market direction:\n- Hedging scenarios with unknown catalyst timing\n- Speculation on volatility with uncertain directional bias\n- Structured products with flexible payoff profiles\n\nThe choice date creates a form of volatility exposure: the holder benefits from large moves in either direction (as long as one option becomes valuable).\n\nChooser options can be decomposed into standard options:\n$$V_{choose} = C(S_0, K, T) + P(S_0, K, T_c)$$"}
{"title": "Cash-or-Nothing Digital Option", "equation": "V = e^{-rT} Q N(d_2)", "category": "Exotic Options", "tags": ["digital-option", "binary-option", "cash-or-nothing", "fixed-payoff", "indicator-function", "probability-pricing", "binary-event", "hedging-building-block", "greeks-relationship", "call-spread", "event-speculation"], "note": "## Equation Variables\nThe cash-or-nothing digital option pays a fixed amount if the underlying price exceeds a barrier level at expiration, providing simple binary exposure to directional moves.\n\n- **$V$**: Price of the cash-or-nothing digital option\n- **$S$**: Current spot price of the underlying\n- **$K$**: Barrier/strike level that determines payoff\n- **$r$**: Risk-free interest rate\n- **$T$**: Time to maturity\n- **$\\sigma$**: Volatility of the underlying\n- **$Q$**: Fixed cash payoff paid if the option expires in-the-money\n- **$N(d_2)$**: Standard normal cumulative distribution function\n\nThe $d_2$ term is:\n$$d_2 = \\frac{\\ln(S/K) + (r - \\sigma^2/2)T}{\\sigma\\sqrt{T}}$$\n\n## Interpretation\nThe cash-or-nothing digital option payoff is binary: $V_T = Q \\cdot \\mathbf{1}_{\\{S_T > K\\}}$. This makes it a pure bet on whether the underlying will exceed the barrier at expiration.\n\nThe pricing formula shows that digital options price the risk-neutral probability of an event:\n$$V = e^{-rT} \\mathbb{E}[Q \\cdot \\mathbf{1}_{\\{S_T > K\\}}] = e^{-rT} Q \\cdot P(S_T > K)$$\n\nThe term $N(d_2)$ is exactly $P(S_T > K)$ under the risk-neutral measure with Black-Scholes dynamics. This is a fundamental result: digital options are probability-measuring instruments.\n\nThe relationship with vanilla options provides crucial hedging insight:\n$$\\frac{\\partial C}{\\partial K} = -e^{-rT} N(d_2) = -V_{digital}$$\n\nThe digital option equals the derivative of the vanilla call with respect to strike. This allows replication: a tight call spread approximates a digital payoff.\n\nFor put digital options, use $N(-d_2)$ with appropriate signs:\n$$V_{put} = e^{-rT} Q N(-d_2) = e^{-rT} Q (1 - N(d_2))$$\n\n## Assumptions\n- Binary payoff at single expiration date\n- Geometric Brownian motion dynamics\n- Risk-neutral pricing framework\n- No dividends (can be incorporated)\n- Barrier level is observed at expiration only\n\n## Practical Use\nCash-or-nothing digital options are fundamental building blocks:\n- Speculation on binary events (election outcomes, M&A announcements)\n- Hedging binary risks (credit events, default triggers)\n- Creating complex payoff structures through option strips\n\nReplication strategies:\n- Narrow call spread: $(C(K-\\epsilon) - C(K+\\epsilon)) / (2\\epsilon) \\approx V_{digital}$\n- Static replication with vanilla options\n- Dynamic hedging through delta management\n\nCommon digital variants:\n- Asset-or-nothing: Pays $S_T$ if $S_T > K$\n- Supershare: Pays fraction of asset in price range\n- Binary range: Pays if price stays in band"}
{"title": "Asset-or-Nothing Digital Option", "equation": "V = S_0 e^{-qT} N(d_1)", "category": "Exotic Options", "tags": ["digital-option", "asset-or-nothing", "variable-payoff", "binary-choice", "conditional-expectation", "building-block", "replication", "vanilla-decomposition", "payoff-structure", "forward-integration", "contingent-delivery"], "note": "## Equation Variables\nThe asset-or-nothing digital option pays the underlying asset value if it exceeds the barrier level, providing variable rather than fixed payoff based on the asset's terminal price.\n\n- **$V$**: Price of the asset-or-nothing digital option\n- **$S_0$**: Initial spot price of the underlying\n- **$K$**: Barrier/strike level for payoff activation\n- **$r$**: Risk-free interest rate\n- **$q$**: Continuous dividend yield\n- **$T$**: Time to maturity\n- **$\\sigma$**: Volatility of the underlying\n- **$N(d_1)$**: Standard normal cumulative distribution function\n\nThe $d_1$ term is:\n$$d_1 = \\frac{\\ln(S_0/K) + (r - q + \\sigma^2/2)T}{\\sigma\\sqrt{T}}$$\n\n## Interpretation\nThe asset-or-nothing digital option payoff is $V_T = S_T \\cdot \\mathbf{1}_{\\{S_T > K\\}}$. Unlike cash-or-nothing, the payoff scales with the underlying price when in-the-money.\n\nThe pricing formula derives from:\n$$V = e^{-rT} \\mathbb{E}[S_T \\cdot \\mathbf{1}_{\\{S_T > K\\}}] = e^{-rT} \\int_K^\\infty S_T f(S_T) dS_T$$\n\nUnder Black-Scholes, this conditional expectation simplifies to $S_0 e^{-qT} N(d_1)$, where $N(d_1)$ represents the risk-neutral probability-weighted value of the asset given it exceeds $K$.\n\nThe key insight is that $N(d_1)$ is not the raw probability $P(S_T > K) = N(d_2)$, but the conditional expectation:\n$$N(d_1) = \\mathbb{E}[e^{-qT} \\mathbf{1}_{\\{S_T > K\\}} | \\mathcal{F}_0]$$\n\nThis creates a decomposition of vanilla options:\n$$C = V_{asset-or-nothing} - K e^{-rT} V_{cash-or-nothing}$$\n$$C = S_0 e^{-qT} N(d_1) - K e^{-rT} N(d_2)$$\n\nThis Black-Scholes decomposition shows how complex payoffs can be built from digital building blocks.\n\n## Assumptions\n- Binary payoff at expiration\n- Geometric Brownian motion dynamics\n- Risk-neutral pricing framework\n- Dividend yield $q$ affects the conditional expectation\n- Barrier level observed at expiration\n\n## Practical Use\nAsset-or-nothing options provide variable exposure to upside moves:\n- Building block for complex structured products\n- Replication of vanilla options through digital decomposition\n- Hedging with forward integration features\n\nCommon applications:\n- Creating payoff profiles with discontinuities\n- Hedging binary events with scaled exposure\n- Constructing target redemption features\n\nThe decomposition $C = S e^{-qT} N(d_1) - K e^{-rT} N(d_2)$ is fundamental to understanding option Greeks and hedging behavior."}
{"title": "Parisian Option Time-in-Barrier", "equation": "V \\propto P\\left(\\int_0^T \\mathbf{1}_{\\{S_t \\in B\\}} dt > \\Delta\\right)", "category": "Exotic Options", "tags": ["parisian-option", "time-in-barrier", "duration-requirement", "consecutive-time", "first-passage-time", "barrier-threshold", "double-barrier", "accidental-activation", "hitting-time-distribution", "conditional-exercise", "robust-barrier"], "note": "## Equation Variables\nParisian options generalize standard barrier options by requiring the underlying to spend a specified duration $\\Delta$ in a barrier region before activation, preventing accidental triggers from brief price spikes.\n\n- **$V$**: Price of the Parisian option\n- **$S_t$**: Underlying price at time $t$\n- **$B$**: Barrier region (e.g., $S_t < L$ for down-barrier, $S_t > U$ for up-barrier)\n- **$\\Delta$**: Required consecutive time spent in barrier region\n- **$T$**: Time to maturity\n- **$\\tau$**: First passage time to barrier boundary\n- **$\\mathbf{1}_{\\cdot}$**: Indicator function for barrier region occupancy\n\nThe option activates if:\n$$\\tau_B = \\min\\{t: S_t \\text{ exits barrier } B\\} > T \\quad \\text{or}$$\n$$\\int_0^T \\mathbf{1}_{\\{S_t \\in B\\}} dt > \\Delta \\quad \\text{consecutively}$$\n\n## Interpretation\nParisian options address a key weakness of standard barrier options: sensitivity to brief barrier touches caused by market noise or temporary volatility. By requiring consecutive time in the barrier region, Parisiennes provide more robust activation conditions.\n\nThe required duration $\\Delta$ creates a buffer against accidental triggers. For example, if $\\Delta = 5$ days, a single day's dip below the barrier doesn't activate the option; only sustained breach triggers activation.\n\nThe pricing requires computing the distribution of first passage time with duration constraint, which involves complex hitting time distributions for Brownian motion.\n\nFor continuous monitoring, the joint density of (first passage time, duration above threshold) can be expressed in terms of Airy functions or computed via numerical methods.\n\nVariants include:\n- **Standard Parisian**: Single duration requirement\n- **Double Parisian**: Requires time in both up and down barriers\n- **Partial Parisian**: Duration-weighted activation probabilities\n\n## Assumptions\n- Continuous monitoring of barrier duration\n- Consecutive (not cumulative) time requirement\n- Geometric Brownian motion dynamics\n- Barrier region is contiguous\n- Risk-neutral pricing framework\n\n## Practical Use\nParisian options are used when protection against brief spikes is essential:\n- Currency markets where temporary breaches occur during volatility\n- Equity markets during earnings season or announcements\n- Commodity markets subject to weather-related price swings\n\nThe duration requirement creates more predictable activation:\n- More robust than standard barriers\n- Cheaper than perpetual barriers\n- Provides controlled sensitivity to barrier proximity\n\nPricing requires numerical methods: Monte Carlo simulation with Brownian bridge techniques or finite difference solutions to partial differential equations."}
{"title": "Parasian Option Cumulative Barrier", "equation": "V \\propto P\\left(\\int_0^T \\mathbf{1}_{\\{S_t \\in B\\}} dt > \\Delta\\right)", "category": "Exotic Options", "tags": ["parasian-option", "cumulative-time", "time-weighted", "barrier-activation", "path-integral", "multiple-breach", "soft-knockin", "duration-accumulation", "barrier-region", "arc-sine-law", "conditional-activation"], "note": "## Equation Variables\nParasian options generalize Parisian options by requiring cumulative (not consecutive) time in the barrier region, allowing activation through multiple brief excursions that accumulate to the threshold duration.\n\n- **$V$**: Price of the Parasian option\n- **$S_t$**: Underlying price at time $t$\n- **$B$**: Barrier region defined by boundaries\n- **$\\Delta$**: Required cumulative time in barrier\n- **$T$**: Time to maturity\n- **$\\int_0^T \\mathbf{1}_{\\{S_t \\in B\\}} dt$**: Total time spent in barrier region\n\nThe activation condition is:\n$$T_B = \\int_0^T \\mathbf{1}_{\\{S_t \\in B\\}} dt > \\Delta$$\n\n## Interpretation\nParasian options provide a \"soft\" barrier activation mechanism where multiple brief excursions into the barrier region accumulate toward the trigger. This differs from Parisian options which require consecutive time.\n\nThe cumulative time-in-barrier follows known distributions under Brownian motion. The arc-sine law for Brownian motion states that the proportion of time spent above a level has a specific distribution with heavy tails.\n\nThis creates an interesting property: the distribution of cumulative barrier time is concentrated at extremes—either very little time or a lot of time—with less probability mass near the mean. This affects pricing significantly.\n\nComparison of barrier types:\n- **Standard knock-in**: Activates on first touch\n- **Parisian**: Activates on $\\Delta$ consecutive time\n- **Parasian**: Activates on $\\Delta$ cumulative time\n\nParasian options are priced between Parisian and standard knock-ins:\n- Easier to activate than Parisian (cumulative counts)\n- Harder to activate than standard knock-in (need duration)\n\n## Assumptions\n- Continuous monitoring of cumulative time\n- Cumulative (not consecutive) time accumulation\n- Geometric Brownian motion dynamics\n- Barrier region boundaries are fixed\n- Risk-neutral pricing framework\n\n## Practical Use\nParasian options are used when multiple brief breaches should count:\n- Markets with frequent but short-lived price excursions\n- Structured products with step-up features\n- Hedging scenarios with gradual barrier approach\n\nCommon applications:\n- Soft barrier features in structured notes\n- Step-up coupons based on time-in-regions\n- Conditional participation features\n\nThe cumulative nature makes Parisians suitable for creating smoother activation profiles than standard Parisian options."}
{"title": "Basket Option Price Approximation", "equation": "V \\approx \\sum_{i=1}^n w_i \\cdot \\text{BS}(S_i, K, T, r, q_i, \\sigma_i) \\quad \\text{but with portfolio volatility}", "category": "Exotic Options", "tags": ["basket-option", "multi-asset", "portfolio-option", "correlation", "approximation-method", "portfolio-volatility", "multivariate-lognormal", "moment-matching", "index-option", "currency-basket", "correlated-assets", "hedging-basket"], "note": "## Equation Variables\nBasket options provide exposure to a weighted portfolio of assets, with pricing requiring the multivariate distribution of basket components under correlation.\n\n- **$V$**: Approximate price of the basket option\n- **$w_i$**: Weights of assets in the basket ($\\sum w_i = 1$)\n- **$S_i$**: Spot prices of individual underlying assets\n- **$K$**: Strike price for the basket level\n- **$r$**: Risk-free interest rate\n- **$q_i$**: Dividend yields on individual assets\n- **$T$**: Time to maturity\n- **$\\sigma_i$**: Volatilities of individual assets\n- **$\\rho_{ij}$**: Correlation between assets $i$ and $j$\n\nThe portfolio volatility is:\n$$\\sigma_p^2 = \\sum_{i=1}^n \\sum_{j=1}^n w_i w_j \\sigma_i \\sigma_j \\rho_{ij}$$\n\n## Interpretation\nThe basket option payoff is $\\left(\\sum w_i S_i(T) - K\\right)^+$. Exact pricing requires the multivariate lognormal distribution of basket components, which has no closed-form solution.\n\nThe approximation applies Black-Scholes to the basket as a whole:\n1. Calculate portfolio drift: $\\mu_p = \\sum w_i (r - q_i)$\n2. Calculate portfolio variance: $\\sigma_p^2$ as shown above\n3. Apply Black-Scholes with $(\\mu_p, \\sigma_p)$\n\nThis assumes the basket value is approximately lognormal, which holds reasonably well when:\n- The number of assets is large\n- Weights are not extremely unbalanced\n- Correlations are moderate\n\nMore sophisticated approximations include:\n- **Prb approximation**: Match first three moments\n- **GMS (Gentle, Moser, Staum)**: Improved moment matching\n- **Brennan, Magill, Surya**: Empirical correction factors\n\nThe approximation error increases with:\n- Small number of assets (fewer than 5)\n- Extreme weight concentrations\n- High correlations combined with volatility differences\n\n## Assumptions\n- Multivariate lognormal distribution for basket components\n- Constant correlations over the option life\n- Risk-neutral pricing framework\n- Geometric Brownian motion for each asset\n- No path dependencies within basket components\n\n## Practical Use\nBasket options are essential for multi-asset hedging:\n- Hedging portfolio exposure with options on the aggregate\n- Gaining exposure to correlated asset classes\n- Index-like payoffs on custom asset combinations\n\nCommon applications:\n- Equity index options (basket of all index constituents)\n- Currency basket options (weighted FX exposure)\n- Commodity basket options (energy, agricultural portfolios)\n\nMonte Carlo simulation with control variates provides accurate pricing for small baskets. For large baskets (indices), the approximation accuracy is typically sufficient for practical purposes."}
{"title": "Spread Option Kirk Approximation", "equation": "V = e^{-rT} \\left[ F_1 N(d_1) - F_2 N(d_2) \\right]", "category": "Exotic Options", "tags": ["spread-option", "kirk-approximation", "two-asset", "correlation", "forward-pricing", "commodity-spread", "crack-spread", "spark-spread", "energy-hedging", "relative-value", "exchange-option", "approximation-error"], "note": "## Equation Variables\nSpread options provide exposure to the price difference between two assets, with applications in energy markets for refining margin hedging and commodity basis risk management.\n\n- **$V$**: Price of the spread option\n- **$F_1$**: Forward price of asset 1\n- **$F_2$**: Forward price of asset 2\n- **$r$**: Risk-free interest rate\n- **$T$**: Time to maturity\n- **$\\sigma_1, \\sigma_2$**: Volatilities of assets 1 and 2\n- **$\\rho$**: Correlation between the two assets\n\nThe effective spread volatility and $d$ terms:\n$$\\sigma_{spread} \\approx \\sqrt{\\sigma_1^2 + \\sigma_2^2 - 2\\rho\\sigma_1\\sigma_2}$$\n$$d_1 = \\frac{\\ln(F_1/F_2) + 0.5 \\sigma_{spread}^2 T}{\\sigma_{spread} \\sqrt{T}}, \\quad d_2 = d_1 - \\sigma_{spread} \\sqrt{T}$$\n\n## Interpretation\nThe spread option payoff is $\\max(S_1(T) - S_2(T) - K, 0)$. For simplicity, Kirk's approximation assumes $K = 0$ (exchange option) or adjusts for non-zero strikes.\n\nKirk's insight was recognizing that the spread can be approximated as lognormal with the spread volatility formula. This extends Black-Scholes to the two-asset case.\n\nThe spread volatility formula shows:\n- Higher individual volatilities increase spread volatility\n- Higher correlation reduces spread volatility\n- Perfect correlation ($\\rho = 1$) eliminates spread volatility\n\nThe approximation is exact when:\n- One asset is deterministic (zero volatility)\n- Strike $K = 0$ (Margrabe exchange option)\n\nFor non-zero strikes, the approximation error increases with $K / \\text{spread value}$.\n\nThe Margrabe formula is exact for $K = 0$:\n$$V = S_1 N(d_1) - S_2 N(d_2) \\quad \\text{with} \\quad d_1 = \\frac{\\ln(S_1/S_2) + 0.5\\sigma^2 T}{\\sigma\\sqrt{T}}$$\n\n## Assumptions\n- Geometric Brownian motion for both assets\n- Constant correlation\n- Risk-neutral pricing framework\n- Approximate lognormality of the spread\n- Forward prices incorporate dividend/convenience yields\n\n## Practical Use\nSpread options are fundamental in energy markets:\n- **Crack spread**: Crude oil $\\to$ gasoline/heating oil\n- **Spark spread**: Natural gas $\\to$ electricity\n- **Frac spread**: Natural gas liquids vs. natural gas\n\nThese spreads represent refining or processing margins. Hedging margin risk protects against input-output price dislocations.\n\nThe Kirk approximation provides fast pricing suitable for:\n- Real-time trading and market-making\n- Risk management of spread positions\n- Calibration of spread option models\n\nMonte Carlo simulation or bivariate tree methods provide more accurate pricing for wide spreads or extreme strikes."}
{"title": "Exchange Option Margrabe Formula", "equation": "V = S_1 N(d_1) - S_2 N(d_2) \\quad \\text{where} \\quad d_1 = \\frac{\\ln(S_1/S_2) + 0.5\\sigma^2 T}{\\sigma\\sqrt{T}}", "category": "Exotic Options", "tags": ["exchange-option", "margrabe-formula", "change-of-numeraire", "relative-value", "currency-option", "two-asset", "forward-price", "ratio-lognormal", "conversion-option", "m&a-contingent", "debt-equity", "fundamental-multi-asset"], "note": "## Equation Variables\nThe exchange option gives the right to exchange one asset for another at a fixed ratio, serving as the fundamental multi-asset option upon which spread options and currency options are built.\n\n- **$V$**: Price of the exchange option\n- **$S_1$**: Current price of asset 1 (received)\n- **$S_2$**: Current price of asset 2 (given)\n- **$T$**: Time to maturity\n- **$\\sigma$**: Volatility of the ratio $S_1/S_2$\n\nThe ratio volatility $\\sigma$ is:\n$$\\sigma^2 = \\sigma_1^2 + \\sigma_2^2 - 2\\rho\\sigma_1\\sigma_2$$\n\nwhere $\\sigma_1, \\sigma_2$ are individual volatilities and $\\rho$ is their correlation.\n\nThe $d$ terms:\n$$d_1 = \\frac{\\ln(S_1/S_2) + 0.5\\sigma^2 T}{\\sigma\\sqrt{T}}, \\quad d_2 = d_1 - \\sigma\\sqrt{T}$$\n\n## Interpretation\nThe exchange option payoff is $\\max(S_1(T) - S_2(T), 0)$ — the right to receive asset 1 and give asset 2. Margrabe (1978) derived the elegant solution using change of numeraire.\n\nThe key insight is to change measure so that asset 2 becomes the numeraire. Under this measure:\n- The ratio $S_1/S_2$ follows GBM with volatility $\\sigma$\n- The exchange option becomes a standard call on $S_1/S_2$ with strike 1\n- The drift under the new measure eliminates the risk-free rate\n\nThe formula simplifies because:\n- No risk-free rate appears (rates embedded in forward prices)\n- No strike price (inherent 1-for-1 exchange)\n- Only relative volatility matters (not individual drifts)\n\nThe exchange option is symmetric: exchanging 2 for 1 has price:\n$$V_{2\\to1} = S_2 N(-d_2) - S_1 N(-d_1)$$\n\nThis satisfies $V_{1\\to2} + V_{2\\to1} = S_1 - S_2$, the forward exchange value.\n\n## Assumptions\n- Geometric Brownian motion for both assets\n- Constant correlation between assets\n- No dividends (can be added via drift adjustment)\n- 1-for-1 exchange ratio\n- Risk-neutral pricing framework\n\n## Practical Use\nThe exchange option is fundamental to many applications:\n- **Currency options**: Exchange domestic for foreign currency\n- **M&A contingent value rights**: Exchange cash for equity\n- **Debt-to-equity conversion**: Exchange debt principal for shares\n- **Commodity exchange rights**: Exchange one commodity for another\n\nThe Margrabe formula is exact for exchange options and forms the basis for:\n- Kirk's spread option approximation (with strike adjustment)\n- Currency options with fixed exchange\n- Any option on relative value between two assets\n\nThe formula demonstrates the power of change of numeraire in option pricing."}
{"title": "Quanto Option Fixed Exchange Rate", "equation": "V = e^{-r_f T} C(S_0, K, \\sigma, r_d, T)", "category": "Exotic Options", "tags": ["quanto", "fixed-exchange", "currency-conversion", "fx-hedging", "international-investment", "cross-currency", "fixed-rate", "structured-product", "emerging-markets", "currency-protection", "domestic-pricing", "foreign-underlying"], "note": "## Equation Variables\nA quanto option provides exposure to a foreign asset with the payoff calculated in domestic currency at a fixed exchange rate, eliminating FX risk while maintaining exposure to the foreign asset's price movements.\n\n- **$V$**: Price of the quanto option\n- **$S_0$**: Initial price of the underlying in foreign currency\n- **$K$**: Strike price in foreign currency\n- **$r_f$**: Foreign risk-free interest rate\n- **$r_d$**: Domestic risk-free interest rate\n- **$T$**: Time to maturity\n- **$\\sigma$**: Volatility of the underlying in foreign currency\n- **$e^{-r_f T}$**: Foreign currency discount factor\n\nThe payoff in domestic currency is:\n$$V_T = e^{-r_d T} \\max(S_T^f - K, 0) \\times FX_0$$\n\n## Interpretation\nThe quanto payoff depends only on the foreign asset price $S_T^f$, not on the FX rate at maturity. The fixed exchange rate $FX_0$ is set at initiation and not subject to FX risk.\n\nThis creates a unique pricing structure:\n1. The underlying is valued in foreign currency using $r_f$ and $\\sigma$\n2. The payoff is converted at the fixed rate $FX_0$ to domestic currency\n3. The discounting uses the domestic rate $r_d$\n\nThe correlation between asset and FX does not affect pricing because the FX exposure is hedged at initiation. This differs from \"float-to-fixed\" quantos where the exchange rate is set at maturity.\n\nThe formula shows that a quanto is equivalent to:\n- A foreign-denominated option discounted at foreign rates\n- Converted at spot FX rate to domestic currency\n- Valued under domestic measure\n\nKey properties:\n- FX exposure is hedged at initiation\n- Correlation between asset and FX doesn't affect value\n- The quanto price exceeds the domestic option (foreign rates may differ)\n\n## Assumptions\n- Fixed exchange rate set at initiation\n- No correlation between asset and FX in pricing\n- Geometric Brownian motion for underlying\n- Constant rates or forward rates for term structure\n- European exercise features\n\n## Practical Use\nQuantos are essential for international investment:\n- Emerging market equity exposure without FX risk\n- Foreign commodity exposure for domestic investors\n- Cross-currency structured products\n\nCommon applications:\n- Nikkei-linked notes for US investors\n- Emerging market equity quantos\n- Commodity-linked notes in investor's home currency\n\nVariants include:\n- **Partial quanto**: Only portion at fixed rate\n- **Float-to-fixed quanto**: Rate set at maturity (correlated)\n- **Quantoed swaption**: Option on foreign currency swap\n\nThe fixed exchange feature makes quantos particularly attractive for investors who believe in foreign asset appreciation but are bearish on foreign currency."}
